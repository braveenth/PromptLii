# PromptLii 📖
By: Braveenth Rasanayagam

## Overview
The mission of PromptLii is to democratize access to the Canadian legal information that is currently available through CanLii (Canadian Legal Information Institute). Individuals with reading, comprehension, and attention challenges may find the cases on CanLii to be intimidating to understand and comprehend.

Canadians should have open and fair access to the resources on CanLii, and we can leverage recent technological advances to ensure that everyone has an opportunity to use these resources and participate both fully and fairly in Canadian society.

By incorporating LLMs, image generation, and text-to-speech, this project has been able to distill and reiterate legal information in various different ways for different learning styles.

## Tutorial
Video Tutorial: TBA

## Contributions
License: MIT - https://github.com/braveenth/PromptLii/blob/main/LICENSE

## Disclaimer
The information provided here may not be factual.
Please do your own research. The output was generated by AI.
I am not responsible for anything here. USE THIS AT YOUR OWN RISK.


```python
# @title Configuration
url = "https://www.canlii.org/en/ca/scc/doc/2014/2014scc71/2014scc71.html" # @param {type:"string"}
story = True # @param {type:"boolean"}
image = True # @param {type:"boolean"}
gpt_model = "gpt-4-0125-preview" # @param ["gpt-3.5-turbo-16k", "gpt-4", "gpt-4-0125-preview"]
story_output_tokens = 2037 # @param {type:"slider", min:300, max:4096, step:1}
gpt_output_tokens = 2037 # @param {type:"slider", min:300, max:4096, step:1}
gpt_temperature = 0 # @param {type:"slider", min:0, max:1, step:0.1}
```


```python
!pip install tiktoken #2&1> /dev/null
!pip install openai #2&1> /dev/null
```

    Collecting tiktoken
      Using cached tiktoken-0.6.0-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (1.8 MB)
    Requirement already satisfied: regex>=2022.1.18 in /usr/local/lib/python3.10/dist-packages (from tiktoken) (2023.12.25)
    Requirement already satisfied: requests>=2.26.0 in /usr/local/lib/python3.10/dist-packages (from tiktoken) (2.31.0)
    Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.26.0->tiktoken) (3.3.2)
    Requirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.10/dist-packages (from requests>=2.26.0->tiktoken) (3.6)
    Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/local/lib/python3.10/dist-packages (from requests>=2.26.0->tiktoken) (2.0.7)
    Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.10/dist-packages (from requests>=2.26.0->tiktoken) (2024.2.2)
    Installing collected packages: tiktoken
    Successfully installed tiktoken-0.6.0
    Collecting openai
      Using cached openai-1.14.1-py3-none-any.whl (257 kB)
    Requirement already satisfied: anyio<5,>=3.5.0 in /usr/local/lib/python3.10/dist-packages (from openai) (3.7.1)
    Requirement already satisfied: distro<2,>=1.7.0 in /usr/lib/python3/dist-packages (from openai) (1.7.0)
    Collecting httpx<1,>=0.23.0 (from openai)
      Downloading httpx-0.27.0-py3-none-any.whl (75 kB)
    [2K     [90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[0m [32m75.6/75.6 kB[0m [31m2.7 MB/s[0m eta [36m0:00:00[0m
    [?25hRequirement already satisfied: pydantic<3,>=1.9.0 in /usr/local/lib/python3.10/dist-packages (from openai) (2.6.4)
    Requirement already satisfied: sniffio in /usr/local/lib/python3.10/dist-packages (from openai) (1.3.1)
    Requirement already satisfied: tqdm>4 in /usr/local/lib/python3.10/dist-packages (from openai) (4.66.2)
    Requirement already satisfied: typing-extensions<5,>=4.7 in /usr/local/lib/python3.10/dist-packages (from openai) (4.10.0)
    Requirement already satisfied: idna>=2.8 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.5.0->openai) (3.6)
    Requirement already satisfied: exceptiongroup in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.5.0->openai) (1.2.0)
    Requirement already satisfied: certifi in /usr/local/lib/python3.10/dist-packages (from httpx<1,>=0.23.0->openai) (2024.2.2)
    Collecting httpcore==1.* (from httpx<1,>=0.23.0->openai)
      Downloading httpcore-1.0.4-py3-none-any.whl (77 kB)
    [2K     [90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[0m [32m77.8/77.8 kB[0m [31m7.3 MB/s[0m eta [36m0:00:00[0m
    [?25hCollecting h11<0.15,>=0.13 (from httpcore==1.*->httpx<1,>=0.23.0->openai)
      Downloading h11-0.14.0-py3-none-any.whl (58 kB)
    [2K     [90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[0m [32m58.3/58.3 kB[0m [31m7.7 MB/s[0m eta [36m0:00:00[0m
    [?25hRequirement already satisfied: annotated-types>=0.4.0 in /usr/local/lib/python3.10/dist-packages (from pydantic<3,>=1.9.0->openai) (0.6.0)
    Requirement already satisfied: pydantic-core==2.16.3 in /usr/local/lib/python3.10/dist-packages (from pydantic<3,>=1.9.0->openai) (2.16.3)
    Installing collected packages: h11, httpcore, httpx, openai
    Successfully installed h11-0.14.0 httpcore-1.0.4 httpx-0.27.0 openai-1.14.1



```python
import requests
from bs4 import BeautifulSoup

# URL of the case. Examples are provided below, and you can uncomment one of them
# url = 'https://www.canlii.org/en/on/onsc/doc/2023/2023onsc1324/2023onsc1324.html'
# url = 'https://www.canlii.org/en/on/onsc/doc/2017/2017onsc245/2017onsc245.html'
# url = 'https://www.canlii.org/en/on/onla/doc/2016/2016canlii30878/2016canlii30878.html'
# url = 'https://www.canlii.org/en/on/onca/doc/2002/2002canlii45005/2002canlii45005.html'
# url = 'https://www.canlii.org/en/on/onsc/doc/2010/2010onsc3793/2010onsc3793.html'
# url = 'https://www.canlii.org/en/ca/scc/doc/2008/2008scc39/2008scc39.html'
# url = 'https://www.canlii.org/en/on/onsc/doc/2024/2024onsc161/2024onsc161.html'

# Send a GET request to the URL
response = requests.get(url)
```


```python
# Create an array to store the paragraphs and citiations
import pandas as pd
import numpy as np

citations = pd.DataFrame(columns=['paragraph', 'citation','link'])
```


```python
# Check if the request was successful
if response.status_code == 200:
    # Parse the HTML content of the page with BeautifulSoup
    htmlContent = BeautifulSoup(response.content, 'html.parser')

    # Find all div elements
    divs = htmlContent.find_all('div', class_='paragWrapper')
    caseText =""
    # Extract and print text from each div
    for div in divs:
      #print(div)
      links = div.find_all('a', class_='reflex3-caselaw')
      data_lbh_p_anchor = div.get('data-lbh-p-anchor') if div else None

      if data_lbh_p_anchor[0:3]=='par':
        par_num = int(data_lbh_p_anchor[3:])

      for link in links:
        citation_row = pd.DataFrame({'paragraph': [par_num], 'citation': [link.text], 'link': [link.get('href')]})
        citations = pd.concat([citations, citation_row], ignore_index=True)

        #print(link.get('href'))

      caseText +="Paragraph #"
      caseText +=(div.text)
      caseText += '\n'

    print(caseText)
else:
    print(f"Failed to retrieve the webpage: {response.status_code}")
```

    Paragraph #[1]                             
    The key issues on this appeal come down to two straightforward
    questions: Does Canadian common law impose a duty on parties to perform their contractual
    obligations honestly? And, if so, did either of the respondents breach that duty? 
    I would answer both questions in the affirmative. Finding that there is a duty to
    perform contracts honestly will make the law more certain, more just and more in
    tune with reasonable commercial expectations. It will also bring a measure of justice
    to the appellant, Mr. Bhasin, who was misled and lost the value of his business
    as a result.
    Paragraph #[2]                             
    The appellant, Mr. Bhasin, through his business Bhasin
    & Associates, was an enrollment director for Canadian American Financial Corp.
    (“Can-Am”) beginning in 1989. The relationship between Mr. Bhasin and Can-Am soured
    in 1999 and ultimately Can-Am decided not to renew the dealership agreement with
    him. The litigation leading to this appeal ensued.
    Paragraph #[3]                             
    Can-Am markets education savings plans (“ESPs”) to
    investors through retail dealers, known as enrollment directors, such as Mr. Bhasin. 
    It pays the enrollment directors compensation and bonuses for selling ESPs. The
    enrollment directors are in effect small business owners and the success of their
    businesses depends on them building a sales force. It took Mr. Bhasin approximately
    10 years to build his sales force, but his business thrived and Can-Am gave him
    numerous awards and prizes recognizing him as one of their top enrollment directors
    in Canada: 2011 ABQB 637, 526 A.R. 1, at paras. 51, 238 and 474. 
    Paragraph #[4]                             
    An enrollment director’s agreement that took effect
    in 1998 governed the relationship between Can-Am and Mr. Bhasin.  (That Agreement
    replaced a previous agreement of an indefinite term that had governed their relationship
    since the outset in 1989.) The Agreement was a commercial dealership agreement,
    not a franchise agreement. There was no franchise fee and it was not covered by
    the statutory duty of fair dealing such as that provided for in s. 7 of the Franchises
    Act, R.S.A. 2000, c. F-23.  
    Paragraph #[5]                             
    That said, there were some features of the 1998 Agreement
    that are similar to provisions typically found in franchise agreements. Mr. Bhasin
    was obliged to sell Can-Am investment products exclusively and owed it a fiduciary
    duty. Can-Am owned the client lists, was responsible for branding and implemented
    central policies that applied to all enrollment directors: see cls. 4.1, 5.2, 5.3
    and 4.7. Mr. Bhasin could not sell, transfer, or merge his operation without Can-Am’s
    consent, which was not to be withheld unreasonably: see cls. 4.5 and 11.4.  
    Paragraph #[6]                             
    The term of the contract was three years. Clauses
    8.3 and 8.4 allowed termination on short notice for misconduct or other cause. Clause
    3.3 — the provision at the centre of this case ― provided that the contract
    would automatically renew at the end of the three-year term unless one of the parties
    gave six months’ written notice to the contrary.
    Paragraph #[7]                             
    Mr. Hrynew, one of the respondents and another enrollment
    director, was a competitor of Mr. Bhasin and there was considerable animosity between
    them: trial reasons, at para. 461. The trial judge found, in effect, that Mr. Hrynew
    pressured Can-Am not to renew its Agreement with Mr. Bhasin and that Can-Am dealt
    dishonestly with Mr. Bhasin and ultimately gave in to that pressure.
    Paragraph #[8]                             
    When Mr. Hrynew moved his agency to Can-Am from one
    of its competitors many years before the events in question, Can-Am promised him
    that he would be given consideration for mergers that would take place and he in
    fact merged with other agencies in Calgary after joining Can-Am: trial reasons,
    at para. 238. He was in a strong position with Can-Am because he had the largest
    agency in Alberta and a good working relationship with the Alberta Securities Commission,
    which regulated Can-Am’s business: para. 284.
    Paragraph #[9]                             
    Mr. Hrynew wanted to capture Mr. Bhasin’s lucrative
    niche market around which he had built his business: trial reasons, at para. 303.
    Mr. Hrynew personally approached Mr. Bhasin to propose a merger of their agencies
    on numerous occasions: para. 238. He also actively encouraged Can-Am to force the
    merger and made “veiled threats” that he would leave if no merger took place: para.
    282; see also paras. 251 and 287. The trial judge found that the proposed “merger”
    was in effect a hostile takeover of Mr. Bhasin’s agency by Mr. Hrynew: para. 240.
    Mr. Bhasin steadfastly refused to participate in such a merger: para. 247.
    Paragraph #[10]                         
    The Alberta Securities Commission raised concerns
    about compliance issues among Can-Am’s enrollment directors. In late 1999, the Commission
    required Can-Am to appoint a single provincial trading officer (“PTO”) to review
    its enrollment directors for compliance with securities laws: trial reasons, at
    paras. 149, 152 and 160. Can-Am appointed Mr. Hrynew to that position in September
    of that year. The role required him to conduct audits of Can-Am’s enrollment directors.
    Mr. Bhasin and Mr. Hon, another enrollment director, objected to having Mr. Hrynew,
    a competitor, review their confidential business records: paras. 189-96. 
    Paragraph #[11]                         
    Can-Am became worried that the Commission might revoke
    its licence and, in 1999 and 2000, it had many discussions with the Commission about
    compliance. During those discussions, it was clear that Can-Am was considering a
    restructuring of its agencies in Alberta that involved Mr. Bhasin. In June 2000,
    Can-Am outlined its plans to the Commission and they included Mr. Bhasin working
    for Mr. Hrynew’s agency.  The trial judge found that this plan had been formulated
    before June 2000: para. 256.  None of this was known by Mr. Bhasin: paras. 243-46. 
    
    Paragraph #[12]                         
    In fact, Can-Am repeatedly misled Mr. Bhasin by telling
    him that Mr. Hrynew, as PTO, was under an obligation to treat the information confidentially
    and that the Commission had rejected a proposal to have an outside PTO, neither
    of which was true: trial reasons, at para. 195.  It also responded equivocally when
    Mr. Bhasin asked in August 2000 whether the merger was a “done deal”: para. 247.
    When Mr. Bhasin continued to refuse to allow Mr. Hrynew to audit his records, Can-Am
    threatened to terminate the 1998 Agreement and in May 2001 gave notice of non-renewal
    under the Agreement: paras. 207-11. 
    Paragraph #[13]                         
    At the expiry of the contract term, Mr. Bhasin lost
    the value in his business in his assembled workforce. The majority of his sales
    agents were successfully solicited by Mr. Hrynew’s agency. Mr. Bhasin was obliged
    to take less remunerative work with one of Can-Am’s competitors.
    Paragraph #[14]                         
    Mr. Bhasin sued Can-Am and Mr. Hrynew.  Moen J. in
    the Alberta Court of Queen’s Bench found that it was an implied term of the contract
    that decisions about whether to renew the contract would be made in good faith. 
    The court held that the corporate respondent was in breach of the implied term of
    good faith, that Mr. Hrynew had intentionally induced breach of contract, and that
    the respondents were liable for civil conspiracy.  
    Paragraph #[15]                         
    The trial judge found that Can-Am acted dishonestly
    with Mr. Bhasin throughout the events leading up to the non-renewal: it misled him
    about its intentions with respect to the merger and about the fact that it had already
    proposed the new structure to the Commission; it did not communicate to him that
    the decision was already made and final, even though he asked; and it did not communicate
    with him that it was working closely with Mr. Hrynew to bring about a new corporate
    structure with Hrynew’s being the main agency in Alberta. The trial judge also found
    that, had Can-Am acted honestly, Mr. Bhasin could have “governed himself accordingly
    so as to retain the value in his agency”: para. 258.
    Paragraph #[16]                         
    The Alberta Court of Appeal allowed the respondents’
    appeal and dismissed Mr. Bhasin’s lawsuit. The court found his pleadings to be insufficient
    and held that the lower court erred by implying a term of good faith in the context
    of an unambiguous contract containing an entire agreement clause: 2013 ABCA 98,
    84 Alta. L.R. (5th) 68.
    Paragraph #[17]                         
    The appeal raises four issues:
    Paragraph #[18]                         
    The Court of Appeal held that Mr. Bhasin had not
    properly pleaded the good faith issue and that the trial judge had therefore erred
    in considering it. Mr. Bhasin contests this conclusion, while the respondents support
    it. I agree with Mr. Bhasin.
    Paragraph #[19]                         
    The allegations in the statement of claim clearly
    put the questions of improper purpose and dishonesty in issue. These facts are sufficient
    to put Can-Am’s good faith in issue. The question of whether this conduct amounted
    to a breach of the duty of good faith is a legal conclusion that did not need to
    be pleaded separately. The defendants did not move to strike the pleadings or seek
    particulars of the allegation of wrongful termination in the statement of claim.
    Good faith was a live issue that was fully canvassed in a lengthy trial: A.F., at
    paras. 92-94. Written submissions by both parties at trial referred to the good
    faith issue and, even in his opening at trial, Mr. Bhasin’s counsel raised the issue
    of good faith. 
    Paragraph #[20]                         
    The trial judge held that any deficiency in the pleadings
    did not cause prejudice to the respondents: paras. 23 and 48.  This is an assessment
    she was uniquely positioned to make and her conclusion ought to be treated with
    deference on appeal. The good faith issue was fully argued in and addressed by the
    Court of Appeal and has been fully argued on the merits in this Court.
    Paragraph #[21]                         
    In my view, the trial judge did not make a reversible
    error by adjudicating the issue of good faith and we should address the merits of
    that issue. 
    Paragraph #[22]                         
    The trial judge accepted Mr. Bhasin’s position that
    there was a duty of good faith in this case and that it had been breached. In brief,
    her reasoning was as follows. 
    Paragraph #[23]                         
    First, the trial judge decided that the 1998 Agreement
    was a type of agreement which as a matter of law requires good faith performance.
    She recognized that the 1998 Agreement did not fall within any of the existing categories
    of contract, such as employment, insurance and franchise agreements, which have
    been held to require good faith performance. She concluded, however, that the Agreement
    was analogous to a franchise or employment contract, and so by analogy to these
    cases, she implied a term of good faith performance as a matter of law. The contract
    was not balanced from its inception and the relationship placed the enrollment director
    in a position of inherent and predictable vulnerability: paras. 67-86. 
    Paragraph #[24]                         
    Second, and in the alternative, the trial judge held
    that a term of good faith performance should be implied based on the intentions
    of the parties in order to give business efficacy to the agreement.  She concluded
    that “[w]hen one considers the whole of the relationship . . . it is clear
    that the parties had to operate in good faith and there was a requirement of fairness
    between them. In other words, good faith was necessary to give business efficacy
    to the whole 1998 Agreement”: para. 101. 
    Paragraph #[25]                         
    The 1998 Agreement contained an “entire agreement
    clause” stating that there were no “agreements, express, implied or statutory, other
    than expressly set out” in it: cl. 11.2.  The trial judge held, however, that this
    clause did not preclude the implication of a duty of good faith. The parties, she
    reasoned, cannot rely on exclusion clauses to avoid contractual obligations where
    there is an imbalance of power, and courts refuse to let parties shelter under entire
    agreement clauses where it would be unjust or inequitable to do so: paras. 116-18.
    Paragraph #[26]                         
    Turning to the issue of breach, the trial judge found
    that Can-Am had breached the agreement, first by requiring Mr. Bhasin to submit
    to an audit by Mr. Hrynew and to provide the latter with access to his business
    records, and second by exercising the non-renewal clause in a dishonest and misleading
    manner and for an improper purpose. The non-renewal clause was not intended to permit
    Can-Am to force a merger of the Bhasin and Hrynew agencies, but that was the purpose
    for which Can-Am exercised this power: para. 261. The trial judge also found both
    respondents liable for unlawful means conspiracy and found Mr. Hrynew liable for
    inducing Can-Am’s breach of its contract with Mr. Bhasin.
    Paragraph #[27]                         
    The Court of Appeal reversed and held that there
    had been no breach of contract. The duty of good faith in employment contracts could
    not be extended by analogy to other types of contract. In any event, the duty of
    good faith in the employment context is limited to the manner of termination and
    does not include reasons for non-renewal: C.A. reasons, at paras. 27 and 31.  Nor
    was this a circumstance in which a term could be implied because it was so obvious
    it was not thought necessary to mention or was necessary to make the contract work:
    para. 32. Even if there were an implied duty of good faith in this case, the impugned
    conduct concerned the non-renewal of a contract, which occurs on expiry, unlike
    a termination clause: para. 31. 
    Paragraph #[28]                         
    Moreover, the Court of Appeal held that a term cannot
    be implied where it goes against an express term of the contract. Here, the parties
    did not intend a perpetual contract, since they included a term allowing either
    party to unilaterally trigger its expiration prior to the end of each three-year
    term. The trial judge’s approach was inconsistent with the non-renewal provision
    of the contract.  The motive for triggering expiration was not restricted under
    the Agreement. The implication of a term of good faith also violated the entire
    agreement clause. The court held that the evidence of assurances given by Can-Am
    as to how the non-renewal power would be exercised fell afoul of the parol evidence
    rule and should not have been considered. Since the Court of Appeal held there was
    no breach of contract, the basis for the claims in unlawful means conspiracy and
    inducing breach of contract also disappeared.
    Paragraph #[29]                         
    Mr. Bhasin advances two related positions on appeal.
    His broad submission is that the Court should recognize a general duty of good faith
    in contract. The duty arises where the agreement gives the defendant the power to
    unilaterally defeat a legitimate contractual objective of the plaintiff and it does
    not clearly allow the defendant to exercise its power without regard for that objective:
    A.F., at para. 51. This duty of good faith prevents conduct which, while consonant
    with the letter of a contract, exhibits dishonesty, ill will, improper motive or
    similar departures from reasonable business expectations. Mr. Bhasin contends that
    common law in Canada is increasingly isolated as other jurisdictions embrace a greater
    role for good faith in contract law: A.F., at paras. 27-32. The recognition of a
    general duty of good faith would constitute an incremental advance in the law, given
    the numerous specific situations that already give rise to a duty of good faith.
    Mr. Bhasin relies on the findings of the trial judge that the respondents improperly
    and dishonestly used their non-renewal right to compel Mr. Bhasin to merge with
    his competitor. Mr. Bhasin contends that the respondents had no legitimate business
    reason for not renewing the contract. He also says that the entire agreement clause
    should be construed narrowly, and that express language is needed for such a clause
    to derogate from a duty of good faith: A.F., at para. 83.
    Paragraph #[30]                         
    Mr. Bhasin’s second position, emphasized in oral
    argument, is that the Court should at least recognize a duty of honest performance
    of contractual obligations: transcript, at pp. 8, 10 and 24. Mr. Bhasin relies on
    the trial judge’s findings that Can-Am acted dishonestly towards Mr. Bhasin throughout
    the period leading up to the non-renewal.  It repeatedly lied to him about the nature
    of the organizational changes required by the Alberta Securities Commission, the
    nature of the audits that were to be carried out by Mr. Hrynew, and was dishonest
    about its intention to force him out: trial reasons, at paras. 195, 221, 246-47
    and 267. 
    Paragraph #[31]                         
    Unsurprisingly, the respondents see things very differently.
    While they accept that good faith plays a role in Canadian contract law, they submit
    that this role is much more modest than Mr. Bhasin suggests. They say that such
    a duty arises only in certain classes of contract, such as employment contracts,
    and in contracts involving discretionary powers: R.F., at para. 52. In the employment
    context, the duty applies only to the manner in which a contract is terminated.
    The contract in this case was negotiated between commercial parties to whom the
    policy considerations underlying employment law doctrine do not apply. Mr. Bhasin
    is alleging a right to a perpetual, or at least indefinite, contract with the respondents.
    The contract in this case could not be said to be discretionary, because it provided
    simply that on six months’ notice, either party could terminate the Agreement. 
    The respondents submit that there is no ambiguity in the wording of the non-renewal
    clause of the contract and so there is no basis for implying other terms or for
    relying on extrinsic evidence of the parties’ intentions. The entire agreement clause
    specifically precluded the implication of any terms other than the express terms
    of the contract.
    Paragraph #[32]                         
    The notion of good faith has deep roots in contract
    law and permeates many of its rules. Nonetheless, Anglo-Canadian common law has
    resisted acknowledging any generalized and independent doctrine of good faith performance
    of contracts. The result is an “unsettled and incoherent body of law” that has developed
    “piecemeal” and which is “difficult to analyze”: Ontario Law Reform Commission (“OLRCˮ),
    Report on Amendment of the Law of Contract (1987), at p. 169. This approach
    is out of step with the civil law of Quebec and most jurisdictions in the United
    States and produces results that are not consistent with the reasonable expectations
    of commercial parties. 
    Paragraph #[33]                         
    In my view, it is time to take two incremental steps
    in order to make the common law less unsettled and piecemeal, more coherent and
    more just. The first step is to acknowledge that good faith contractual performance
    is a general organizing principle of the common law of contract which underpins
    and informs the various rules in which the common law, in various situations and
    types of relationships, recognizes obligations of good faith contractual performance.
    The second is to recognize, as a further manifestation of this organizing principle
    of good faith, that there is a common law duty which applies to all contracts to
    act honestly in the performance of contractual obligations.  
    Paragraph #[34]                         
    In my view, taking these two steps is perfectly consistent
    with the Court’s responsibility to make incremental changes in the common law when
    appropriate. Doing so will put in place a duty that is just, that accords with the
    reasonable expectations of commercial parties and that is sufficiently precise that
    it will enhance rather than detract from commercial certainty. 
    Paragraph #[35]                         
    The doctrine of good faith traces its history to
    Roman law and found acceptance in early English contract law. For example, Lord
    Northington wrote in Aleyn v. Belchier (1758), 1 Eden 132,  28 E.R. 634,
    at p. 637, cited in Mills v. Mills (1938), 60 C.L.R. 150 (H.C.A.), at p.
    185, that “[n]o point is better established than that, a person having a power,
    must execute it bona fide for the end designed, otherwise it is corrupt and
    void.” Similarly, Lord Kenyon wrote in Mellish v. Motteux (1792), Peake 156,
    170 E.R. 113, “in contracts of all kinds, it is of the highest importance that courts
    of law should compel the observance of honesty and good faith”: p. 113-14.  In Carter
    v. Boehm (1766), 3 Burr. 1905, 97 E.R. 1162, at p. 1910, Lord Mansfield stated
    that good faith is a principle applicable to all contracts; see also Herbert
    v. Mercantile Fire Ins. Co. (1878), 43 U.C.Q.B. 384; R. Powell, “Good Faith
    in Contracts” (1956), 9 Curr. Legal Probs. 16.
    Paragraph #[36]                         
    However, these broad pronouncements have been, for
    the most part, restricted by subsequent jurisprudence to specific types of contracts
    and relationships, such as insurance contracts, leaving unclear the role of the
    broader principle of good faith in the modern Anglo-Canadian law of contracts: Chitty
    on Contracts (31st ed. 2012), vol. I, General Principles, at para.
    1-039; W. P. Yee, “Protecting Parties’ Reasonable Expectations: A General Principle
    of Good Faith” (2001), 1 O.U.C.L.J. 195, at p. 195; E. P. Belobaba, “Good
    Faith in Canadian Contract Law”, in Special Lectures of the Law Society of Upper
    Canada 1985 — Commercial Law: Recent Developments and Emerging Trends (1985),
    73, at p. 75. One leading Canadian contracts scholar went so far as to say that
    the common law has taken a “kind of perverted pride” in the absence of any general
    notion of good faith, as if accepting that notion “would be admitting to the presence
    of some kind of embarrassing social disease”: J. Swan, “Whither Contracts: A Retrospective
    and Prospective Overview”, in Special Lectures of the Law Society of Upper Canada
    1984 — Law in Transition: Contracts (1984), 125, at p. 148.
    Paragraph #[37]                         
    This Court has not examined whether there is a general
    duty of good faith contractual performance. However, there has been an active debate
    in other courts and among scholars for decades over whether there is, or should
    be, a general or “stand-alone” duty of good faith in the performance of contracts.
    Canadian courts have reached different conclusions on this point. 
    Paragraph #[38]                         
    Some suggest that there is a general duty of good
    faith: Gateway Realty Ltd. v. Arton Holdings Ltd. (1991), 1991 CanLII 2707 (NS SC), 106 N.S.R.
    (2d) 180 (S.C. (T.D.)), aff’d on narrower grounds (1992), 1992 NSCA 70 (CanLII), 112 N.S.R. (2d) 180 (S.C.
    (App. Div.)); McDonald’s Restaurant of Canada Ltd. v. British Columbia (1997),
    1997 CanLII 2368 (BC CA), 29 B.C.L.R. (3d) 303 (C.A.), at para. 99; Crawford v. Agricultural Development
    Board (N.B.) (1997), 1997 CanLII 9539 (NB CA), 192 N.B.R. (2d) 68 (C.A.), at paras. 7-8.  They see a broad
    role for good faith as an implied term in all contracts that establishes minimum
    standards of acceptable commercial behaviour. As Kelly J. put it in Gateway Realty,
    at para. 38:
    Paragraph #[39]                         
    Other courts are of the view that there exists no
    such general duty of good faith in all contracts: Transamerica Life Canada Inc.
    v. ING Canada Inc. (2003), 2003 CanLII 9923 (ON CA), 68 O.R. (3d) 457 (C.A.), at paras. 53-54; Mesa
    Operating Limited Partnership v. Amoco Canada Resources Ltd. (1994), 1994 ABCA 94 (CanLII), 149 A.R.
    187 (C.A.), at paras. 15-19, per Kerans J.A., dubitante; Barclays
    Bank PLC v. Metcalfe & Mansfield Alternative Investments VII Corp., 2013
    ONCA 494, 365 D.L.R. (4th) 15, at para. 131; see G. R. Hall, Canadian Contractual
    Interpretation Law (2nd ed. 2012), at pp. 338-46. The detractors of such a general
    duty of good faith have accepted a limited role for good faith in certain contexts
    but have held that it would create commercial uncertainty and undermine freedom
    of contract to recognize a general duty of good faith that would permit courts to
    interfere with the express terms of a contract.
    Paragraph #[40]                         
    This Court ought to develop the common law to keep
    in step with the “dynamic and evolving fabric of our society” where it can do so
    in an incremental fashion and where the ramifications of the development are “not
    incapable of assessment”: R. v. Salituro, 1991 CanLII 17 (SCC), [1991] 3 S.C.R. 654, at p. 670;
    Bow Valley Husky (Bermuda) Ltd. v. Saint John Shipbuilding Ltd., 1997 CanLII 307 (SCC), [1997] 3
    S.C.R. 1210, at para. 93; see also Watkins v. Olafson, 1989 CanLII 36 (SCC), [1989] 2 S.C.R. 750,
    at pp. 760-64; Hill v. Church of Scientology of Toronto, 1995 CanLII 59 (SCC), [1995] 2 S.C.R.
    1130, at para. 85; R.W.D.S.U., Local 558 v. Pepsi-Cola Canada Beverages (West)
    Ltd., 2002 SCC 8, [2002] 1 S.C.R. 156; British Columbia v. Imperial Tobacco
    Canada Ltd., 2005 SCC 49, [2005] 2 S.C.R. 473; Grant v. Torstar Corp.,
    2009 SCC 61, [2009] 3 S.C.R. 640, at para. 46. This is even more appropriate where,
    as here, what is contemplated is not the reversal of some settled rule, but a development
    directed to bringing greater certainty and coherence to a complex and troublesome
    area of the common law.
    Paragraph #[41]                         
    As I see it, the developments that I propose are
    desirable as a result of several considerations. First, the current Canadian common
    law is uncertain. Second, the current approach to good faith performance lacks coherence.
    Third, the current law is out of step with the reasonable expectations of commercial
    parties, particularly those of at least two major trading partners of common law
    Canada — Quebec and the United States: see, e.g., Hall, at p. 347. While the developments
    which I propose will not completely address these problems, they will bring a measure
    of coherence and predictability to the law and will bring the law closer to what
    reasonable commercial parties would expect it to be. 
    Paragraph #[42]                         
    Anglo-Canadian common law has developed a number
    of rules and doctrines that call upon the notion of good faith in contractual dealings;
    it is a concept that underlies many elements of modern contract law: S. M. Waddams,
    The Law of Contracts (6th ed. 2010), at para. 550; J. D. McCamus The Law
    of Contracts (2nd ed. 2012),   at pp. 835-38; OLRC, at p. 165; Belobaba, at
    pp. 75-76; J. F. O’Connor, Good Faith in English Law (1990), at pp. 17-49;
    J. Steyn, “Contract Law: Fulfilling the Reasonable Expectations of Honest Men” (1997),
    113 Law Q. Rev. 433. The approach, not unfairly, has been characterized as
    developing “piecemeal solutions in response to demonstrated problems”: Interfoto
    Picture Library Ltd. v. Stiletto Visual Programmes Ltd., [1989] 1 Q.B. 433 (C.A.),
    at p. 439, per Bingham L.J. (as he then was). Thus we see, for example, that
    good faith notions have been applied to particular types of contracts, particular
    types of contractual provisions and particular contractual relationships. It also
    underlies doctrines that explicitly deal with fairness in contracts, such as unconscionability,
    and plays a role in interpreting and implying contractual terms. The difficulty
    with this “piecemeal” approach, however, is that it often fails to take a consistent
    or principled approach to similar problems. A brief review of the current landscape
    of good faith will show the extent to which this is the case.
    Paragraph #[43]                         
    Considerations of good faith are apparent in doctrines
    that expressly consider the fairness of contractual bargains, such as unconscionability.
    This doctrine is based on considerations of fairness and preventing one contracting
    party from taking undue advantage of the other: G. H. L. Fridman, The Law of
    Contract in Canada (6th ed. 2011), at pp. 329-30; E. Peden, “When Common Law
    Trumps Equity: the Rise of Good Faith and Reasonableness and the Demise of Unconscionability”
    (2005), 21 J.C.L. 226; Belobaba, at p. 86; S. M. Waddams, “Good Faith, Unconscionability
    and Reasonable Expectations” (1995), 9 J.C.L. 55.
    Paragraph #[44]                         
    Good faith also plays a role in the law of implied
    terms, particularly with respect to terms implied by law. Terms implied by law redress
    power imbalances in certain classes of contracts such as employment, landlord-lessee,
    and insurance contracts: London Drugs Ltd. v. Kuehne & Nagel International
    Ltd., 1992 CanLII 41 (SCC), [1992] 3 S.C.R. 299, at p. 457, per McLachlin J. (as she then
    was); see also Machtinger v. HOJ Industries Ltd., 1992 CanLII 102 (SCC), [1992] 1 S.C.R. 986, per
    McLachlin J., concurring. The implication of terms plays a functionally similar
    role in common law contract law to the doctrine of good faith in civil law jurisdictions
    by filling in gaps in the written agreement of the parties: Chitty on Contracts,
    at para. 1-051. In Mesa Operating, the Alberta Court of Appeal implied
    a term that a power of pooling properties for the purpose of determining royalty
    payments be exercised reasonably. The court implied this term in order to give effect
    to the intentions of the parties rather than as a requirement of good faith, but
    Kerans J.A. stated that “[t]he rule that governs here can, therefore, be expressed
    much more narrowly than to speak of good faith, although I suspect it is in reality
    the sort of thing some judges have in mind when they speak of good faith”: para.
    22.  Many other examples may be found in Waddams, The Law of Contracts, at
    paras. 499-506.
    Paragraph #[45]                         
    Considerations of good faith are also apparent in
    contract interpretation: Chitty on Contracts, at para. 1-050; Hall, at p.
    347. The primary object of contractual interpretation is of course to give effect
    to the intentions of the parties at the time of contract formation. However, considerations
    of good faith inform this process. Parties may generally be assumed to intend certain
    minimum standards of conduct. Further, as Lord Reid observed in Schuler A.G.
    v. Wickman Machine Tool Sales Ltd., [1974] A.C. 235 (H.L.), at p. 251,
    “[t]he more unreasonable the result the more unlikely it is that the parties can
    have intended it”. As A. Swan and J. Adamski put it, the duty of good faith “is
    not an externally imposed requirement but inheres in the parties’ relation”: Canadian
    Contract Law (3rd ed. 2012), at §§ 8.134-8.146.
    Paragraph #[46]                         
    Good faith also appears in numerous contexts in a
    more explicit form. The concept of “good faith” is used in hundreds of statutes
    across Canada, including statutory duties of good faith and fair dealing in franchise
    legislation and good faith bargaining in labour law: S. K. O’Byrne, “Good Faith
    in Contractual Performance: Recent Developments” (1995), 74 Can. Bar Rev. 70,
    at p.  71. 
    Paragraph #[47]                         
    There have been many attempts to bring a measure
    of coherence to this piecemeal accretion of appeals to good faith: see, among many
    others, McCamus, at pp. 835-68; S. K. O’Byrne, “The Implied Term of Good Faith and
    Fair Dealing: Recent Developments” (2007), 86 Can. Bar Rev. 193, at pp. 196-204;
    Waddams, The Law of Contracts, at paras. 494-508; R. S. Summers, “‛Good
    Faith’ in General Contract Law and the Sales Provisions of the Uniform Commercial
    Codeˮ (1968), 54 Va. L. Rev. 195; S. J. Burton, “Breach of Contract
    and the Common Law Duty to Perform in Good Faithˮ (1981), 94 Harv. L. Rev.
    369. By way of example, Professor McCamus has identified three broad types of situations
    in which a duty of good faith performance of some kind has been found to exist:
    (1) where the parties must cooperate in order to achieve the objects of the contract;
    (2) where one party exercises a discretionary power under the contract; and (3)
    where one party seeks to evade contractual duties (pp. 840-56; CivicLife.com
    Inc. v. Canada (Attorney General) (2006), 2006 CanLII 20837 (ON CA), 215 O.A.C. 43, at paras. 49-50). 
    Paragraph #[48]                         
    While these types of cases overlap to some extent,
    they provide a useful analytical tool to appreciate the current state of the law
    on the duty of good faith. They also reveal some of the lack of coherence in the
    current approach. It is often unclear whether a good faith obligation is being imposed
    as a matter of law, as a matter of implication or as a matter of interpretation.
    Professor McCamus notes:
    Paragraph #[49]                         
    The first type of situation (contracts requiring
    the cooperation of the parties to achieve the objects of the contract) is reflected
    in the jurisprudence of this Court. In Dynamic Transport Ltd. v. O.K. Detailing
    Ltd., 1978 CanLII 215 (SCC), [1978] 2 S.C.R. 1072, the parties to a real estate transaction failed
    to specify in the purchase-sale agreement which party was to be responsible for
    obtaining planning permission for a subdivision of the property. By law, the vendor
    was the only party capable of obtaining such permission. The Court held that the
    vendor was under an obligation to use reasonable efforts to secure the permission,
    or as Dickson J. (as he then was) put it, “[t]he vendor is under a duty to act in
    good faith and to take all reasonable steps to complete the sale”: p. 1084. It is
    not completely clear whether this duty was imposed as a matter of law or was implied
    based on the parties’ intentions: see p. 1083; see also Gateway Realty and
    CivicLife.com.
    Paragraph #[50]                         
    Mitsui & Co. (Canada) Ltd. v. Royal Bank of
    Canada, 1995 CanLII 87 (SCC), [1995] 2 S.C.R. 187, is an example of the second
    type of situation (exercise of contractual discretion). The lease of a helicopter
    included an option to buy at the “reasonable fair market value of the helicopter
    as established by Lessor”: para. 2.  This Court held, at para. 34, that, “[c]learly,
    the lessor is not in a position, by virtue of clause 32, to make any offer that
    it may feel is appropriate.  It is contractually bound to act in good faith to determine
    the reasonable fair market value of the helicopters, which is the price that the
    parties had initially agreed would be the exercise price of the option.” The Court
    did not discuss the basis for implying the term, but suggested that in the absence
    of a reasonableness requirement, the option would be a mere agreement to agree and
    thus would be unenforceable, which means that the implication of the term was necessary
    to give business efficacy to the agreement. 
    Paragraph #[51]                         
    This Court’s decision in Mason v. Freedman,
    1958 CanLII 7 (SCC), [1958] S.C.R. 483, falls in the third type of situation in which a duty of good
    faith arises (where a contractual power is used to evade a contractual duty). In
    that case, the vendor in a real estate transaction regretted the bargain he had
    made. He then sought to repudiate the contract by failing to convey title in fee
    simple because he claimed his wife would not provide a bar of dower. The issue was
    whether he could take advantage of a clause permitting him to repudiate the transaction
    in the event that he was “unable or unwilling” to remove this defect in title even
    though he had made no efforts to do so by trying to obtain the bar of dower.  Judson
    J. held that the clause did not “enable a person to repudiate a contract for a cause
    which he himself has brought about” or permit “a capricious or arbitrary repudiation”:
    p. 486. On the contrary, “[a] vendor who seeks to take advantage of the clause must
    exercise his right reasonably and in good faith and not in a capricious or arbitrary
    manner”: p. 487.
    Paragraph #[52]                         
    The jurisprudence is not always very clear about
    the source of the good faith obligations found in these cases. The categories of
    terms implied as a matter of law, terms implied as a matter of intention and terms
    arising as a matter of interpretation sometimes are blurred or even ignored, resulting
    in uncertainty and a lack of coherence at the level of principle. 
    Paragraph #[53]                         
    Apart from these types of situations in which a duty
    of good faith arises, common law Canadian courts have also recognized that there
    are classes of relationships that call for a duty of good faith to be implied by
    law.
    Paragraph #[54]                         
    For example, this Court confirmed that there is a
    duty of good faith in the employment context in Honda Canada Inc. v. Keays,
    2008 SCC 39, [2008] 2 S.C.R. 362. Mr. Keays was diagnosed with chronic fatigue syndrome
    and was frequently absent from work. Honda grew concerned with the frequency of
    the absences. It ordered Mr. Keays to undergo an examination by a doctor chosen
    by the employer, required him to provide a doctor’s note for any absences, and discouraged
    him from retaining outside counsel. The majority held that in all employment contracts
    there was an implied term of good faith governing the manner of termination. In
    particular, the employer should not engage in conduct that is “unfair or is in bad
    faith by being, for example, untruthful, misleading or unduly insensitive” when
    dismissing an employee: para. 57, citing Wallace v. United Grain Growers Ltd.,
    1997 CanLII 332 (SCC), [1997] 3 S.C.R. 701, at para. 98. Good faith in this context did not extend
    to the employer’s reasons for terminating the contract of employment because this
    would undermine the right of an employer to determine the composition of its workforce:
    Wallace, at para. 76.
    Paragraph #[55]                         
    This Court has also affirmed the duty of good faith
    which requires an insurer to deal with its insured’s claim fairly, both with respect
    to the manner in which it investigates and assesses the claim and to the decision
    whether or not to pay it: Fidler v. Sun Life Assurance Co. of Canada, 2006
    SCC 30, [2006] 2 S.C.R. 3, at para. 63, citing 702535 Ontario Inc. v. Lloyd’s
    London, Non-Marine Underwriters (2000), 2000 CanLII 5684 (ON CA), 184 D.L.R. (4th) 687 (Ont. C.A.), at
    para. 29.  The breach of this duty may support an award of punitive damages: Whiten
    v. Pilot Insurance Co., 2002 SCC 18, [2002] 1 S.C.R. 595. This duty of good
    faith is also reciprocal: the insurer must not act in bad faith when dealing with
    a claim, which is typically made by someone in a vulnerable situation, and the insured
    must act in good faith by disclosing facts material to the insurance policy (para.
    83, citing Andrusiw v. Aetna Life Insurance Co. of Canada (2001), 2001 CanLII 61004 (AB KB), 289 A.R.
    1 (Q.B.), at paras. 84-85, per Murray J.).
    Paragraph #[56]                         
    This Court has also recognized that a duty of good
    faith, in the sense of fair dealing, will generally be implied in fact in the tendering
    context. When a company tenders a contract, it comes under a duty of fairness in
    considering the bids submitted under the tendering process, as a result of the expense
    incurred by parties submitting these bids: Martel Building Ltd. v. Canada,
    2000 SCC 60, [2000] 2 S.C.R. 860, at para. 88; see also M.J.B. Enterprises Ltd.
    v. Defence Construction (1951) Ltd., 1999 CanLII 677 (SCC), [1999] 1 S.C.R. 619; Tercon Contractors
    Ltd. v. British Columbia (Transportation and Highways), 2010 SCC 4, [2010] 1
    S.C.R. 69, at paras. 58-59; A. C. McNeely, Canadian Law of Competitive Bidding
    and Procurement (2010), at pp. 245-54.
    Paragraph #[57]                         
    Developments in the United Kingdom and Australia
    point to enhanced attention to the notion of good faith, mitigated by reluctance
    to embrace it as a stand-alone doctrine. Good faith in contract performance has
    received increasing prominence in English law, despite its “traditional . . . 
    hostility” to the concept: Yam Seng Pte Ltd. v. International Trade Corporation
    Ltd., [2013] EWHC 111, [2013] 1 AII E.R. (Comm.) 1321 (Q.B.), at para. 123,
    citing E. McKendrick, Contract Law (9th ed. 2011), at pp. 221-22; see also
    Chitty on Contracts, at para. 1-039.  In Yam Seng, Leggatt J. held that
    a number of specific duties embodying good faith can be implied based on the presumed
    intentions of the parties according to the traditional approach for implying terms:
    para. 131. Leggatt J. identified a number of these implied duties, including honesty,
    fidelity to the parties’ bargain, cooperation, and fair dealing: paras. 135-50.
    Leggatt J. stated that “[a] paradigm example of a general norm which underlies almost
    all contractual relationships is an expectation of honesty. That expectation is
    essential to commerce, which depends critically on trust”: para. 135; see D. Campbell,
    “Good Faith and the Ubiquity of the ‘Relational’ Contract” (2014), 77 Mod. L.
    Rev. 475. The Court of Appeal considered the Yam Seng decision in Mid
    Essex Hospital Services NHS Trust v. Compass Group UK and Ireland Ltd., [2013]
    EWCA Civ 200 (BAILII), where it confirmed that good faith was not a general principle
    of English law, but that it could be an implied term in certain categories of cases:
    paras. 105 and 150.
    Paragraph #[58]                         
    Australian courts have also moved towards a greater
    role for good faith in contract performance: Cheshire and Fifoot’s Law of Contract
    (9th Australian ed. 2008), at paras. 10.43-10.47. The duty of good faith in its
    modern form was recognized by Priestley J.A. in Renard Constructions (ME) Pty
    Ltd. v. Minister for Public Works (1992), 26 N.S.W.L.R. 234 (C.A.). There is
    no generally applicable duty of good faith, but one will be implied into contracts
    in certain circumstances. The duty of good faith can be implied as a matter of law
    or as a matter of fact, although the cases are not always clear on the basis on
    which the term is being implied. Australian courts have taken a broad view of what
    constitutes good faith: see, e.g., Burger King Corporation v. Hungry Jack’s Pty
    Ltd., [2001] NSWCA 187, 69 N.S.W.L.R. 558. The law of good faith performance
    in Australia is still developing and remains unsettled: E. Peden, “Good faith in
    the performance of contract law” (2004), 42 L.S.J. 64, at p. 64. However,
    it is clear that the duty of good faith requires adherence to standards of honest
    conduct: A. Mason, “Contract, Good Faith and Equitable Standards in Fair Dealing”
    (2000), 116 Law Q. Rev. 66, at p. 76; Burger King, at paras. 171 and
    189.
    Paragraph #[59]                         
    This selective survey supports the view that Canadian
    common law in relation to good faith performance of contracts is piecemeal, unsettled
    and unclear: Belobaba; O’Byrne, “Good Faith in Contractual Performance: Recent
    Developments”, at p. 95; B. J. Reiter, “Good Faith in Contractsˮ (1983), 17
    Val. U.L. Rev. 705, at pp. 711-12. It also shows that in Canada, as well
    as in the United Kingdom and Australia, there is increasing attention to the notion
    of good faith, particularly in the area of contractual performance.  Opponents of
    any general obligation of good faith prefer the traditional, organic development
    of solutions to address particular problems as they arise: see, e.g., M. G. Bridge,
    “Does Anglo-Canadian Contract Law Need a Doctrine of Good Faith?” (1984), 9 Can.
    Bus. L.J. 385; D. Clark, “Some Recent Developments in the Canadian Law of Contracts”
    (1993), 14 Advocates’ Q. 435, at pp. 436 and 440. However, foreclosing some
    incremental development of the law at the level of principle would go beyond what
    prudent caution requires and evidence an almost “perverted pride” — to use Swan’s
    term, at p. 148 — in the law’s failings. 
    Paragraph #[60]                         
    Commercial parties reasonably expect a basic level
    of honesty and good faith in contractual dealings. While they remain at arm’s length
    and are not subject to the duties of a fiduciary, a basic level of honest conduct
    is necessary to the proper functioning of commerce. The growth of longer term, relational
    contracts that depend on an element of trust and cooperation clearly call for a
    basic element of honesty in performance, but, even in transactional exchanges, misleading
    or deceitful conduct will fly in the face of the expectations of the parties: see
    Swan and Adamski, at §1.24. 
    Paragraph #[61]                         
    The fact that commercial parties expect honesty on
    the part of their contracting partners can also be seen from the fact that it was
    the American Bar Association’s Section of Corporation, Banking and Business Law
    that urged the adoption of “honesty in fact” in the original drafting of the Uniform
    Commercial Code (“U.C.C.ˮ): E. A. Farnsworth, “Good Faith Performance and Commercial
    Reasonableness Under the Uniform Commercial Codeˮ (1963), 30 U. Chicago
    L. Rev. 666, at p. 673.  Moreover, empirical research suggests that commercial
    parties do in fact expect that their contracting parties will conduct themselves
    in good faith: see, e.g., S. Macaulay, “Non-contractual Relations in Business: A
    Preliminary Study” (1963), 28 Am. Soc. Rev. 55, at p. 58; H. Beale and T.
    Dugdale, “Contracts Between Businessmen: Planning and the Use of Contractual Remedies”
    (1975), 2 Brit. J. Law & Soc. 45, at pp. 47-48; S. Macaulay, “An Empirical
    View of Contract”, [1985] Wis. L. Rev. 465; V. Goldwasser and T. Ciro, “Standards
    of Behaviour in Commercial Contracting” (2002), 30 A.B.L.R. 369, at pp. 372-77. 
    It is, to say the least, counterintuitive to think that reasonable commercial parties
    would accept a contract which contained a provision to the effect that they were
    not obliged to act honestly in performing their contractual obligations.
    Paragraph #[62]                         
    I conclude from this review that enunciating a general
    organizing principle of good faith and recognizing a duty to perform contracts honestly
    will help bring certainty and coherence to this area of the law in a way that is
    consistent with reasonable commercial expectations.
    Paragraph #[63]                         
    The first step is to recognize that there is an organizing
    principle of good faith that underlies and manifests itself in various more specific
    doctrines governing contractual performance. That organizing principle is simply
    that parties generally must perform their contractual duties honestly and reasonably
    and not capriciously or arbitrarily. 
    Paragraph #[64]                         
    As the Court has recognized, an organizing principle
    states in general terms a requirement of justice from which more specific legal
    doctrines may be derived. An organizing principle therefore is not a free-standing
    rule, but rather a standard that underpins and is manifested in more specific legal
    doctrines and may be given different weight in different situations: see, e.g.,
    R. v. Jones, 1994 CanLII 85 (SCC), [1994] 2 S.C.R. 229, at p. 249; R. v. Hart, 2014 SCC
    52, [2014] 2 S.C.R. 544, at para. 124; R. M. Dworkin, “Is Law a System of Rules?”,
    in R. M. Dworkin, ed., The Philosophy of Law (1977), 38, at p. 47. It is
    a standard that helps to understand and develop the law in a coherent and principled
    way. 
    Paragraph #[65]                         
    The organizing principle of good faith exemplifies
    the notion that, in carrying out his or her own performance of the contract, a contracting
    party should have appropriate regard to the legitimate contractual interests of
    the contracting partner. While “appropriate regard” for the other party’s interests
    will vary depending on the context of the contractual relationship, it does not
    require acting to serve those interests in all cases. It merely requires that a
    party not seek to undermine those interests in bad faith. This general principle
    has strong conceptual differences from the much higher obligations of a fiduciary. 
    Unlike fiduciary duties, good faith performance does not engage duties of loyalty
    to the other contracting party or a duty to put the interests of the other contracting
    party first.
    Paragraph #[66]                         
    This organizing principle of good faith manifests
    itself through the existing doctrines about the types of situations and relationships
    in which the law requires, in certain respects, honest, candid, forthright or reasonable
    contractual performance. Generally, claims of good faith will not succeed if they
    do not fall within these existing doctrines. But we should also recognize that this
    list is not closed. The application of the organizing principle of good faith to
    particular situations should be developed where the existing law is found to be
    wanting and where the development may occur incrementally in a way that is consistent
    with the structure of the common law of contract and gives due weight to the importance
    of private ordering and certainty in commercial affairs. 
    Paragraph #[67]                         
    This approach is consistent with that taken in the
    case of unjust enrichment.  McLachlin J. outlined the approach in Peel (Regional
    Municipality) v. Canada, 1992 CanLII 21 (SCC), [1992] 3 S.C.R. 762, at pp. 786 and 788:
    Paragraph #[68]                         
    The flexible approach that was taken in Peel
    recognizes that “[a]t the heart of the doctrine of unjust enrichment, whether expressed
    in terms of the traditional categories of recovery or general principle, lies the
    notion of restoration of a benefit which justice does not permit one to retain”:
    p. 788.  In that case, this Court further developed the law through application
    of an organizing principle without displacing the existing specific doctrines. 
    This is what I propose to do with regards to the organizing principle of good faith.
    Paragraph #[69]                         
    The approach of recognizing an overarching organizing
    principle but accepting the existing law as the primary guide to future development
    is appropriate in the development of the doctrine of good faith. Good faith may
    be invoked in widely varying contexts and this calls for a highly context-specific
    understanding of what honesty and reasonableness in performance require so as to
    give appropriate consideration to the legitimate interests of both contracting parties.
    For example, the general organizing principle of good faith would likely have different
    implications in the context of a long-term contract of mutual cooperation than it
    would in a more transactional exchange: Swan and Adamski, at § 1.24; B. Dixon, “Common
    law obligations of good faith in Australian commercial contracts — a relational
    recipe” (2005), 33 A.B.L.R. 87. 
    Paragraph #[70]                         
    The principle of good faith must be applied in a
    manner that is consistent with the fundamental commitments of the common law of
    contract which generally places great weight on the freedom of contracting parties
    to pursue their individual self-interest. In commerce, a party may sometimes cause
    loss to another — even intentionally — in the legitimate pursuit of economic self-interest:
    A.I. Enterprises Ltd. v. Bram Enterprises Ltd., 2014 SCC 12, [2014] 1 S.C.R.
    177, at para. 31. Doing so is not necessarily contrary to good faith and in some
    cases has actually been encouraged by the courts on the basis of economic efficiency:
    Bank of America Canada v. Mutual Trust Co., 2002 SCC 43, [2002] 2 S.C.R.
    601, at para. 31. The development of the principle of good faith must be clear not
    to veer into a form of ad hoc judicial moralism or “palm treeˮ justice.
    In particular, the organizing principle of good faith should not be used as a pretext
    for scrutinizing the motives of contracting parties.  
    Paragraph #[71]                         
    Tying the organizing principle to the existing law
    mitigates the concern that any general notion of good faith in contract law will
    undermine certainty in commercial contracts. In my view, this approach strikes the
    correct balance between predictability and flexibility.
    Paragraph #[72]                         
    In my view, the objection to Can-Am’s conduct in
    this case does not fit within any of the existing situations or relationships in
    which duties of good faith have been found to exist. The relationship between Can-Am
    and Mr. Bhasin was not an employment or franchise relationship. Classifying the
    decision not to renew the contract as a contractual discretion would constitute
    a significant expansion of the decided cases under that type of situation. After
    all, a party almost always has some amount of discretion in how to perform a contract.
    It would also be difficult to say that a duty of good faith should be implied in
    this case on the basis of the intentions of the parties given the clear terms of
    an entire agreement clause in the Agreement. The key question before the Court,
    therefore, is whether we ought to create a new common law duty under the broad umbrella
    of the organizing principle of good faith performance of contracts. 
    Paragraph #[73]                         
    In my view, we should. I would hold that there is
    a general duty of honesty in contractual performance. This means simply that parties
    must not lie or otherwise knowingly mislead each other about matters directly linked
    to the performance of the contract. This does not impose a duty of loyalty or of
    disclosure or require a party to forego advantages flowing from the contract; it
    is a simple requirement not to lie or mislead the other party about one’s contractual
    performance. Recognizing a duty of honest performance flowing directly from the
    common law organizing principle of good faith is a modest, incremental step. The
    requirement to act honestly is one of the most widely recognized aspects of the
    organizing principle of good faith: see Swan and Adamski, at § 8.135; O’Byrne, “Good
    Faith in Contractual Performance: Recent Developments”, at p. 78; Belobaba; Greenberg
    v. Meffert (1985), 1985 CanLII 1975 (ON CA), 50 O.R. (2d) 755 (C.A.), at p. 764; Gateway Realty,
    at para. 38, per Kelly J.; Shelanu Inc. v. Print Three Franchising Corp.
    (2003), 2003 CanLII 52151 (ON CA), 64 O.R. (3d) 533 (C.A.), at para. 69. For example, the duty of honesty was
    a key component of the good faith requirements which have been recognized in relation
    to termination of employment contracts: Wallace, at para. 98; Honda Canada,
    at para. 58. 
    Paragraph #[74]                         
    There is a longstanding debate about whether the
    duty of good faith arises as a term implied as a matter of fact or a term implied
    by law: see Mesa Operating, at paras. 15-19. I do not have to resolve this
    debate fully, which, as I reviewed earlier, casts a shadow of uncertainty over a
    good deal of the jurisprudence.  I am at this point concerned only with a new duty
    of honest performance and, as I see it, this should not be thought of as an implied
    term, but a general doctrine of contract law that imposes as a contractual duty
    a minimum standard of honest contractual performance. It operates irrespective of
    the intentions of the parties, and is to this extent analogous to equitable doctrines
    which impose limits on the freedom of contract, such as the doctrine of unconscionability.
    Paragraph #[75]                         
    Viewed in this way, the entire agreement clause in
    cl. 11.2 of the Agreement is not an impediment to the duty arising in this case.
    Because the duty of honesty in contractual performance is a general doctrine of
    contract law that applies to all contracts, like unconscionability, the parties
    are not free to exclude it: see CivicLife.com, at para. 52. 
    Paragraph #[76]                         
    It is true that the Anglo-Canadian common law of
    contract has been reluctant to impose mandatory rules not based on the agreement
    of the parties, because they are thought to interfere with freedom of contract:
    see Gateway Realty, per Kelly J.; O’Byrne, “Good Faith in Contractual
    Performance: Recent Developments”, at p. 95; Farnsworth, at pp. 677-78. As discussed
    above, however, the duty of honest performance interferes very little with freedom
    of contract, since parties will rarely expect that their contracts permit dishonest
    performance of their obligations.
    Paragraph #[77]                         
    That said, I would not rule out any role for the
    agreement of the parties in influencing the scope of honest performance in a particular
    context. The precise content of honest performance will vary with context and the
    parties should be free in some contexts to relax the requirements of the doctrine
    so long as they respect its minimum core requirements. The approach I outline here
    is similar in principle to that in § 1-302(b) of the U.C.C. (2012):
    Paragraph #[78]                         
    Certainly, any modification of the duty of honest
    performance would need to be in express terms. A generically worded entire agreement
    clause such as cl. 11.2 of the Agreement does not indicate any intention of the
    parties to depart from the basic tenets of honest performance: see GEC Marconi
    Systems Pty Ltd. v. BHP Information Technology Pty Ltd., [2003] FCA 50 (AustLII),
    at para. 922, per Finn J.; see also O’Byrne, “Good Faith in Contractual Performance:
    Recent Developments”, at p. 96.
    Paragraph #[79]                         
    Two arguments are typically raised against an increased
    role for a duty of good faith in the law of contract: see Bridge; Clark;
    and Peden, “When Common Law Trumps Equity: the Rise of Good Faith and
    Reasonableness and the Demise of Unconscionability”. The first is that “good faith”
    is an inherently unclear concept that will permit ad hoc judicial moralism
    to undermine the certainty of commercial transactions. The second is that imposing
    a duty of good faith is inconsistent with the basic principle of freedom of contract. 
    I do not have to decide here whether or not these points are valid in relation to
    a broad, generalized duty of good faith. However, they carry no weight in relation
    to adopting a rule of honest performance.
    Paragraph #[80]                         
    Recognizing a duty of honesty in contract performance
    poses no risk to commercial certainty in the law of contract. A reasonable commercial
    person would expect, at least, that the other party to a contract would not be dishonest
    about his or her performance. The duty is also clear and easy to apply. Moreover,
    one commentator points out that given the uncertainty that has prevailed in this
    area, cautious solicitors have long advised clients to take account of the requirements
    of good faith: W. Grover, “A Solicitor Looks at Good Faith in Commercial Transactions”,
    in Special Lectures of the Law Society of Upper Canada 1985 —  Commercial
    Law: Recent Developments and Emerging Trends (1985), 93, at pp. 106-7. A rule
    of honest performance in my view will promote, not detract from, certainty in commercial
    dealings.
    Paragraph #[81]                         
    Any interference by the duty of honest performance
    with freedom of contract is more theoretical than real. It will surely be rare that
    parties would wish to agree that they may be dishonest with each other in performing
    their contractual obligations. 
    Paragraph #[82]                         
    Those who fear that this modest step would create
    uncertainty or impede freedom of contract may take comfort from experience of the
    civil law of Quebec and the common and statute law of many jurisdictions in the
    United States. 
    Paragraph #[83]                         
    The Civil Code of Québec recognizes a broad
    duty of good faith which extends to the formation, performance and termination of
    a contract and includes the notion of the abuse of contractual rights: see arts.
    6, 7 and 1375. While this is not the place to expound in detail on good faith in
    the Quebec civil law, it is worth noting that good faith is seen as having two main
    aspects. The first is the subjective aspect, which is concerned with the state of
    mind of the actor, and addresses conduct that is, for example, malicious or intentional.
    The second is the objective aspect which is concerned with whether conduct is unacceptable
    according to the standards of reasonable people.  As J.-L. Baudouin and P.-G. Jobin
    explain, [translation] “a person can
    be in good faith (in the subjective sense), that is, act without malicious intent
    or without knowledge of certain facts, yet his or her conduct may nevertheless be
    contrary to the requirements of good faith in that it violates objective standards
    of conduct that are generally accepted in society”: Les obligations (7th
    ed. 2013), by P.-G. Jobin and N. Vézina, at para. 132. The notion of good faith
    includes (but is not limited to) the requirement of honesty in performing the contract:
    ibid., at para. 161; Bank of Montreal v. Kuet Leong Ng, 1989 CanLII 30 (SCC), [1989] 2 S.C.R.
    429, at p. 436.
    Paragraph #[84]                         
    In the United States, § 1-304 of the U.C.C. provides
    that “[e]very contract or duty within the Uniform Commercial Code imposes an obligation
    of good faith in its performance and enforcement.” The U.C.C. has been enacted
    by legislation in all 50 states. While the provisions of the U.C.C. apply only to
    commercial contracts, § 205 of the Restatement (Second) of Contracts (1981)
    provides for a general duty of good faith in all contracts. This provision of the
    Restatement has been followed by courts in the vast majority of states. The
    notion of “good faith” in the Restatement substantially followed the definition
    proposed by Robert Summers in an influential article, where he proposed that “good
    faith” is best understood as an “excluder” of various categories of bad faith conduct:
    p. 206; see § 205, comment a. The general definition of “good faith” in the U.C.C.
    is also quite broad, encompassing honesty and adherence to “reasonable commercial
    standards”: § 1-201(b)(20). This definition was originally limited to “honesty in
    fact”, that is, a duty of honesty in performance, and was only later expanded: A.
    D. Miller and R. Perry, “Good Faith Performance” (2013), 98 Iowa L. Rev.
    689, at pp. 719-20. Honesty in performance is also a key component of “good faithˮ
    under the Restatement:  § 205, comments a and d.  
    Paragraph #[85]                         
    Experience in Quebec and the United States shows
    that even very broad conceptions of the duty of good faith have not impeded contractual
    activity or contractual stability: see, e.g., J. Pineau, “La discrétion judiciaire
    a-t-elle fait des ravages en matière contractuelle?”, in La réforme du Code civil,
    cinq ans plus tard (1998), 141. It is also worth noting that in both
    the United States and Quebec, judicial developments preceded legislative action
    in codifying good faith. In the United States, courts had recognized
    the existence of a general duty of good faith before the promulgation of the
    U.C.C.: see, e.g., Kirke La Shelle Co. v. Armstrong Co., 263 N.Y. 79
    (1933). Similarly, though there was no express provision of “good faith” in the
    Civil Code of Lower Canada, the Court implied such a general duty from more
    specific provisions of the Code: see National Bank of Canada v. Soucisse,
    1981 CanLII 31 (SCC), [1981] 2 S.C.R. 339; Houle v. Canadian National Bank, 1990 CanLII 58 (SCC), [1990] 3 S.C.R. 122;
    Bank of Montreal v. Bail Ltée, 1992 CanLII 71 (SCC), [1992] 2 S.C.R. 554.  The duty of good faith
    was subsequently included in the revisions leading to the enactment of the
    Civil Code of Québec. 
    Paragraph #[86]                         
    The duty of honest performance that I propose should
    not be confused with a duty of disclosure or of fiduciary loyalty.  A party to a
    contract has no general duty to subordinate his or her interest to that of the other
    party. However, contracting parties must be able to rely on a minimum standard of
    honesty from their contracting partner in relation to performing the contract as
    a reassurance that if the contract does not work out, they will have a fair opportunity
    to protect their interests. That said, a dealership agreement is not a contract
    of utmost good faith (uberrimae fidei) such as an insurance contract, which
    among other things obliges the parties to disclose material facts: Whiten. 
    But a clear distinction can be drawn between a failure to disclose a material fact,
    even a firm intention to end the contractual arrangement, and active dishonesty.
    Paragraph #[87]                         
    This distinction explains the result reached by the
    court in United Roasters, Inc. v. Colgate-Palmolive Co., 649 F.2d 985 (4th
    Cir. 1981). The terminating party had decided in advance of the required notice
    period that it was going to terminate the contract. The court held that no disclosure
    of this intention was required other than what was stipulated in the notice requirement.
    The court stated:
    Paragraph #[88]                         
    The duty of honest performance has similarities with
    the existing law in relation to civil fraud and estoppel, but it is not subsumed
    by them. Unlike promissory estoppel and estoppel by representation, the contractual
    duty of honest performance does not require that the defendant intend that his or
    her representation be relied on and it is not subject to the uncertainty around
    whether estoppel can be used to found an independent cause of action: Ryan v.
    Moore, 2005 SCC 38, [2005] 2 S.C.R. 53, at para. 5; Maracle v. Travellers
    Indemnity Co. of Canada, 1991 CanLII 58 (SCC), [1991] 2 S.C.R. 50; Waddams, The Law of Contracts,
    at paras. 195-203; B. MacDougall, Estoppel (2012), at pp. 142-44.  As for
    the tort of civil fraud, breach of the duty of honest contractual performance does
    not require the defendant to intend that the false statement be relied on, and breach
    of it supports a claim for damages according to the contractual rather than the
    tortious measure: see, e.g., Parna v. G. & S. Properties Ltd., 1970 CanLII 25 (SCC), [1971]
    S.C.R. 306, cited with approval in Bruno Appliance and Furniture, Inc. v. Hryniak,
    2014 SCC 8, [2014] 1 S.C.R. 126, at para. 19. 
    Paragraph #[89]                         
    Mr. Bhasin, supported by many judicial and academic
    authorities, has argued for wholesale adoption of a more expansive duty of good
    faith in contrast to the modest, incremental change that I propose: A.F., at para.
    51; Summers, at p. 206; Belobaba; Gateway Realty. In many of its manifestations,
    good faith requires more than honesty on the part of a contracting party. For example,
    in Dynamic Transport, this Court held that good faith in the context of that
    contract required a party to take reasonable steps to obtain the planning permission
    that was a condition precedent to a sale of property. In other cases, the courts
    have required that discretionary powers not be exercised in a manner that is “capricious”
    or “arbitrary”: Mason, at p. 487; LeMesurier v. Andrus (1986), 1986 CanLII 2623 (ON CA), 54
    O.R. (2d) 1 (C.A.), at p. 7. In other contexts, this Court has been reluctant to
    extend the requirements of good faith beyond honesty for fear of causing undue judicial
    interference in contracts: Wallace, at para. 76. 
    Paragraph #[90]                         
    It is not necessary in this case to define in general
    terms the limits of the implications of the organizing principle of good faith. 
    This is because it is unclear to me how any broader duty would assist Mr. Bhasin
    here. After all, the contract was subject to non-renewal. It is a considerable stretch,
    as I see it, to turn even a broadly conceived duty of good faith exercise of the
    non-renewal provision into what is, in effect, a contract of indefinite duration. 
    This in my view is the principal difficulty in the trial judge’s reasoning because,
    in the result, her decision turned a three year contract that was subject to an
    express provision relating to non-renewal into a contract of roughly nine years’
    duration. As the Court of Appeal pointed out, in my view correctly, “[t]he parties
    did not intend or presume a perpetual contract, as they contracted that either party
    could unilaterally cause it to expire on any third anniversary”: para. 32.  Even
    if there were a breach of a broader duty of good faith by forcing the merger, Can-Am’s
    contractual liability would still have to be measured by reference to the least
    onerous means of performance, which in this case would have meant simply not renewing
    the contract. Since no damages flow from this breach, it is unnecessary to decide
    whether reliance on a discretionary power to achieve a purpose extraneous to the
    contract and which undermined one of its key objectives might call for further development
    under the organizing principle of good faith contractual performance. 
    Paragraph #[91]                         
    I note as well that, even in jurisdictions that embrace
    a broader role for the duty of good faith, plaintiffs have met with only mixed success
    in alleging bad faith failure to renew a contract. Some cases have treated non-renewal
    as equivalent to termination and thus subject to a duty of good faith: Shell
    Oil Co. v. Marinello, 294 A.2d 253 (N.J. Super. Ct. 1972), aff’d 307 A.2d 598
    (N.J. 1973); Atlantic Richfield Co. v. Razumic, 390 A.2d 736 (Pa. 1978),
    at pp. 741-42. Other courts have seen non-renewal as fundamentally different, especially
    where the express terms of the contract contemplate the expiry of contractual obligations
    and leave no room for any sort of duty to renew: J.H. Westerbeke Corp. v. Onan
    Corp., 580 F.Supp. 1173 (D. Mass. 1984), at p. 1184; Pitney-Bowes, Inc. v.
    Mestre, 517 F.Supp. 52 (S.D. Fla. 1981), cert. denied, 464 U.S. 893 (1983).
    
    Paragraph #[92]                         
    I conclude that at this point in the development
    of Canadian common law, adding a general duty of honest contractual performance
    is an appropriate incremental step, recognizing that the implications of the broader,
    organizing principle of good faith must be allowed to evolve according to the same
    incremental judicial approach.  
    Paragraph #[93]                         
    A summary of the principles is in order:
    Paragraph #[94]                         
    The trial judge made a clear finding of fact that
    Can-Am “acted dishonestly toward Bhasin in exercising the non-renewal clause”: para.
    261; see also para. 271. There is no basis to interfere with that finding on appeal.
    It follows that Can-Am breached its duty to perform the Agreement honestly.
    Paragraph #[95]                         
    The immediate dispute in this case centred on the
    non-renewal clause contained in cl. 3.3 of the 1998 Agreement which Mr. Bhasin entered
    into in November 1998. It provided that the Agreement was for a three-year term
    and would be automatically renewed unless one of the parties gave notice to the
    contrary at least six months before the end of the initial or any renewed term:
    Paragraph #[96]                         
    The factual matrix in which the judge made her finding
    of dishonest performance is complicated and I will only outline it in very broad
    terms in order to put that finding in context.  There were two main interrelated
    story lines. 
    Paragraph #[97]                         
    The first concerns Mr. Hrynew’s persistent attempts
    to take over Mr. Bhasin’s market through a merger — in effect a takeover by him
    of Mr. Bhasin’s agency. The second concerns the difficulties, beginning in early
    April 1999, that Can-Am was having with the Alberta Securities Commission, which
    regulated its business and its enrollment directors in Alberta. The Commission insisted
    that Can-Am appoint a full-time employee to be a PTO responsible for compliance
    with Alberta securities law.  Can-Am ultimately appointed Mr. Hrynew, with the result
    that he would audit his competitor agencies, including Mr. Bhasin’s, and therefore
    have access to their confidential business information.  Mr. Bhasin’s refusal to
    allow Mr. Hrynew access to this information led to the final confrontation with
    Can-Am and its giving notice of non-renewal in May 2001. Can-Am, for its part, wanted
    to force a merger of the Bhasin agency under the Hrynew agency, effectively giving
    Mr. Bhasin’s business to Mr. Hrynew. It was in the context of this situation that
    the trial judge made her findings of dishonesty on the part of Can-Am.
    Paragraph #[98]                         
    The trial judge concluded that Can-Am acted dishonestly
    with Mr. Bhasin throughout the period leading up to its exercise of the non-renewal
    clause, both with respect to its own intentions and with respect to Mr. Hrynew’s
    role as PTO. Her detailed findings amply support this overall conclusion. 
    Paragraph #[99]                         
    By early 2000, Can-Am was considering a significant
    reorganization of its activities in Alberta; by June of that year, it sent an organizational
    chart to the Commission showing that Mr. Bhasin’s agency was to be merged under
    Mr. Hrynew’s.  But it had said nothing of this to Mr. Bhasin: trial reasons, at
    paras. 167-68. The trial judge found that these representations made by Can-Am to
    the Commission were clearly false if, as she concluded, they intended to refer to
    Mr. Bhasin: para. 246. She also found that Can-Am, by June 2000, was fearful that
    the Commission was going to pull its licence in Alberta and that it was prepared
    to do whatever it could to forestall that possibility.  “However, it was not dealing
    honestly with [Mr.] Bhasin about the realities of the situation as [it] saw them”:
    para. 246.
    Paragraph #[100]                     
    In August 2000, Mr. Bhasin first heard of Can-Am’s
    merger plans for him during a meeting with Can-Am’s regional vice-president. But
    when questioned about Can-Am’s intentions with respect to the merger, the official
    “equivocated” and did not tell him the truth that from Can-Am’s perspective this
    was a “done deal”.  The trial judge concluded that the official was “not honest
    with [Mr.] Bhasin” at that meeting: para. 247.
    Paragraph #[101]                     
    When Mr. Bhasin complained about Mr. Hrynew’s conflict
    of interest in being both auditor and competitor, Can-Am in effect blamed the Commission,
    claiming that the Commission had rejected its proposal to appoint a third party
    PTO. This was not truthful. Can-Am failed to mention that it had proposed to appoint
    a non-resident of Alberta who was clearly not qualified according to the Commission’s
    criteria or that it had decided to appoint Mr. Hrynew even though he did not meet
    the Commission’s criteria either: trial reasons, at paras. 195 and 221. It also
    misrepresented — repeatedly — to Mr. Bhasin that Mr. Hrynew was bound by duties
    of confidentiality and segregation of activities in the course of an audit, when
    in fact there was no such requirement. Can-Am did not even finalize its PTO contract
    with Mr. Hrynew until March 2001 and, notwithstanding its assurances to Mr. Bhasin,
    it failed to include such a provision in the contract: paras. 190-221. As the trial
    judge found, Can-Am “could not possibly have missed this honestly in the PTO agreement,
    given that [Mr. Bhasin’s] very protests about [Mr.] Hrynew’s appointment as PTO
    were about confidentiality and segregation of activities”: para. 221.  The judge
    also found that Can-Am repeated these “lies” about Mr. Hrynew’s supposed obligations
    of confidentiality even after the PTO agreement, without these protections, had
    been signed: para. 204.  
    Paragraph #[102]                     
    Can-Am pushed on with the requirement that Mr. Hrynew
    audit Mr. Bhasin’s agency as if it were required to do so by the Commission even
    though it had arranged to have one of its employees conduct the audit of Mr. Hrynew’s
    agency: trial reasons, at para. 198. 
    Paragraph #[103]                     
    As the trial judge found, this dishonesty on the
    part of Can-Am was directly and intimately connected to Can-Am’s performance of
    the Agreement with Mr. Bhasin and its exercise of the non-renewal provision. I conclude
    that Can-Am breached the 1998 Agreement when it failed to act honestly with Mr.
    Bhasin in exercising the non-renewal clause.
    Paragraph #[104]                     
    In light of this conclusion, I agree with the Court
    of Appeal’s rejection of Mr. Bhasin’s claims based on the torts of inducing breach
    of contract and unlawful means conspiracy. 
    Paragraph #[105]                     
    The trial judge specifically found that Mr. Hrynew
    did not encourage Can-Am to act dishonestly in its dealings with Mr. Bhasin and
    that Can-Am’s dishonest conduct was not fairly attributable to Mr. Hrynew: paras.
    271 and 287.  It follows that Mr. Hrynew did not induce Can-Am’s breach of its contractual
    duty of honest performance. 
    Paragraph #[106]                     
    The trial judge dismissed the claim for conspiracy
    to injure and there is no basis to interfere with that finding. However, the trial
    judge held the respondents liable for unlawful means conspiracy, with the unlawful
    means being the breach of contract and inducing breach of contract: para. 326. Because,
    in light of my conclusions, the only relevant breach of contract in this case is
    the breach of the duty of honest performance and there was no inducement of breach
    of contract, the only relevant unlawful means pertained to Can-Am alone and not
    Mr. Hrynew. Accordingly, there can be no liability for civil conspiracy: see Agribrands
    Purina Canada Inc. v. Kasamekas, 2011 ONCA 460, 106 O.R. (3d) 427, at para.
    43.
    Paragraph #[107]                     
    I therefore agree with the result reached by the
    Court of Appeal that there could be no liability for inducing breach of contract
    or unlawful means conspiracy: para. 36. It follows that the claims against Mr. Hrynew
    were rightly dismissed.
    Paragraph #[108]                     
    I have concluded that Can-Am’s breach of contract
    consisted of its failure to be honest with Mr. Bhasin about its contractual performance
    and, in particular, with respect to its settled intentions with respect to renewal.
    It is therefore liable for damages calculated on the basis of what Mr. Bhasin’s
    economic position would have been had Can-Am fulfilled that duty. While the trial
    judge did not assess damages on that basis given her different findings in relation
    to liability, she made findings that permit this Court to do so.  
    Paragraph #[109]                     
    The trial judge specifically held that but for Can-Am’s
    dishonesty, Mr. Bhasin could have acted so as to “retain the value in his agency”:
    paras. 258-59. In reaching this conclusion, the trial judge was well aware of the
    difficulties that Mr. Bhasin would have in selling his business given the “almost
    absolute controls” that Can-Am had on enrollment directors and that it owned the
    “book of business”: para. 402.  She also heard evidence and made findings about
    what the value of the business was, taking these limitations into account.  These
    findings, in my view, permit us to assess damages on the basis that if Can-Am had
    performed the contract honestly, Mr. Bhasin would have been able to retain the value
    of his business rather than see it, in effect, expropriated and turned over to Mr.
    Hrynew.
    Paragraph #[110]                     
    It is clear from the findings of the trial judge
    and from the record that the value of the business around the time of non-renewal
    was $87,000. The defendants’ expert at trial valued Mr. Bhasin’s business as of
    2001 (the time of non-renewal) as approximately $87,000. While there is some confusion
    in the record about the date of evaluation and the relevance of discount rates,
    I am persuaded that the trial judge found that the business was worth $87,000 at
    the time that the Agreement expired and that she made this finding fully alive to
    the difficulties standing in the way of a sale of the business given the contractual
    arrangements between Can-Am and its enrollment directors: see, e.g., para. 451. 
    In addition, we have had no suggestion in argument that this figure should be reassessed.
    In fact, the defendants, as appellants before the Court of Appeal, submitted to
    that court that if damages were payable, they should be assessed at the value of
    the business at the time of the expiry of the Agreement and noted that the trial
    judge had accepted the evidence of their expert witness, Mr. Bailey, that the value
    was $87,000.  
    Paragraph #[111]                     
    I conclude therefore that Mr. Bhasin is entitled
    to damages in the amount of $87,000.
    Paragraph #[112]                     
    I would allow the appeal with respect to Can-Am and
    dismiss the appeal with respect to Mr. Hrynew.  I would vary the trial judge’s assessment
    of damages to $87,000 plus interest. Mr. Bhasin should have his costs throughout
    as against Can-Am.  There should be no costs at any level in favour of or against
    Mr. Hrynew.
    



```python
# @title Table of Citations
from google.colab import data_table
data_table.enable_dataframe_formatter()
citations["hyperlink"] = "https://www.canlii.org" + citations["link"]
display(citations)
```



  <div id="df-37efd990-48ab-4b3d-ae05-352c0d032314" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>paragraph</th>
      <th>citation</th>
      <th>link</th>
      <th>hyperlink</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3</td>
      <td>2011 ABQB 637</td>
      <td>/en/ab/abqb/doc/2011/2011abqb637/2011abqb637.html</td>
      <td>https://www.canlii.org/en/ab/abqb/doc/2011/201...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>16</td>
      <td>2013 ABCA 98</td>
      <td>/en/ab/abca/doc/2013/2013abca98/2013abca98.html</td>
      <td>https://www.canlii.org/en/ab/abca/doc/2013/201...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>38</td>
      <td>1991 CanLII 2707 (NS SC)</td>
      <td>/en/ns/nssc/doc/1991/1991canlii2707/1991canlii...</td>
      <td>https://www.canlii.org/en/ns/nssc/doc/1991/199...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>38</td>
      <td>1992 NSCA 70 (CanLII)</td>
      <td>/en/ns/nsca/doc/1992/1992canlii2620/1992canlii...</td>
      <td>https://www.canlii.org/en/ns/nsca/doc/1992/199...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>38</td>
      <td>1997 CanLII 2368 (BC CA)</td>
      <td>/en/bc/bcca/doc/1997/1997canlii2368/1997canlii...</td>
      <td>https://www.canlii.org/en/bc/bcca/doc/1997/199...</td>
    </tr>
    <tr>
      <th>5</th>
      <td>38</td>
      <td>1997 CanLII 9539 (NB CA)</td>
      <td>/en/nb/nbca/doc/1997/1997canlii9539/1997canlii...</td>
      <td>https://www.canlii.org/en/nb/nbca/doc/1997/199...</td>
    </tr>
    <tr>
      <th>6</th>
      <td>39</td>
      <td>2003 CanLII 9923 (ON CA)</td>
      <td>/en/on/onca/doc/2003/2003canlii9923/2003canlii...</td>
      <td>https://www.canlii.org/en/on/onca/doc/2003/200...</td>
    </tr>
    <tr>
      <th>7</th>
      <td>39</td>
      <td>1994 ABCA 94 (CanLII)</td>
      <td>/en/ab/abca/doc/1994/1994abca94/1994abca94.html</td>
      <td>https://www.canlii.org/en/ab/abca/doc/1994/199...</td>
    </tr>
    <tr>
      <th>8</th>
      <td>39</td>
      <td>2013\nONCA 494</td>
      <td>/en/on/onca/doc/2013/2013onca494/2013onca494.html</td>
      <td>https://www.canlii.org/en/on/onca/doc/2013/201...</td>
    </tr>
    <tr>
      <th>9</th>
      <td>40</td>
      <td>1991 CanLII 17 (SCC)</td>
      <td>/en/ca/scc/doc/1991/1991canlii17/1991canlii17....</td>
      <td>https://www.canlii.org/en/ca/scc/doc/1991/1991...</td>
    </tr>
    <tr>
      <th>10</th>
      <td>40</td>
      <td>1997 CanLII 307 (SCC)</td>
      <td>/en/ca/scc/doc/1997/1997canlii307/1997canlii30...</td>
      <td>https://www.canlii.org/en/ca/scc/doc/1997/1997...</td>
    </tr>
    <tr>
      <th>11</th>
      <td>40</td>
      <td>1989 CanLII 36 (SCC)</td>
      <td>/en/ca/scc/doc/1989/1989canlii36/1989canlii36....</td>
      <td>https://www.canlii.org/en/ca/scc/doc/1989/1989...</td>
    </tr>
    <tr>
      <th>12</th>
      <td>40</td>
      <td>1995 CanLII 59 (SCC)</td>
      <td>/en/ca/scc/doc/1995/1995canlii59/1995canlii59....</td>
      <td>https://www.canlii.org/en/ca/scc/doc/1995/1995...</td>
    </tr>
    <tr>
      <th>13</th>
      <td>40</td>
      <td>2002 SCC 8</td>
      <td>/en/ca/scc/doc/2002/2002scc8/2002scc8.html</td>
      <td>https://www.canlii.org/en/ca/scc/doc/2002/2002...</td>
    </tr>
    <tr>
      <th>14</th>
      <td>40</td>
      <td>2005 SCC 49</td>
      <td>/en/ca/scc/doc/2005/2005scc49/2005scc49.html</td>
      <td>https://www.canlii.org/en/ca/scc/doc/2005/2005...</td>
    </tr>
    <tr>
      <th>15</th>
      <td>40</td>
      <td>2009 SCC 61</td>
      <td>/en/ca/scc/doc/2009/2009scc61/2009scc61.html</td>
      <td>https://www.canlii.org/en/ca/scc/doc/2009/2009...</td>
    </tr>
    <tr>
      <th>16</th>
      <td>44</td>
      <td>1992 CanLII 41 (SCC)</td>
      <td>/en/ca/scc/doc/1992/1992canlii41/1992canlii41....</td>
      <td>https://www.canlii.org/en/ca/scc/doc/1992/1992...</td>
    </tr>
    <tr>
      <th>17</th>
      <td>44</td>
      <td>1992 CanLII 102 (SCC)</td>
      <td>/en/ca/scc/doc/1992/1992canlii102/1992canlii10...</td>
      <td>https://www.canlii.org/en/ca/scc/doc/1992/1992...</td>
    </tr>
    <tr>
      <th>18</th>
      <td>47</td>
      <td>2006 CanLII 20837 (ON CA)</td>
      <td>/en/on/onca/doc/2006/2006canlii20837/2006canli...</td>
      <td>https://www.canlii.org/en/on/onca/doc/2006/200...</td>
    </tr>
    <tr>
      <th>19</th>
      <td>49</td>
      <td>1978 CanLII 215 (SCC)</td>
      <td>/en/ca/scc/doc/1978/1978canlii215/1978canlii21...</td>
      <td>https://www.canlii.org/en/ca/scc/doc/1978/1978...</td>
    </tr>
    <tr>
      <th>20</th>
      <td>50</td>
      <td>1995 CanLII 87 (SCC)</td>
      <td>/en/ca/scc/doc/1995/1995canlii87/1995canlii87....</td>
      <td>https://www.canlii.org/en/ca/scc/doc/1995/1995...</td>
    </tr>
    <tr>
      <th>21</th>
      <td>51</td>
      <td>1958 CanLII 7 (SCC)</td>
      <td>/en/ca/scc/doc/1958/1958canlii7/1958canlii7.html</td>
      <td>https://www.canlii.org/en/ca/scc/doc/1958/1958...</td>
    </tr>
    <tr>
      <th>22</th>
      <td>54</td>
      <td>2008 SCC 39</td>
      <td>/en/ca/scc/doc/2008/2008scc39/2008scc39.html</td>
      <td>https://www.canlii.org/en/ca/scc/doc/2008/2008...</td>
    </tr>
    <tr>
      <th>23</th>
      <td>54</td>
      <td>1997 CanLII 332 (SCC)</td>
      <td>/en/ca/scc/doc/1997/1997canlii332/1997canlii33...</td>
      <td>https://www.canlii.org/en/ca/scc/doc/1997/1997...</td>
    </tr>
    <tr>
      <th>24</th>
      <td>55</td>
      <td>2006\nSCC 30</td>
      <td>/en/ca/scc/doc/2006/2006scc30/2006scc30.html</td>
      <td>https://www.canlii.org/en/ca/scc/doc/2006/2006...</td>
    </tr>
    <tr>
      <th>25</th>
      <td>55</td>
      <td>2000 CanLII 5684 (ON CA)</td>
      <td>/en/on/onca/doc/2000/2000canlii5684/2000canlii...</td>
      <td>https://www.canlii.org/en/on/onca/doc/2000/200...</td>
    </tr>
    <tr>
      <th>26</th>
      <td>55</td>
      <td>2002 SCC 18</td>
      <td>/en/ca/scc/doc/2002/2002scc18/2002scc18.html</td>
      <td>https://www.canlii.org/en/ca/scc/doc/2002/2002...</td>
    </tr>
    <tr>
      <th>27</th>
      <td>55</td>
      <td>2001 CanLII 61004 (AB KB)</td>
      <td>/en/ab/abqb/doc/2001/2001canlii61004/2001canli...</td>
      <td>https://www.canlii.org/en/ab/abqb/doc/2001/200...</td>
    </tr>
    <tr>
      <th>28</th>
      <td>56</td>
      <td>2000 SCC 60</td>
      <td>/en/ca/scc/doc/2000/2000scc60/2000scc60.html</td>
      <td>https://www.canlii.org/en/ca/scc/doc/2000/2000...</td>
    </tr>
    <tr>
      <th>29</th>
      <td>56</td>
      <td>1999 CanLII 677 (SCC)</td>
      <td>/en/ca/scc/doc/1999/1999canlii677/1999canlii67...</td>
      <td>https://www.canlii.org/en/ca/scc/doc/1999/1999...</td>
    </tr>
    <tr>
      <th>30</th>
      <td>56</td>
      <td>2010 SCC 4</td>
      <td>/en/ca/scc/doc/2010/2010scc4/2010scc4.html</td>
      <td>https://www.canlii.org/en/ca/scc/doc/2010/2010...</td>
    </tr>
    <tr>
      <th>31</th>
      <td>64</td>
      <td>1994 CanLII 85 (SCC)</td>
      <td>/en/ca/scc/doc/1994/1994canlii85/1994canlii85....</td>
      <td>https://www.canlii.org/en/ca/scc/doc/1994/1994...</td>
    </tr>
    <tr>
      <th>32</th>
      <td>64</td>
      <td>2014 SCC\n52</td>
      <td>/en/ca/scc/doc/2014/2014scc52/2014scc52.html</td>
      <td>https://www.canlii.org/en/ca/scc/doc/2014/2014...</td>
    </tr>
    <tr>
      <th>33</th>
      <td>67</td>
      <td>1992 CanLII 21 (SCC)</td>
      <td>/en/ca/scc/doc/1992/1992canlii21/1992canlii21....</td>
      <td>https://www.canlii.org/en/ca/scc/doc/1992/1992...</td>
    </tr>
    <tr>
      <th>34</th>
      <td>70</td>
      <td>2014 SCC 12</td>
      <td>/en/ca/scc/doc/2014/2014scc12/2014scc12.html</td>
      <td>https://www.canlii.org/en/ca/scc/doc/2014/2014...</td>
    </tr>
    <tr>
      <th>35</th>
      <td>70</td>
      <td>2002 SCC 43</td>
      <td>/en/ca/scc/doc/2002/2002scc43/2002scc43.html</td>
      <td>https://www.canlii.org/en/ca/scc/doc/2002/2002...</td>
    </tr>
    <tr>
      <th>36</th>
      <td>73</td>
      <td>1985 CanLII 1975 (ON CA)</td>
      <td>/en/on/onca/doc/1985/1985canlii1975/1985canlii...</td>
      <td>https://www.canlii.org/en/on/onca/doc/1985/198...</td>
    </tr>
    <tr>
      <th>37</th>
      <td>73</td>
      <td>2003 CanLII 52151 (ON CA)</td>
      <td>/en/on/onca/doc/2003/2003canlii52151/2003canli...</td>
      <td>https://www.canlii.org/en/on/onca/doc/2003/200...</td>
    </tr>
    <tr>
      <th>38</th>
      <td>83</td>
      <td>1989 CanLII 30 (SCC)</td>
      <td>/en/ca/scc/doc/1989/1989canlii30/1989canlii30....</td>
      <td>https://www.canlii.org/en/ca/scc/doc/1989/1989...</td>
    </tr>
    <tr>
      <th>39</th>
      <td>85</td>
      <td>1981 CanLII 31 (SCC)</td>
      <td>/en/ca/scc/doc/1981/1981canlii31/1981canlii31....</td>
      <td>https://www.canlii.org/en/ca/scc/doc/1981/1981...</td>
    </tr>
    <tr>
      <th>40</th>
      <td>85</td>
      <td>1990 CanLII 58 (SCC)</td>
      <td>/en/ca/scc/doc/1990/1990canlii58/1990canlii58....</td>
      <td>https://www.canlii.org/en/ca/scc/doc/1990/1990...</td>
    </tr>
    <tr>
      <th>41</th>
      <td>85</td>
      <td>1992 CanLII 71 (SCC)</td>
      <td>/en/ca/scc/doc/1992/1992canlii71/1992canlii71....</td>
      <td>https://www.canlii.org/en/ca/scc/doc/1992/1992...</td>
    </tr>
    <tr>
      <th>42</th>
      <td>88</td>
      <td>2005 SCC 38</td>
      <td>/en/ca/scc/doc/2005/2005scc38/2005scc38.html</td>
      <td>https://www.canlii.org/en/ca/scc/doc/2005/2005...</td>
    </tr>
    <tr>
      <th>43</th>
      <td>88</td>
      <td>1991 CanLII 58 (SCC)</td>
      <td>/en/ca/scc/doc/1991/1991canlii58/1991canlii58....</td>
      <td>https://www.canlii.org/en/ca/scc/doc/1991/1991...</td>
    </tr>
    <tr>
      <th>44</th>
      <td>88</td>
      <td>1970 CanLII 25 (SCC)</td>
      <td>/en/ca/scc/doc/1970/1970canlii25/1970canlii25....</td>
      <td>https://www.canlii.org/en/ca/scc/doc/1970/1970...</td>
    </tr>
    <tr>
      <th>45</th>
      <td>88</td>
      <td>2014 SCC 8</td>
      <td>/en/ca/scc/doc/2014/2014scc8/2014scc8.html</td>
      <td>https://www.canlii.org/en/ca/scc/doc/2014/2014...</td>
    </tr>
    <tr>
      <th>46</th>
      <td>89</td>
      <td>1986 CanLII 2623 (ON CA)</td>
      <td>/en/on/onca/doc/1986/1986canlii2623/1986canlii...</td>
      <td>https://www.canlii.org/en/on/onca/doc/1986/198...</td>
    </tr>
    <tr>
      <th>47</th>
      <td>106</td>
      <td>2011 ONCA 460</td>
      <td>/en/on/onca/doc/2011/2011onca460/2011onca460.html</td>
      <td>https://www.canlii.org/en/on/onca/doc/2011/201...</td>
    </tr>
  </tbody>
</table>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-37efd990-48ab-4b3d-ae05-352c0d032314')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-37efd990-48ab-4b3d-ae05-352c0d032314 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-37efd990-48ab-4b3d-ae05-352c0d032314');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-117a10e4-35ff-44c5-9221-cadef91068bf">
  <button class="colab-df-quickchart" onclick="quickchart('df-117a10e4-35ff-44c5-9221-cadef91068bf')"
            title="Suggest charts"
            style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-117a10e4-35ff-44c5-9221-cadef91068bf button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>

  <div id="id_62bc70a1-bb08-4791-9794-8313dec992aa">
    <style>
      .colab-df-generate {
        background-color: #E8F0FE;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        display: none;
        fill: #1967D2;
        height: 32px;
        padding: 0 0 0 0;
        width: 32px;
      }

      .colab-df-generate:hover {
        background-color: #E2EBFA;
        box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
        fill: #174EA6;
      }

      [theme=dark] .colab-df-generate {
        background-color: #3B4455;
        fill: #D2E3FC;
      }

      [theme=dark] .colab-df-generate:hover {
        background-color: #434B5C;
        box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
        filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
        fill: #FFFFFF;
      }
    </style>
    <button class="colab-df-generate" onclick="generateWithVariable('citations')"
            title="Generate code using this dataframe."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
       width="24px">
    <path d="M7,19H8.4L18.45,9,17,7.55,7,17.6ZM5,21V16.75L18.45,3.32a2,2,0,0,1,2.83,0l1.4,1.43a1.91,1.91,0,0,1,.58,1.4,1.91,1.91,0,0,1-.58,1.4L9.25,21ZM18.45,9,17,7.55Zm-12,3A5.31,5.31,0,0,0,4.9,8.1,5.31,5.31,0,0,0,1,6.5,5.31,5.31,0,0,0,4.9,4.9,5.31,5.31,0,0,0,6.5,1,5.31,5.31,0,0,0,8.1,4.9,5.31,5.31,0,0,0,12,6.5,5.46,5.46,0,0,0,6.5,12Z"/>
  </svg>
    </button>
    <script>
      (() => {
      const buttonEl =
        document.querySelector('#id_62bc70a1-bb08-4791-9794-8313dec992aa button.colab-df-generate');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      buttonEl.onclick = () => {
        google.colab.notebook.generateWithVariable('citations');
      }
      })();
    </script>
  </div>

    </div>
  </div>




```python
# @title Citations per Paragraph

import matplotlib.pyplot as plt

counts = {}
for value in citations['paragraph']:
  counts[value] = counts.get(value, 0) + 1

display(counts)

plt.bar(*zip(*counts.items()))
plt.title('Citations per Paragraph')
plt.xlabel('Paragraph')
plt.ylabel('Number of Citations')
```


    {3: 1,
     16: 1,
     38: 4,
     39: 3,
     40: 7,
     44: 2,
     47: 1,
     49: 1,
     50: 1,
     51: 1,
     54: 2,
     55: 4,
     56: 3,
     64: 2,
     67: 1,
     70: 2,
     73: 2,
     83: 1,
     85: 3,
     88: 4,
     89: 1,
     106: 1}





    Text(0, 0.5, 'Number of Citations')




    
![png](PromptLii_files/PromptLii_7_2.png)
    



```python
# @title Additional Citation Metrics

mean_year = np.mean(citations['citation'].str.extract(r'(\d{4})').astype(int),axis=0)
median_year = np.median(citations['citation'].str.extract(r'(\d{4})').astype(int))
mode_year = citations['citation'].str.extract(r'(\d{4})').astype(int).mode()[0][0]
newest_year = citations['citation'].str.extract(r'(\d{4})').astype(int).max()
oldest_year = citations['citation'].str.extract(r'(\d{4})').astype(int).min()

print("Mean Citation Year:", int(mean_year))
print("Median Citation Year:", int(median_year))
print("Mode Citation Year:", int(mode_year))
print("Newest Citation Year:", int(newest_year))
print("Oldest Citation Year:", int(oldest_year))
```

    Mean Citation Year: 1997
    Median Citation Year: 1997
    Mode Citation Year: 1992
    Newest Citation Year: 2014
    Oldest Citation Year: 1958



```python
# @title Validation before Computation
import tiktoken
enc = tiktoken.encoding_for_model(gpt_model)

print ("Number of tokens in input prompt ", len(enc.encode(caseText)))

# We will add 2000 tokens as a buffer, since we will be providing additional prompts
# as instruction prompts
expectedTokens = len(enc.encode(caseText)) + 2000
print ("Number of tokens in input prompt, with a buffer added: ", expectedTokens)

model_tokens = {}
model_tokens['gpt-3.5-turbo-16k'] = 16000
model_tokens['gpt-4'] = 8192
model_tokens['gpt-4-0125-preview'] = 125000

if expectedTokens >= model_tokens[gpt_model]:
   raise ValueError("Tokens will likely exceed model's limit. Try a different model or reduce the number of tokens.")
```

    Number of tokens in input prompt  20956
    Number of tokens in input prompt, with a buffer added:  22956



```python
from openai import OpenAI

try:
    # Attempt to import the google.colab module to see if the program is running in Colab.
    from google.colab import userdata
    print("Running on Google Colab")
    client = OpenAI(api_key=userdata.get('OPENAI_API_KEY'))

except ImportError:
    # The ImportError exception will be raised if the google.colab module is not found,
    # indicating that the program is not running inside Google Colab.
    import os
    print("Running outside of Google Colab")
    client = OpenAI(api_key=(os.environ.get('OPENAI_API_KEY')))

import tiktoken
enc = tiktoken.encoding_for_model(gpt_model)

print ("Number of tokens in input prompt ", len(enc.encode(caseText)))
```

    Running on Google Colab
    Number of tokens in input prompt  20956



```python
# Helper Functions

def llm_completion(prompt, model=gpt_model, temperature=gpt_temperature):
    messages = [{"role": "system", "content": "You are a helpful assistant."},
                {"role": "user", "content": prompt}
                ]
    response = client.chat.completions.create(
        model = gpt_model,
        messages = messages,
        temperature = gpt_temperature
    )
    return response.choices[0].message.content
```


```python
# @title Prompt #1: Case Summary with Headings

caseSummaryHeadingsPrompt = f"""
You will be provided with a legal case delimited by triple backticks. For all of the statements that you make, you will cite it using cite the paragraph number where you obtained the information from.
Summarize this legal case in the following format using the 6 following headings:
1. Facts
  ...
2. Procedural history
  ...
3. Parties' submissions
  ...
4. Legal issues
  ...
5. Disposition
  ...
6. Reasons
  ...

Only use these headings and ensure that all of the text is only under these headings.
The legal case paragraphs are as follows, and is text delimited by triple backticks:
```{caseText}```
"""
```


```python
#caseFacts = chatOutput.choices[0].message.content
caseFacts = llm_completion(caseSummaryHeadingsPrompt)
print(caseFacts)
print("\n")
print("Number of characters in output prompt: ", len(caseFacts))
print ("Number of tokens in output prompt: ", len(enc.encode(caseFacts)))
```

    1. Facts
    Mr. Bhasin, through his business Bhasin & Associates, was an enrollment director for Canadian American Financial Corp. (Can-Am) since 1989. The relationship soured in 1999, leading to Can-Am deciding not to renew the dealership agreement with Mr. Bhasin, resulting in litigation. Mr. Bhasin built a successful business over approximately 10 years, becoming one of Can-Am's top enrollment directors in Canada. An agreement in 1998 governed their relationship, requiring Mr. Bhasin to sell Can-Am products exclusively and not allowing him to sell, transfer, or merge his operation without Can-Am's consent. The contract had a three-year term with provisions for termination and automatic renewal unless notice was given six months before the term's end (¶2-6).
    
    2. Procedural History
    Mr. Bhasin sued Can-Am and Mr. Hrynew, alleging breach of an implied term of the contract that decisions about renewal would be made in good faith. The trial court found in favor of Mr. Bhasin, holding Can-Am breached the implied term of good faith, and found Mr. Hrynew had intentionally induced breach of contract. The Alberta Court of Appeal reversed, dismissing Mr. Bhasin's lawsuit for insufficient pleadings and holding the lower court erred by implying a term of good faith in an unambiguous contract (¶14-16).
    
    3. Parties' Submissions
    Mr. Bhasin argued for a general duty of good faith in contract law, contending that Can-Am used its non-renewal right dishonestly to compel a merger with his competitor, Mr. Hrynew. The respondents, while accepting that good faith plays a role in Canadian contract law, argued that such a duty arises only in certain classes of contracts and that the contract in this case was not ambiguous regarding the non-renewal clause, thus no basis for implying other terms or relying on extrinsic evidence of the parties’ intentions (¶29-31).
    
    4. Legal Issues
    The appeal raised the issue of whether Canadian common law recognizes a duty to perform contractual obligations honestly and, if so, whether Can-Am breached this duty by acting dishonestly towards Mr. Bhasin in the exercise of the non-renewal clause (¶1, 17-18).
    
    5. Disposition
    The Supreme Court allowed the appeal with respect to Can-Am, recognizing a general duty of honest contractual performance and concluding that Can-Am breached this duty. The appeal was dismissed with respect to Mr. Hrynew. Damages were assessed at $87,000 plus interest in favor of Mr. Bhasin against Can-Am. Costs were awarded to Mr. Bhasin throughout as against Can-Am, with no costs awarded in favor of or against Mr. Hrynew (¶112).
    
    6. Reasons
    The Court recognized an organizing principle of good faith that underlies and informs various specific doctrines governing contractual performance, and a duty which applies to all contracts to act honestly in the performance of contractual obligations. This development was seen as consistent with the reasonable expectations of commercial parties and enhances commercial certainty. The Court found Can-Am acted dishonestly with Mr. Bhasin in exercising the non-renewal clause, directly connected to Can-Am’s performance of the Agreement, thus breaching the duty of honest performance. The Court rejected broader claims against Mr. Hrynew for inducing breach of contract and conspiracy, as the trial judge found Mr. Hrynew did not encourage Can-Am to act dishonestly (¶33-34, 93-107).
    
    
    Number of characters in output prompt:  3395
    Number of tokens in output prompt:  733



```python
# @title Prompt #2: Possible Case Conversation in Court

instructPromptCourtConversation = f"""
Perform the following actions:
1. Use the legal case provided to create a story about the events leading to this court case.
2. Determine who the plaintiff and the defendant are.
3. Start each conversation with one of the following
  i. [Plaintiff] ...
  ii. [Defendant] ...
  iii. [Judge] ...
4. Make the conversation argumentative
5. Have the judge provide input throughout the conversation.
6. There are only three speakers: the Judge, the Plaintiff, and the Defendant.
7. Make this a podcast transcript, with the either Judge, Plaintiff, or Defendant in brackets. Nothing else should be in the brackets.

The legal case paragraphs are as follows, and is text delimited by triple backticks:
```{caseText}```
"""
```


```python
caseConversation = llm_completion(instructPromptCourtConversation)
print(caseConversation)
```

    [Judge] Welcome to today's episode of "The Legal Lens," where we delve into a fascinating legal battle that has captured the attention of the business and legal communities alike. Today, we're discussing the case of Mr. Bhasin versus Canadian American Financial Corp., commonly known as Can-Am, and Mr. Hrynew. This case raises critical questions about the duty of honesty in contractual obligations. Let's dive into the heart of this dispute.
    
    [Plaintiff] Thank you, Your Honor. I'm Mr. Bhasin, the plaintiff in this case. For years, I worked tirelessly to build my business as an enrollment director for Can-Am, selling education savings plans. My relationship with Can-Am was governed by a contract that, I believed, was based on mutual trust and respect. However, I was gravely mistaken. Can-Am, influenced by Mr. Hrynew, a competitor and another enrollment director, decided not to renew my contract, leading to the devastating loss of my business. This was not a simple business decision but a result of deceit and dishonesty.
    
    [Defendant] Your Honor, I represent Can-Am, and I must contest Mr. Bhasin's portrayal of events. Our decision not to renew the contract with Mr. Bhasin was a business decision, made within the rights provided by the contract. The allegations of dishonesty are unfounded. As for Mr. Hrynew's involvement, it was purely professional, aimed at ensuring compliance with regulatory requirements, not at undermining Mr. Bhasin's business.
    
    [Judge] Mr. Bhasin, the court recognizes the effort you put into building your business and the impact its loss has had on you. However, we must consider the legal framework governing contractual relationships. Can-Am argues that their actions were within their contractual rights. Could you elaborate on the dishonesty you allege?
    
    [Plaintiff] Absolutely, Your Honor. Can-Am and Mr. Hrynew engaged in a series of misleading actions and outright lies. They misrepresented Mr. Hrynew's role as a provincial trading officer, suggesting he was under an obligation of confidentiality when auditing my business, which was not the case. They also falsely indicated to me that a merger with Mr. Hrynew's agency was not a foregone conclusion, despite plans to the contrary. This dishonesty directly impacted my ability to make informed decisions about my business's future.
    
    [Defendant] Your Honor, the contractual agreement allowed for non-renewal with proper notice, which was given. The discussions around the merger and regulatory compliance were complex and evolving. Any perceived miscommunications were not intentional acts of dishonesty but rather reflections of the changing business and regulatory landscape.
    
    [Judge] The crux of this case revolves around whether there was a duty of honesty in the performance of the contractual obligations and whether this duty was breached. The evidence presented, including the misleading information provided to Mr. Bhasin and the concealment of true intentions regarding the merger, suggests a breach of such a duty. The law must evolve to recognize that honesty is a foundational element in the performance of contracts. 
    
    [Plaintiff] Your Honor, that's precisely our point. The lack of honesty from Can-Am and Mr. Hrynew not only led to the loss of my business but also represents a dangerous precedent if left unaddressed. It undermines the very essence of fair dealing in business.
    
    [Defendant] Your Honor, while we respect the court's perspective, we maintain that our actions were within the contractual boundaries and that any duty of honesty was not breached. The decisions made were in the best interest of compliance and business strategy.
    
    [Judge] After careful consideration, the court finds in favor of Mr. Bhasin. Can-Am's actions, influenced by Mr. Hrynew, constituted a breach of the duty to perform the contract honestly. This case underscores the importance of honesty in contractual dealings and sets a precedent for how such matters will be viewed legally moving forward. Mr. Bhasin is awarded damages for the loss of his business. This decision not only brings justice to Mr. Bhasin but also signals to the business community that honesty is not just a moral obligation but a legal one.
    
    [Plaintiff] Thank you, Your Honor. This decision is a vindication of the years I spent building my business and the principle that honesty must govern our contractual obligations.
    
    [Defendant] While we respect the court's decision, we may consider further legal options. We remain committed to our business practices and regulatory compliance.
    
    [Judge] This concludes today's episode of "The Legal Lens." The Bhasin vs. Can-Am case will undoubtedly be discussed and analyzed for its implications on contract law and business ethics. Thank you to both parties for presenting their arguments.



```python
# @title Prompt #3: Generating a Fictional Story using the Case

storyPrompt = f"""
Make this legal case into a fictional story. You will not get into the dispute resolution process, but instead will create a story about the events leading to this court case. The output should be a story narrated by one person.
Only state what the narrarator would say, and do not state anything else.
The legal case paragraphs are as follows, and is text delimited by triple backticks:
```{caseText}```
"""
```


```python
caseStory = llm_completion(storyPrompt)
print(caseStory)
```

    I remember it like it was yesterday, the day everything changed for me, for my business, Bhasin & Associates. It was back in 1989 when I first became an enrollment director for Canadian American Financial Corp., or Can-Am as we all called it. I was selling education savings plans, and let me tell you, it was no easy feat. But I was determined, and over a decade, I built a sales force that was second to none. Can-Am recognized my efforts, showering me with awards and prizes. I was on top of the world, or so I thought.
    
    The relationship I had with Can-Am was governed by an agreement we signed in 1998. It wasn't a franchise agreement, but it had similar features. I was to sell Can-Am's investment products exclusively, and they owned the client lists and were responsible for branding. It was a three-year term contract with an automatic renewal clause unless one of us gave six months' notice to the contrary.
    
    But then, there was Mr. Hrynew, another enrollment director and my competitor. The animosity between us was palpable. He had his sights set on my market, the niche I had painstakingly built over the years. He approached me several times with proposals to merge our agencies, but I refused every time. It was clear to me that what he wanted was not a merger but a takeover.
    
    The Alberta Securities Commission had raised concerns about compliance issues among Can-Am's enrollment directors. In a move that still baffles me, Can-Am appointed Hrynew as the Provincial Trading Officer responsible for auditing us, his competitors. I objected, of course. The thought of him having access to my confidential business records was unacceptable.
    
    Can-Am's dealings with me became increasingly dishonest. They misled me about Hrynew's role and the nature of the audits. They even lied about their intentions, pushing for a merger that I wanted no part of. When I continued to resist, they played their final card - they chose not to renew my contract. Just like that, I lost everything I had worked for. My sales agents were poached by Hrynew's agency, and I was left to pick up the pieces.
    
    I decided to sue Can-Am and Hrynew. The trial was a revelation. The judge found that Can-Am had indeed acted dishonestly with me, breaching the duty of honest performance. They had misled me about their intentions and about Hrynew's role. If only they had been honest, I could have taken steps to protect my business. But the Court of Appeal saw things differently. They dismissed my lawsuit, focusing on the technicalities of my pleadings rather than the substance of my claims.
    
    But I wasn't ready to give up. The appeal to the Supreme Court was my last hope. And it paid off. The Supreme Court recognized the duty of honest performance in contracts, a duty that Can-Am had breached. They saw through the technicalities to the heart of the matter - the injustice I had suffered. The court awarded me damages for the loss of my business, a small consolation for the years of hard work and dedication.
    
    This case wasn't just about me. It was about setting a precedent, about ensuring that honesty and good faith are not optional in contractual relationships. It was a long and arduous journey, but in the end, justice was served.



```python
# @title Prompt #4: Generating Image Description using the Case

imageInstructPrompt = f"""
Make this legal case into a description of an image.
This will be used as a prompt to generate an image.
The output should be a description of the image.
The legal case paragraphs are as follows, and is text delimited by triple backticks:
```{caseText}```
"""

imagePromptOutput = llm_completion(imageInstructPrompt)
print(imagePromptOutput)
```

    The image depicts a courtroom scene focused on a legal dispute involving contractual obligations and honesty in business practices. In the foreground, a man, identified as Mr. Bhasin, stands with a look of determination, holding documents that symbolize his business dealings with Canadian American Financial Corp. (Can-Am). Opposite him, representatives from Can-Am appear defensive, with one holding a contract that includes a non-renewal clause. Between them, a judge attentively listens, symbolizing the court's role in determining the outcome based on Canadian common law principles regarding honesty in contractual performance.
    
    In the background, a scale of justice hangs balanced, emphasizing the legal system's pursuit of fairness and justice in contractual obligations. A faint image of a business, representing Mr. Bhasin's enrollment directorship and his efforts in building a successful sales force over a decade, looms over the scene, highlighting what's at stake for him personally and professionally.
    
    The atmosphere in the courtroom is tense yet hopeful, capturing the essence of a legal battle over the fundamental question of whether parties to a contract must perform their obligations honestly and the consequences of failing to do so. The image encapsulates the themes of trust, betrayal, and the quest for justice in the complex world of commercial contracts.



```python
# @title Prompt #5: Image Prompt
# Create an image of this
imagePrompt = f"""
Create an image using this description. Make it as realistic as possible.
The image should incorporate Canadian legal imagery.
If there are any words in the image, make sure that they are spelled correctly.
The image description is as follows, and is text delimited by triple backticks:
```{imagePromptOutput}```
"""
```


```python
response = client.images.generate(
  model="dall-e-3",
  prompt=imagePrompt,
  size="1024x1024",
  quality="standard",
  n=1,
)
```


```python
image_url = response.data[0].url
print(image_url)
!curl -o case_image.png {image_url}

from IPython.display import Image
Image("/content/case_image.png")
Image(url=image_url)
```

    https://oaidalleapiprodscus.blob.core.windows.net/private/org-7hCHs9T7jniFLK1jSh90iuTU/user-XMGKRlAEWwNGDCkKFicacFyX/img-e3TJfAlk4WzFpSt7U2FD0q2P.png?st=2024-03-19T05%3A13%3A39Z&se=2024-03-19T07%3A13%3A39Z&sp=r&sv=2021-08-06&sr=b&rscd=inline&rsct=image/png&skoid=6aaadede-4fb3-4698-a8f6-684d7786b067&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skt=2024-03-19T00%3A13%3A10Z&ske=2024-03-20T00%3A13%3A10Z&sks=b&skv=2021-08-06&sig=nI6TEdQZ3f1q8RJsQ%2BkYgsMHV6ikn21lsPubgvCp7jw%3D
      % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                     Dload  Upload   Total   Spent    Left  Speed
    100   248  100   248    0     0    825      0 --:--:-- --:--:-- --:--:--   826





<img src="https://oaidalleapiprodscus.blob.core.windows.net/private/org-7hCHs9T7jniFLK1jSh90iuTU/user-XMGKRlAEWwNGDCkKFicacFyX/img-e3TJfAlk4WzFpSt7U2FD0q2P.png?st=2024-03-19T05%3A13%3A39Z&se=2024-03-19T07%3A13%3A39Z&sp=r&sv=2021-08-06&sr=b&rscd=inline&rsct=image/png&skoid=6aaadede-4fb3-4698-a8f6-684d7786b067&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skt=2024-03-19T00%3A13%3A10Z&ske=2024-03-20T00%3A13%3A10Z&sks=b&skv=2021-08-06&sig=nI6TEdQZ3f1q8RJsQ%2BkYgsMHV6ikn21lsPubgvCp7jw%3D"/>




```python
def remove_empty_lines(text):
    # Split the text into lines, filter out empty or whitespace-only lines, and join back into a single string
    cleaned_text = "\n".join(line for line in text.splitlines() if line.strip())
    return cleaned_text
```


```python
# @title Prompt #6: Demand vs. Awards

demandVsAwardsPrompt = f"""
You will be provided with a legal case delimited by triple backticks. For all of the statements that you make, you will cite it using cite the paragraph number where you obtained the information from.
State the outcome of this legal case using the following headings:
-Plaintiff Demands
-Judge Awards
-Reason
-Paragraph Citation(s)

The legal case paragraphs are as follows, and is text delimited by triple backticks:
```{caseText}```
"""

demandVsAwardsOutput = llm_completion(demandVsAwardsPrompt)
print(demandVsAwardsOutput)
```

    ### Plaintiff Demands
    Mr. Bhasin demanded that the court recognize a breach of the implied term of good faith in the non-renewal of his contract with Canadian American Financial Corp. (Can-Am) and sought damages for the loss of value in his business as a result of this non-renewal. He also brought claims against Mr. Hrynew for inducing breach of contract and unlawful means conspiracy [Paragraphs #14, #104, #105].
    
    ### Judge Awards
    The Supreme Court awarded Mr. Bhasin damages in the amount of $87,000 plus interest, corresponding to the value of his business at the time of the non-renewal of the contract [Paragraph #111].
    
    ### Reason
    The Supreme Court found that Can-Am breached its duty to perform the contract honestly by misleading Mr. Bhasin about its intentions regarding the renewal of the contract and Mr. Hrynew's role as a Provincial Trading Officer. This dishonesty was directly linked to Can-Am's performance of the contract and its exercise of the non-renewal provision. The court concluded that Can-Am's actions deprived Mr. Bhasin of the opportunity to retain the value in his agency, which was determined to be $87,000 at the time of non-renewal [Paragraphs #94, #98, #99, #103, #108, #109].
    
    ### Paragraph Citation(s)
    - Plaintiff Demands: Paragraphs #14, #104, #105
    - Judge Awards: Paragraph #111
    - Reason: Paragraphs #94, #98, #99, #103, #108, #109



```python
# Format your response in CSV (Comma-Separated Values) format, with each row representing a court decision.
# The first line should be the header row, specifying the column names: 'Plaintiff Demands', 'Judge Awards', 'Reason', 'Paragraph Citation(s)'.
# There will only be one header row, and it should be the first line of the response.
# Ensure that each subsequent line contains the corresponding header row's information for a court decision, with values separated by commas.
# Avoid using commas within individual fields to prevent formatting issues.
# If necessary, encapsulate fields containing spaces in quotation marks.
# Ensure that the expected number fields in each row are present.
# For fields that contain a comma, such as those with monetary values, encapsulate those fields in quotation marks.
# The outcomes of the legal case are as follows, and is text delimited by triple backticks:
# Use the following format:
# +----------------------------------+--------------------+----------------------+
# | Plaintiff Demands | Judge Awards | Reason             |Paragraph Citation(s) |
# +----------------------------------+--------------------+----------------------+
# | ...               | ...          | ...                | ...                  |
# +----------------------------------+--------------------+----------------------+
# | ...               | ...          | ...                | ...                  |
# .
# .
# .
# Only use these headings and ensure that all of the text is only under these headings.

demandVsAwardsPrompt = f"""
You will be provided with a legal case delimited by triple backticks. For all of the statements that you make, you will cite it using cite the paragraph number where you obtained the information from.
Summarize the outcome of this legal case using the following columns as a table:
-Plaintiff Demands
-Judge Awards
-Reason
-Paragraph Citation(s)

The items should be itemized and on seperate rows. Ensure all of the Plaintiff demands
and the Judge awards are listed.

Format your response in an array of items, with each item representing a distinct court decision.

Use the following format, which is delimited by triple hyphens:
---
[
  {{
    "Plaintiff Demands": "string",
    "Judge Awards": "string",
    "Reason": "string",
    "Paragraph Citation(s)": "string"
  }},
  {{
    "Plaintiff Demands": "string",
    "Judge Awards": "string",
    "Reason": "string",
    "Paragraph Citation(s)": "string"
  }},
  ...
]
---
You must absolutely start the response with a bracket and end the text with a bracket.
Do not include triple backticks at the start or the end of the response.
The legal case paragraphs are as follows, and is text delimited by triple backticks:
```{caseText}```
"""

demandVsAwardsOutput = llm_completion(demandVsAwardsPrompt)
print(demandVsAwardsOutput)
```

    [
      {
        "Plaintiff Demands": "Recognition of a general duty of good faith in contract and damages for breach of contract, including for dishonesty in the non-renewal of the contract.",
        "Judge Awards": "Damages in the amount of $87,000 plus interest.",
        "Reason": "Can-Am breached its duty to perform the Agreement honestly, particularly with respect to its settled intentions regarding renewal.",
        "Paragraph Citation(s)": "92, 94, 103, 111"
      },
      {
        "Plaintiff Demands": "Claims against Mr. Hrynew for inducing breach of contract and unlawful means conspiracy.",
        "Judge Awards": "Dismissal of claims against Mr. Hrynew.",
        "Reason": "Mr. Hrynew did not induce Can-Am’s breach of its contractual duty of honest performance, and there was no basis for liability for civil conspiracy as it pertained only to Can-Am.",
        "Paragraph Citation(s)": "104, 105, 106, 107"
      }
    ]



```python
# from io import StringIO
# csv_string_io = StringIO(demandVsAwardsOutput)
# demandVsAwardsOutputDf = pd.read_csv(csv_string_io)
# display(demandVsAwardsOutputDf)

demandVsAwardsOutputDf = pd.read_json(demandVsAwardsOutput)
display(demandVsAwardsOutputDf)
```



  <div id="df-8112ea98-0b50-464e-8884-6a170c74c4f3" class="colab-df-container">
    <div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Plaintiff Demands</th>
      <th>Judge Awards</th>
      <th>Reason</th>
      <th>Paragraph Citation(s)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Recognition of a general duty of good faith in...</td>
      <td>Damages in the amount of $87,000 plus interest.</td>
      <td>Can-Am breached its duty to perform the Agreem...</td>
      <td>92, 94, 103, 111</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Claims against Mr. Hrynew for inducing breach ...</td>
      <td>Dismissal of claims against Mr. Hrynew.</td>
      <td>Mr. Hrynew did not induce Can-Am’s breach of i...</td>
      <td>104, 105, 106, 107</td>
    </tr>
  </tbody>
</table>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-8112ea98-0b50-464e-8884-6a170c74c4f3')"
            title="Convert this dataframe to an interactive table."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"/>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-8112ea98-0b50-464e-8884-6a170c74c4f3 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-8112ea98-0b50-464e-8884-6a170c74c4f3');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-1fc8bee6-6411-4bf7-ad81-3eda6d1c7714">
  <button class="colab-df-quickchart" onclick="quickchart('df-1fc8bee6-6411-4bf7-ad81-3eda6d1c7714')"
            title="Suggest charts"
            style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
     width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-1fc8bee6-6411-4bf7-ad81-3eda6d1c7714 button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>

  <div id="id_3177ee0b-70a3-4e65-9e12-4dff22c37446">
    <style>
      .colab-df-generate {
        background-color: #E8F0FE;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        display: none;
        fill: #1967D2;
        height: 32px;
        padding: 0 0 0 0;
        width: 32px;
      }

      .colab-df-generate:hover {
        background-color: #E2EBFA;
        box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
        fill: #174EA6;
      }

      [theme=dark] .colab-df-generate {
        background-color: #3B4455;
        fill: #D2E3FC;
      }

      [theme=dark] .colab-df-generate:hover {
        background-color: #434B5C;
        box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
        filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
        fill: #FFFFFF;
      }
    </style>
    <button class="colab-df-generate" onclick="generateWithVariable('demandVsAwardsOutputDf')"
            title="Generate code using this dataframe."
            style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px"viewBox="0 0 24 24"
       width="24px">
    <path d="M7,19H8.4L18.45,9,17,7.55,7,17.6ZM5,21V16.75L18.45,3.32a2,2,0,0,1,2.83,0l1.4,1.43a1.91,1.91,0,0,1,.58,1.4,1.91,1.91,0,0,1-.58,1.4L9.25,21ZM18.45,9,17,7.55Zm-12,3A5.31,5.31,0,0,0,4.9,8.1,5.31,5.31,0,0,0,1,6.5,5.31,5.31,0,0,0,4.9,4.9,5.31,5.31,0,0,0,6.5,1,5.31,5.31,0,0,0,8.1,4.9,5.31,5.31,0,0,0,12,6.5,5.46,5.46,0,0,0,6.5,12Z"/>
  </svg>
    </button>
    <script>
      (() => {
      const buttonEl =
        document.querySelector('#id_3177ee0b-70a3-4e65-9e12-4dff22c37446 button.colab-df-generate');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      buttonEl.onclick = () => {
        google.colab.notebook.generateWithVariable('demandVsAwardsOutputDf');
      }
      })();
    </script>
  </div>

    </div>
  </div>




```python
# @title Prompt #7: Explain This Case Like I'm Five [ELI5]

eli5Request = f"""
Explain this legal case like I'm five years old.
The legal case paragraphs are as follows, and is text delimited by triple backticks:
```{caseText}```
"""

eli5Output = llm_completion(eli5Request)
print(eli5Output)
```

    Okay, little buddy, let's talk about a story that happened between some people who were doing business together. Imagine you have a friend, let's call him Mr. Bhasin, and he has a lemonade stand. Mr. Bhasin made a special deal with a bigger company called Can-Am to sell their lemonade. They had a special handshake agreement that said they would work together for three years, but they could keep working together after that if they both agreed.
    
    Mr. Bhasin was really good at selling lemonade, and he won lots of prizes for being one of the best lemonade sellers. But then, there was another person, Mr. Hrynew, who also sold lemonade and he wanted to be the only one selling it in the area. Mr. Hrynew didn't play fair and started telling Can-Am that they should only work with him and not Mr. Bhasin.
    
    Can-Am started acting a bit sneaky. They told Mr. Bhasin that everything was fine and that Mr. Hrynew was just checking to make sure everyone was following the rules, but that wasn't true. They were actually planning to stop working with Mr. Bhasin and only work with Mr. Hrynew, but they didn't tell Mr. Bhasin that.
    
    When it was time to decide if they were going to keep working with Mr. Bhasin, Can-Am said, "No, thank you," and Mr. Bhasin was very surprised and sad because he lost his lemonade stand and all the hard work he put into it. Mr. Bhasin felt that Can-Am and Mr. Hrynew were not honest with him, so he decided to ask some adults (the judges) to help solve the problem.
    
    The first group of adults (the trial judge) listened to the story and said that Can-Am and Mr. Hrynew were not fair to Mr. Bhasin. They said Can-Am should have been honest and that Mr. Bhasin should get some money for the trouble caused. But then, another group of adults (the Court of Appeal) said that Mr. Bhasin's story wasn't told right in the beginning, so they said Can-Am and Mr. Hrynew didn't have to give Mr. Bhasin anything.
    
    Mr. Bhasin didn't give up. He went to the highest group of adults (the Supreme Court), and they said that when people make deals, they should be honest with each other. They said Can-Am was not honest with Mr. Bhasin, and because of that, Mr. Bhasin lost his lemonade stand. So, they decided that Can-Am should give Mr. Bhasin some money for his lost lemonade stand, but Mr. Hrynew didn't have to give anything because he didn't make the final decision.
    
    In the end, the story teaches us that being honest is very important, especially when making deals and working with others.



```python
# @title Prompt #8: Multilingual Outputs

language = "Cantonese"

multilingualPrompt = f"""
Summarize this legal case in the {language} language.
Use up to 300 words. Be concise and clear.
The legal case paragraphs are as follows, and is text delimited by triple backticks:
```{caseText}```
"""

multilingualOutput = llm_completion(multilingualPrompt)
print(multilingualOutput)
```

    呢宗訴訟案件主要涉及兩個問題：加拿大普通法是否對合約雙方施加誠實履行合約義務嘅責任？如果有，被告是否違反咗呢項責任？法院對兩個問題嘅回答都係肯定嘅。法官認為，確認合約履行中嘅誠實責任將會令法律更加確定、公正，並且更符合合理嘅商業預期，同時亦會為原告Bhasin先生帶來公正，因為佢因被誤導而失去咗自己生意嘅價值。
    
    Bhasin先生自1989年起透過佢嘅生意Bhasin & Associates成為加拿大美國金融公司（Can-Am）嘅招生主任。到咗1999年，佢同Can-Am之間嘅關係變差，最終Can-Am決定唔再續約。之後，Bhasin先生就提起訴訟。
    
    Can-Am透過零售經銷商，即招生主任（例如Bhasin先生）向投資者推銷教育儲蓄計劃（ESP），並為賣ESP支付報酬同獎金。招生主任實際上係小型生意嘅老闆，佢哋嘅業務成功依賴於建立銷售隊伍。Bhasin先生用咗大約10年時間建立咗自己嘅銷售隊伍，但佢嘅生意蓬勃發展，Can-Am多次表彰佢係加拿大最頂尖嘅招生主任之一。
    
    1998年生效嘅招生主任協議規範咗Can-Am同Bhasin先生之間嘅關係。呢份協議係一份商業經銷協議，而唔係特許經營協議。協議中有啲條款同特許經營協議中通常嘅條款相似，例如Bhasin先生有義務專賣Can-Am嘅投資產品，並對Can-Am負有信託責任。
    
    協議期限為三年，其中有條款允許因不當行為或其他原因短期終止協議。另一條款規定，除非一方在三年期限結束前六個月書面通知另一方不續約，否則協議將自動續期。
    
    訴訟中發現，另一名招生主任Hrynew先生，亦即其中一名被告，係Bhasin先生嘅競爭對手，佢對Bhasin先生嘅市場進行咗多次收購嘗試，實際上係想通過合併佢嘅機構來接管Bhasin先生嘅業務。此外，Can-Am對Bhasin先生進行咗不誠實嘅行為，並最終屈服於Hrynew先生嘅壓力，決定唔再同Bhasin先生續約。
    
    法院發現Can-Am對Bhasin先生嘅行為構成咗不誠實，並因此違反咗合約中嘅誠實履行責任。因此，Can-Am需要對Bhasin先生因此而蒙受嘅損失負責。



```python
#@title Text-to-Voice 1: Case Story
lines = caseStory.splitlines()

# Dealing with the 4096 maximum characters issue here (text-to-speech limitation).
# To-do: Make this less ad-hoc

caseStory1 = ""
caseStory2 = ""
caseStoryArray = []
skipThis = False

for line in lines:
  if len(caseStory1) + len(line) & skipThis == False < 4096:
    caseStory1 += line
    skipThis = True
  else:
    caseStory2 += line

caseStoryArray.append(caseStory1)

if caseStory2 != "":
  caseStoryArray.append(caseStory2)

import re

# def get_content_in_brackets(s):
#     match = re.match(r'^\[(.*?)\]', s)
#     if match:
#         return match.group(1)  # Returns the content within the brackets
#     else:
#         return None  # No brackets found at the beginning

# from openai import OpenAI

# client = OpenAI(api_key=userdata.get('OPENAI_API_KEY'))

# lineNum = 0

# for line in lines:
#   speaker = get_content_in_brackets(line)


#   if speaker == 'Host':
#     speakerVoice = 'alloy'

#   elif speaker == 'Judge':
#     speakerVoice = 'onyx'

#   elif speaker == 'Plaintiff':
#     speakerVoice = 'nova'

#   elif  speaker == 'Defendant':
#     speakerVoice = 'echo'

#   else:
#     continue

#   charsToTrim = len(speaker) + 4
#   speech = line[charsToTrim:]
#   lineNum += 1
#   response = client.audio.speech.create(
#       model="tts-1",
#       voice=onyx,
#       input=caseSummary,
#   )
from openai import OpenAI

client = OpenAI(api_key=userdata.get('OPENAI_API_KEY'))

caseNum = 0
for caseStoryElement in caseStoryArray:
  print(len(caseStoryElement))
  response = client.audio.speech.create(
        model="tts-1",
        voice='onyx',
        input=caseStoryElement,
        )

  filename = f"output_{caseNum}.mp3"
  response.stream_to_file(filename)
  caseNum += 1

# print(caseSummary)
```

    3797


    <ipython-input-23-939e3a3a4281>:76: DeprecationWarning: Due to a bug, this method doesn't actually stream the response content, `.with_streaming_response.method()` should be used instead
      response.stream_to_file(filename)


    497



```python
#@title Text-to-Voice 2: Case Conversation
speechLines = caseConversation.splitlines()

# Make the following into a function: def voiceSummary(caseSummary)
import re
from openai import OpenAI
client = OpenAI(api_key=userdata.get('OPENAI_API_KEY'))

def get_content_in_brackets(s):
    match = re.match(r'^\[(.*?)\]', s)
    if match:
        return match.group(1)  # Returns the content within the brackets
    else:
        return None  # No brackets found at the beginning

from openai import OpenAI

client = OpenAI(api_key=userdata.get('OPENAI_API_KEY'))

lineNum = 0

for line in speechLines:
  speaker = get_content_in_brackets(line)

  if speaker == 'Host':
    speakerVoice = 'alloy'

  elif speaker == 'Judge':
    speakerVoice = 'onyx'

  elif speaker == 'Plaintiff':
    speakerVoice = 'nova'

  elif  speaker == 'Defendant':
    speakerVoice = 'echo'

  else:
    continue

  charsToTrim = len(speaker) + 4
  speech = line[charsToTrim:]
  response = client.audio.speech.create(
      model="tts-1",
      voice=speakerVoice,
      input=speech,
  )
  filename = greeting = f"output_{lineNum}.mp3"
  response.stream_to_file(filename)
  lineNum += 1
```

    <ipython-input-65-db1b2f2cf0b7>:48: DeprecationWarning: Due to a bug, this method doesn't actually stream the response content, `.with_streaming_response.method()` should be used instead
      response.stream_to_file(filename)



```python
# Merge the audio
!pip install pydub

from pydub import AudioSegment

# List of mp3 files to concatenate
upper_limit= lineNum

files = [f"output_{i}.mp3" for i in range(0, upper_limit)]

# Initialize an empty audio segment
combined = AudioSegment.empty()

# Loop through the list and concatenate each file
for file in files:
    current_audio = AudioSegment.from_mp3(file)
    combined += current_audio

# Export the combined audio
combined.export("/content/case_conversation.mp3", format="mp3")

```

    Requirement already satisfied: pydub in /usr/local/lib/python3.10/dist-packages (0.25.1)





    <_io.BufferedRandom name='/content/case_conversation.mp3'>




```python
# This is for caseStory:
!pip install pydub

from pydub import AudioSegment

# List of mp3 files to concatenate
#upper_limit= len(caseStory)
upper_limit= 1
print(len(caseStory))

files = [f"output_{i}.mp3" for i in range(0, upper_limit)]

# Initialize an empty audio segment
combined = AudioSegment.empty()

# Loop through the list and concatenate each file
for file in files:
    current_audio = AudioSegment.from_mp3(file)
    combined += current_audio

# Export the combined audio
combined.export("/content/caseStory.mp3", format="wav")
```

    Requirement already satisfied: pydub in /usr/local/lib/python3.10/dist-packages (0.25.1)
    4310





    <_io.BufferedRandom name='/content/caseStory.mp3'>




```python
# @title Case Chatbot

import openai
openai.api_key  = userdata.get('OPENAI_API_KEY')

client = OpenAI(api_key=userdata.get('OPENAI_API_KEY'))
# Additional Helper Functions for Chat Functionality
# def get_completion_from_messages(messages, model="gpt-3.5-turbo", temperature=0):
#     response = openai.ChatCompletion.create(
#         model=model,
#         messages=messages,
#         temperature=temperature, # this is the degree of randomness of the model's output
#     )
def get_completion_from_messages(messages, model="gpt-3.5-turbo", temperature=0):
    response = client.chat.completions.create(model=gpt_model,
                                              messages=messages,
                                              temperature=0
                                            )
    return response.choices[0].message.content

def collect_messages(_):
    prompt = inp.value_input
    inp.value = ''
    context.append({'role':'user', 'content':f"{prompt}"})
    response = get_completion_from_messages(context)
    context.append({'role':'assistant', 'content':f"{response}"})
    panels.append(
        pn.Row('User:', pn.pane.Markdown(prompt, width=600)))
    panels.append(
        pn.Row('Assistant:', pn.pane.Markdown(response, width=600, styles={'background-color': '#F6F6F6'})))

    return pn.Column(*panels)

import panel as pn  # GUI

pn.extension()

panels = [] # collect display

context = [ {'role':'system', 'content':f"""
You are an Info Bot, and you will answer questions about the case that is provided.
You will first greet the user, and then give them a brief introduction (under 200 words) about the case.
You will respond in a short and very conversational friendly style.
Always be professional and helpful. When you cite facts from the case, you should indicate the paragraph number like so: '[#]'
The legal case paragraphs are as follows, and is text delimited by triple backticks:
```{caseText}```
"""} ]  # accumulate messages

inp = pn.widgets.TextInput(value="Hi", placeholder='Enter text here…')
button_conversation = pn.widgets.Button(name="Chat!")

interactive_conversation = pn.bind(collect_messages, button_conversation)

dashboard = pn.Column(
    inp,
    pn.Row(button_conversation),
    pn.panel(interactive_conversation, loading_indicator=True, height=300),
)

dashboard

```






<style>*[data-root-id],
*[data-root-id] > * {
  box-sizing: border-box;
  font-family: var(--jp-ui-font-family);
  font-size: var(--jp-ui-font-size1);
  color: var(--vscode-editor-foreground, var(--jp-ui-font-color1));
}

/* Override VSCode background color */
.cell-output-ipywidget-background:has(
    > .cell-output-ipywidget-background > .lm-Widget > *[data-root-id]
  ),
.cell-output-ipywidget-background:has(> .lm-Widget > *[data-root-id]) {
  background-color: transparent !important;
}
</style>



<div id='9aa2d4f1-201f-41bb-9771-e90812dba137'>
  <div id="a3d2e7a8-e77a-47e0-8c2c-545a3b923450" data-root-id="9aa2d4f1-201f-41bb-9771-e90812dba137" style="display: contents;"></div>
</div>
<script type="application/javascript">(function(root) {
  var docs_json = {"2d619239-27d5-41ab-9884-994011191bd4":{"version":"3.3.4","title":"Bokeh Application","roots":[{"type":"object","name":"panel.models.browser.BrowserInfo","id":"9aa2d4f1-201f-41bb-9771-e90812dba137"},{"type":"object","name":"panel.models.comm_manager.CommManager","id":"313ef02d-506d-4e8e-826c-ad1c1ee8e6be","attributes":{"plot_id":"9aa2d4f1-201f-41bb-9771-e90812dba137","comm_id":"28afb726a7c54d5dad5fb6d095f547b5","client_comm_id":"397015f3db28447b87169919e318a7e6"}}],"defs":[{"type":"model","name":"ReactiveHTML1"},{"type":"model","name":"FlexBox1","properties":[{"name":"align_content","kind":"Any","default":"flex-start"},{"name":"align_items","kind":"Any","default":"flex-start"},{"name":"flex_direction","kind":"Any","default":"row"},{"name":"flex_wrap","kind":"Any","default":"wrap"},{"name":"justify_content","kind":"Any","default":"flex-start"}]},{"type":"model","name":"FloatPanel1","properties":[{"name":"config","kind":"Any","default":{"type":"map"}},{"name":"contained","kind":"Any","default":true},{"name":"position","kind":"Any","default":"right-top"},{"name":"offsetx","kind":"Any","default":null},{"name":"offsety","kind":"Any","default":null},{"name":"theme","kind":"Any","default":"primary"},{"name":"status","kind":"Any","default":"normalized"}]},{"type":"model","name":"GridStack1","properties":[{"name":"mode","kind":"Any","default":"warn"},{"name":"ncols","kind":"Any","default":null},{"name":"nrows","kind":"Any","default":null},{"name":"allow_resize","kind":"Any","default":true},{"name":"allow_drag","kind":"Any","default":true},{"name":"state","kind":"Any","default":[]}]},{"type":"model","name":"drag1","properties":[{"name":"slider_width","kind":"Any","default":5},{"name":"slider_color","kind":"Any","default":"black"},{"name":"value","kind":"Any","default":50}]},{"type":"model","name":"click1","properties":[{"name":"terminal_output","kind":"Any","default":""},{"name":"debug_name","kind":"Any","default":""},{"name":"clears","kind":"Any","default":0}]},{"type":"model","name":"copy_to_clipboard1","properties":[{"name":"fill","kind":"Any","default":"none"},{"name":"value","kind":"Any","default":null}]},{"type":"model","name":"FastWrapper1","properties":[{"name":"object","kind":"Any","default":null},{"name":"style","kind":"Any","default":null}]},{"type":"model","name":"NotificationAreaBase1","properties":[{"name":"js_events","kind":"Any","default":{"type":"map"}},{"name":"position","kind":"Any","default":"bottom-right"},{"name":"_clear","kind":"Any","default":0}]},{"type":"model","name":"NotificationArea1","properties":[{"name":"js_events","kind":"Any","default":{"type":"map"}},{"name":"notifications","kind":"Any","default":[]},{"name":"position","kind":"Any","default":"bottom-right"},{"name":"_clear","kind":"Any","default":0},{"name":"types","kind":"Any","default":[{"type":"map","entries":[["type","warning"],["background","#ffc107"],["icon",{"type":"map","entries":[["className","fas fa-exclamation-triangle"],["tagName","i"],["color","white"]]}]]},{"type":"map","entries":[["type","info"],["background","#007bff"],["icon",{"type":"map","entries":[["className","fas fa-info-circle"],["tagName","i"],["color","white"]]}]]}]}]},{"type":"model","name":"Notification","properties":[{"name":"background","kind":"Any","default":null},{"name":"duration","kind":"Any","default":3000},{"name":"icon","kind":"Any","default":null},{"name":"message","kind":"Any","default":""},{"name":"notification_type","kind":"Any","default":null},{"name":"_destroyed","kind":"Any","default":false}]},{"type":"model","name":"TemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"BootstrapTemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"MaterialTemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]}]}};
  var render_items = [{"docid":"2d619239-27d5-41ab-9884-994011191bd4","roots":{"9aa2d4f1-201f-41bb-9771-e90812dba137":"a3d2e7a8-e77a-47e0-8c2c-545a3b923450"},"root_ids":["9aa2d4f1-201f-41bb-9771-e90812dba137"]}];
  var docs = Object.values(docs_json)
  if (!docs) {
    return
  }
  const py_version = docs[0].version.replace('rc', '-rc.').replace('.dev', '-dev.')
  function embed_document(root) {
    var Bokeh = get_bokeh(root)
    Bokeh.embed.embed_items_notebook(docs_json, render_items);
    for (const render_item of render_items) {
      for (const root_id of render_item.root_ids) {
	const id_el = document.getElementById(root_id)
	if (id_el.children.length && (id_el.children[0].className === 'bk-root')) {
	  const root_el = id_el.children[0]
	  root_el.id = root_el.id + '-rendered'
	}
      }
    }
  }
  function get_bokeh(root) {
    if (root.Bokeh === undefined) {
      return null
    } else if (root.Bokeh.version !== py_version) {
      if (root.Bokeh.versions === undefined || !root.Bokeh.versions.has(py_version)) {
	return null
      }
      return root.Bokeh.versions.get(py_version);
    } else if (root.Bokeh.version === py_version) {
      return root.Bokeh
    }
    return null
  }
  function is_loaded(root) {
    var Bokeh = get_bokeh(root)
    return (Bokeh != null && Bokeh.Panel !== undefined)
  }
  if (is_loaded(root)) {
    embed_document(root);
  } else {
    var attempts = 0;
    var timer = setInterval(function(root) {
      if (is_loaded(root)) {
        clearInterval(timer);
        embed_document(root);
      } else if (document.readyState == "complete") {
        attempts++;
        if (attempts > 200) {
          clearInterval(timer);
	  var Bokeh = get_bokeh(root)
	  if (Bokeh == null || Bokeh.Panel == null) {
            console.warn("Panel: ERROR: Unable to run Panel code because Bokeh or Panel library is missing");
	  } else {
	    console.warn("Panel: WARNING: Attempting to render but not all required libraries could be resolved.")
	    embed_document(root)
	  }
        }
      }
    }, 25, root)
  }
})(window);</script>







<style>*[data-root-id],
*[data-root-id] > * {
  box-sizing: border-box;
  font-family: var(--jp-ui-font-family);
  font-size: var(--jp-ui-font-size1);
  color: var(--vscode-editor-foreground, var(--jp-ui-font-color1));
}

/* Override VSCode background color */
.cell-output-ipywidget-background:has(
    > .cell-output-ipywidget-background > .lm-Widget > *[data-root-id]
  ),
.cell-output-ipywidget-background:has(> .lm-Widget > *[data-root-id]) {
  background-color: transparent !important;
}
</style>







<div id='4634f3b6-25f0-4d47-8508-2bc9622897b7'>
  <div id="bc800666-e635-468c-aff5-45ece95faa1f" data-root-id="4634f3b6-25f0-4d47-8508-2bc9622897b7" style="display: contents;"></div>
</div>
<script type="application/javascript">(function(root) {
  var docs_json = {"43a0692b-5011-4717-a1c4-8e9a9629d983":{"version":"3.3.4","title":"Bokeh Application","roots":[{"type":"object","name":"panel.models.layout.Column","id":"4634f3b6-25f0-4d47-8508-2bc9622897b7","attributes":{"name":"Column00149","stylesheets":["\n:host(.pn-loading.pn-arc):before, .pn-loading.pn-arc:before {\n  background-image: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHN0eWxlPSJtYXJnaW46IGF1dG87IGJhY2tncm91bmQ6IG5vbmU7IGRpc3BsYXk6IGJsb2NrOyBzaGFwZS1yZW5kZXJpbmc6IGF1dG87IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiPiAgPGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjYzNjM2MzIiBzdHJva2Utd2lkdGg9IjEwIiByPSIzNSIgc3Ryb2tlLWRhc2hhcnJheT0iMTY0LjkzMzYxNDMxMzQ2NDE1IDU2Ljk3Nzg3MTQzNzgyMTM4Ij4gICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjFzIiB2YWx1ZXM9IjAgNTAgNTA7MzYwIDUwIDUwIiBrZXlUaW1lcz0iMDsxIj48L2FuaW1hdGVUcmFuc2Zvcm0+ICA8L2NpcmNsZT48L3N2Zz4=\");\n  background-size: auto calc(min(50%, 400px));\n}",{"type":"object","name":"ImportedStyleSheet","id":"f978c45e-750e-41ae-a238-6097dda608d7","attributes":{"url":"https://cdn.holoviz.org/panel/1.3.8/dist/css/loading.css"}},{"type":"object","name":"ImportedStyleSheet","id":"78a92b2b-8289-4354-bc88-2fd88f5a4cef","attributes":{"url":"https://cdn.holoviz.org/panel/1.3.8/dist/css/listpanel.css"}},{"type":"object","name":"ImportedStyleSheet","id":"c69024fd-f7c1-451e-ab6b-6da8124fa167","attributes":{"url":"https://cdn.holoviz.org/panel/1.3.8/dist/bundled/theme/default.css"}},{"type":"object","name":"ImportedStyleSheet","id":"adbb8dfb-da4d-4bc2-8dd3-1fd793828f73","attributes":{"url":"https://cdn.holoviz.org/panel/1.3.8/dist/bundled/theme/native.css"}}],"margin":0,"align":"start","children":[{"type":"object","name":"TextInput","id":"6d1a8de2-d52a-4d29-aada-58b606d3f4ab","attributes":{"stylesheets":["\n:host(.pn-loading.pn-arc):before, .pn-loading.pn-arc:before {\n  background-image: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHN0eWxlPSJtYXJnaW46IGF1dG87IGJhY2tncm91bmQ6IG5vbmU7IGRpc3BsYXk6IGJsb2NrOyBzaGFwZS1yZW5kZXJpbmc6IGF1dG87IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiPiAgPGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjYzNjM2MzIiBzdHJva2Utd2lkdGg9IjEwIiByPSIzNSIgc3Ryb2tlLWRhc2hhcnJheT0iMTY0LjkzMzYxNDMxMzQ2NDE1IDU2Ljk3Nzg3MTQzNzgyMTM4Ij4gICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjFzIiB2YWx1ZXM9IjAgNTAgNTA7MzYwIDUwIDUwIiBrZXlUaW1lcz0iMDsxIj48L2FuaW1hdGVUcmFuc2Zvcm0+ICA8L2NpcmNsZT48L3N2Zz4=\");\n  background-size: auto calc(min(50%, 400px));\n}",{"id":"f978c45e-750e-41ae-a238-6097dda608d7"},{"id":"c69024fd-f7c1-451e-ab6b-6da8124fa167"},{"id":"adbb8dfb-da4d-4bc2-8dd3-1fd793828f73"}],"width":300,"min_width":300,"margin":[5,10],"align":"start","placeholder":"Enter text here\u2026","max_length":5000}},{"type":"object","name":"Row","id":"be180bfb-dfab-4dec-962d-977c319e1f56","attributes":{"name":"Row00131","stylesheets":["\n:host(.pn-loading.pn-arc):before, .pn-loading.pn-arc:before {\n  background-image: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHN0eWxlPSJtYXJnaW46IGF1dG87IGJhY2tncm91bmQ6IG5vbmU7IGRpc3BsYXk6IGJsb2NrOyBzaGFwZS1yZW5kZXJpbmc6IGF1dG87IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiPiAgPGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjYzNjM2MzIiBzdHJva2Utd2lkdGg9IjEwIiByPSIzNSIgc3Ryb2tlLWRhc2hhcnJheT0iMTY0LjkzMzYxNDMxMzQ2NDE1IDU2Ljk3Nzg3MTQzNzgyMTM4Ij4gICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjFzIiB2YWx1ZXM9IjAgNTAgNTA7MzYwIDUwIDUwIiBrZXlUaW1lcz0iMDsxIj48L2FuaW1hdGVUcmFuc2Zvcm0+ICA8L2NpcmNsZT48L3N2Zz4=\");\n  background-size: auto calc(min(50%, 400px));\n}",{"id":"f978c45e-750e-41ae-a238-6097dda608d7"},{"id":"78a92b2b-8289-4354-bc88-2fd88f5a4cef"},{"id":"c69024fd-f7c1-451e-ab6b-6da8124fa167"},{"id":"adbb8dfb-da4d-4bc2-8dd3-1fd793828f73"}],"margin":0,"align":"start","children":[{"type":"object","name":"panel.models.widgets.Button","id":"95e440d6-c4f5-4896-aae8-2bc30a5fb3f0","attributes":{"js_event_callbacks":{"type":"map","entries":[["button_click",[{"type":"object","name":"CustomJS","id":"2cfb8c3e-112e-44c1-8d96-8bc8ea48c597","attributes":{"tags":[[133341238969584,[null,"event:button_click"],[null,"loading"]]],"args":{"type":"map","entries":[["bidirectional",false],["properties",{"type":"map","entries":[["event:button_click","loading"]]}],["source",{"id":"95e440d6-c4f5-4896-aae8-2bc30a5fb3f0"}],["target",{"type":"object","name":"panel.models.layout.Column","id":"ceaeec37-21c8-45e6-8688-cfe7e2cda3e8","attributes":{"name":"Column00136","stylesheets":["\n:host(.pn-loading.pn-arc):before, .pn-loading.pn-arc:before {\n  background-image: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHN0eWxlPSJtYXJnaW46IGF1dG87IGJhY2tncm91bmQ6IG5vbmU7IGRpc3BsYXk6IGJsb2NrOyBzaGFwZS1yZW5kZXJpbmc6IGF1dG87IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiPiAgPGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjYzNjM2MzIiBzdHJva2Utd2lkdGg9IjEwIiByPSIzNSIgc3Ryb2tlLWRhc2hhcnJheT0iMTY0LjkzMzYxNDMxMzQ2NDE1IDU2Ljk3Nzg3MTQzNzgyMTM4Ij4gICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjFzIiB2YWx1ZXM9IjAgNTAgNTA7MzYwIDUwIDUwIiBrZXlUaW1lcz0iMDsxIj48L2FuaW1hdGVUcmFuc2Zvcm0+ICA8L2NpcmNsZT48L3N2Zz4=\");\n  background-size: auto calc(min(50%, 400px));\n}",{"id":"f978c45e-750e-41ae-a238-6097dda608d7"},{"id":"78a92b2b-8289-4354-bc88-2fd88f5a4cef"},{"id":"c69024fd-f7c1-451e-ab6b-6da8124fa167"},{"id":"adbb8dfb-da4d-4bc2-8dd3-1fd793828f73"}],"height":300,"min_height":300,"margin":0,"align":"start","children":[{"type":"object","name":"panel.models.layout.Column","id":"dd2ec74f-a839-45e1-9a6c-d2638ba6f2de","attributes":{"name":"Column00148","stylesheets":["\n:host(.pn-loading.pn-arc):before, .pn-loading.pn-arc:before {\n  background-image: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHN0eWxlPSJtYXJnaW46IGF1dG87IGJhY2tncm91bmQ6IG5vbmU7IGRpc3BsYXk6IGJsb2NrOyBzaGFwZS1yZW5kZXJpbmc6IGF1dG87IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiPiAgPGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjYzNjM2MzIiBzdHJva2Utd2lkdGg9IjEwIiByPSIzNSIgc3Ryb2tlLWRhc2hhcnJheT0iMTY0LjkzMzYxNDMxMzQ2NDE1IDU2Ljk3Nzg3MTQzNzgyMTM4Ij4gICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjFzIiB2YWx1ZXM9IjAgNTAgNTA7MzYwIDUwIDUwIiBrZXlUaW1lcz0iMDsxIj48L2FuaW1hdGVUcmFuc2Zvcm0+ICA8L2NpcmNsZT48L3N2Zz4=\");\n  background-size: auto calc(min(50%, 400px));\n}",{"id":"f978c45e-750e-41ae-a238-6097dda608d7"},{"id":"78a92b2b-8289-4354-bc88-2fd88f5a4cef"},{"id":"c69024fd-f7c1-451e-ab6b-6da8124fa167"},{"id":"adbb8dfb-da4d-4bc2-8dd3-1fd793828f73"}],"margin":0,"align":"start","children":[{"type":"object","name":"Row","id":"7ebab0aa-5b81-4a1b-8aa3-fe1266c3791c","attributes":{"name":"Row00142","stylesheets":["\n:host(.pn-loading.pn-arc):before, .pn-loading.pn-arc:before {\n  background-image: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHN0eWxlPSJtYXJnaW46IGF1dG87IGJhY2tncm91bmQ6IG5vbmU7IGRpc3BsYXk6IGJsb2NrOyBzaGFwZS1yZW5kZXJpbmc6IGF1dG87IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiPiAgPGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjYzNjM2MzIiBzdHJva2Utd2lkdGg9IjEwIiByPSIzNSIgc3Ryb2tlLWRhc2hhcnJheT0iMTY0LjkzMzYxNDMxMzQ2NDE1IDU2Ljk3Nzg3MTQzNzgyMTM4Ij4gICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjFzIiB2YWx1ZXM9IjAgNTAgNTA7MzYwIDUwIDUwIiBrZXlUaW1lcz0iMDsxIj48L2FuaW1hdGVUcmFuc2Zvcm0+ICA8L2NpcmNsZT48L3N2Zz4=\");\n  background-size: auto calc(min(50%, 400px));\n}",{"id":"f978c45e-750e-41ae-a238-6097dda608d7"},{"id":"78a92b2b-8289-4354-bc88-2fd88f5a4cef"},{"id":"c69024fd-f7c1-451e-ab6b-6da8124fa167"},{"id":"adbb8dfb-da4d-4bc2-8dd3-1fd793828f73"}],"margin":0,"align":"start","children":[{"type":"object","name":"panel.models.markup.HTML","id":"5efa6609-7a86-4aba-8fbf-dd02b9f0963b","attributes":{"css_classes":["markdown"],"stylesheets":["\n:host(.pn-loading.pn-arc):before, .pn-loading.pn-arc:before {\n  background-image: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHN0eWxlPSJtYXJnaW46IGF1dG87IGJhY2tncm91bmQ6IG5vbmU7IGRpc3BsYXk6IGJsb2NrOyBzaGFwZS1yZW5kZXJpbmc6IGF1dG87IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiPiAgPGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjYzNjM2MzIiBzdHJva2Utd2lkdGg9IjEwIiByPSIzNSIgc3Ryb2tlLWRhc2hhcnJheT0iMTY0LjkzMzYxNDMxMzQ2NDE1IDU2Ljk3Nzg3MTQzNzgyMTM4Ij4gICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjFzIiB2YWx1ZXM9IjAgNTAgNTA7MzYwIDUwIDUwIiBrZXlUaW1lcz0iMDsxIj48L2FuaW1hdGVUcmFuc2Zvcm0+ICA8L2NpcmNsZT48L3N2Zz4=\");\n  background-size: auto calc(min(50%, 400px));\n}",{"id":"f978c45e-750e-41ae-a238-6097dda608d7"},{"type":"object","name":"ImportedStyleSheet","id":"4c65d82e-df5f-4fa8-9261-eba77012d20a","attributes":{"url":"https://cdn.holoviz.org/panel/1.3.8/dist/css/markdown.css"}},{"id":"c69024fd-f7c1-451e-ab6b-6da8124fa167"},{"id":"adbb8dfb-da4d-4bc2-8dd3-1fd793828f73"}],"margin":[5,10],"align":"start","text":"&lt;p&gt;User:&lt;/p&gt;\n"}},{"type":"object","name":"panel.models.markup.HTML","id":"4ef79063-7ddf-4dd4-8b5e-711c495a33af","attributes":{"css_classes":["markdown"],"stylesheets":["\n:host(.pn-loading.pn-arc):before, .pn-loading.pn-arc:before {\n  background-image: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHN0eWxlPSJtYXJnaW46IGF1dG87IGJhY2tncm91bmQ6IG5vbmU7IGRpc3BsYXk6IGJsb2NrOyBzaGFwZS1yZW5kZXJpbmc6IGF1dG87IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiPiAgPGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjYzNjM2MzIiBzdHJva2Utd2lkdGg9IjEwIiByPSIzNSIgc3Ryb2tlLWRhc2hhcnJheT0iMTY0LjkzMzYxNDMxMzQ2NDE1IDU2Ljk3Nzg3MTQzNzgyMTM4Ij4gICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjFzIiB2YWx1ZXM9IjAgNTAgNTA7MzYwIDUwIDUwIiBrZXlUaW1lcz0iMDsxIj48L2FuaW1hdGVUcmFuc2Zvcm0+ICA8L2NpcmNsZT48L3N2Zz4=\");\n  background-size: auto calc(min(50%, 400px));\n}",{"id":"f978c45e-750e-41ae-a238-6097dda608d7"},{"id":"4c65d82e-df5f-4fa8-9261-eba77012d20a"},{"id":"c69024fd-f7c1-451e-ab6b-6da8124fa167"},{"id":"adbb8dfb-da4d-4bc2-8dd3-1fd793828f73"}],"width":600,"min_width":600,"margin":[5,10],"align":"start"}}]}},{"type":"object","name":"Row","id":"d2b8b41a-8d2a-495d-9f2c-abd3efbd6790","attributes":{"name":"Row00147","stylesheets":["\n:host(.pn-loading.pn-arc):before, .pn-loading.pn-arc:before {\n  background-image: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHN0eWxlPSJtYXJnaW46IGF1dG87IGJhY2tncm91bmQ6IG5vbmU7IGRpc3BsYXk6IGJsb2NrOyBzaGFwZS1yZW5kZXJpbmc6IGF1dG87IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiPiAgPGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjYzNjM2MzIiBzdHJva2Utd2lkdGg9IjEwIiByPSIzNSIgc3Ryb2tlLWRhc2hhcnJheT0iMTY0LjkzMzYxNDMxMzQ2NDE1IDU2Ljk3Nzg3MTQzNzgyMTM4Ij4gICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjFzIiB2YWx1ZXM9IjAgNTAgNTA7MzYwIDUwIDUwIiBrZXlUaW1lcz0iMDsxIj48L2FuaW1hdGVUcmFuc2Zvcm0+ICA8L2NpcmNsZT48L3N2Zz4=\");\n  background-size: auto calc(min(50%, 400px));\n}",{"id":"f978c45e-750e-41ae-a238-6097dda608d7"},{"id":"78a92b2b-8289-4354-bc88-2fd88f5a4cef"},{"id":"c69024fd-f7c1-451e-ab6b-6da8124fa167"},{"id":"adbb8dfb-da4d-4bc2-8dd3-1fd793828f73"}],"margin":0,"align":"start","children":[{"type":"object","name":"panel.models.markup.HTML","id":"dc80a5f4-4dac-4391-b8d7-f8d9856a6f47","attributes":{"css_classes":["markdown"],"stylesheets":["\n:host(.pn-loading.pn-arc):before, .pn-loading.pn-arc:before {\n  background-image: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHN0eWxlPSJtYXJnaW46IGF1dG87IGJhY2tncm91bmQ6IG5vbmU7IGRpc3BsYXk6IGJsb2NrOyBzaGFwZS1yZW5kZXJpbmc6IGF1dG87IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiPiAgPGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjYzNjM2MzIiBzdHJva2Utd2lkdGg9IjEwIiByPSIzNSIgc3Ryb2tlLWRhc2hhcnJheT0iMTY0LjkzMzYxNDMxMzQ2NDE1IDU2Ljk3Nzg3MTQzNzgyMTM4Ij4gICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjFzIiB2YWx1ZXM9IjAgNTAgNTA7MzYwIDUwIDUwIiBrZXlUaW1lcz0iMDsxIj48L2FuaW1hdGVUcmFuc2Zvcm0+ICA8L2NpcmNsZT48L3N2Zz4=\");\n  background-size: auto calc(min(50%, 400px));\n}",{"id":"f978c45e-750e-41ae-a238-6097dda608d7"},{"id":"4c65d82e-df5f-4fa8-9261-eba77012d20a"},{"id":"c69024fd-f7c1-451e-ab6b-6da8124fa167"},{"id":"adbb8dfb-da4d-4bc2-8dd3-1fd793828f73"}],"margin":[5,10],"align":"start","text":"&lt;p&gt;Assistant:&lt;/p&gt;\n"}},{"type":"object","name":"panel.models.markup.HTML","id":"bdfbdd57-dd78-401b-be2a-594bfd89da62","attributes":{"css_classes":["markdown"],"styles":{"type":"map","entries":[["background-color","#F6F6F6"]]},"stylesheets":["\n:host(.pn-loading.pn-arc):before, .pn-loading.pn-arc:before {\n  background-image: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHN0eWxlPSJtYXJnaW46IGF1dG87IGJhY2tncm91bmQ6IG5vbmU7IGRpc3BsYXk6IGJsb2NrOyBzaGFwZS1yZW5kZXJpbmc6IGF1dG87IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiPiAgPGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjYzNjM2MzIiBzdHJva2Utd2lkdGg9IjEwIiByPSIzNSIgc3Ryb2tlLWRhc2hhcnJheT0iMTY0LjkzMzYxNDMxMzQ2NDE1IDU2Ljk3Nzg3MTQzNzgyMTM4Ij4gICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjFzIiB2YWx1ZXM9IjAgNTAgNTA7MzYwIDUwIDUwIiBrZXlUaW1lcz0iMDsxIj48L2FuaW1hdGVUcmFuc2Zvcm0+ICA8L2NpcmNsZT48L3N2Zz4=\");\n  background-size: auto calc(min(50%, 400px));\n}",{"id":"f978c45e-750e-41ae-a238-6097dda608d7"},{"id":"4c65d82e-df5f-4fa8-9261-eba77012d20a"},{"id":"c69024fd-f7c1-451e-ab6b-6da8124fa167"},{"id":"adbb8dfb-da4d-4bc2-8dd3-1fd793828f73"}],"width":600,"min_width":600,"margin":[5,10],"align":"start","text":"&lt;p&gt;Hello! In this case, we&#x27;re looking at a significant legal question regarding the duty of honesty in contractual obligations. The core issue revolves around whether Canadian common law requires parties to perform their contractual duties honestly and, if so, whether the respondents breached this duty. The Supreme Court of Canada answered both questions affirmatively, establishing a duty to perform contracts honestly as a general organizing principle of the common law of contract. This principle underpins and informs various specific legal doctrines where obligations of good faith contractual performance are recognized [#1].&lt;/p&gt;\n&lt;p&gt;The case involves Mr. Bhasin, who operated a business under a dealership agreement with Canadian American Financial Corp. (Can-Am). After years of successful partnership, Can-Am decided not to renew the agreement, leading to litigation. The trial judge found that Can-Am acted dishonestly with Mr. Bhasin in the lead-up to the non-renewal of the contract, a decision that was upheld by the Supreme Court. The Court recognized a general duty of honesty in contractual performance, marking a modest, incremental step in the development of Canadian common law [#94].&lt;/p&gt;\n&lt;p&gt;This decision is significant because it clarifies that while parties to a contract are not required to disclose material facts or subordinate their interests to those of the other party, they must not lie or otherwise knowingly mislead each other about matters directly linked to the performance of the contract. This duty of honest performance is seen as a minimum standard that all contracting parties must meet, enhancing certainty and coherence in commercial dealings [#86].&lt;/p&gt;\n&lt;p&gt;Feel free to ask more specific questions about the case or its implications!&lt;/p&gt;\n"}}]}}]}}]}}]]},"code":"\n    if ('event:button_click'.startsWith('event:')) {\n      var value = true\n    } else {\n      var value = source['event:button_click'];\n      value = value;\n    }\n    if (typeof value !== 'boolean' || source.labels !== ['Loading']) {\n      value = true\n    }\n    var css_classes = target.css_classes.slice()\n    var loading_css = ['pn-loading', 'pn-arc']\n    if (value) {\n      for (var css of loading_css) {\n        if (!(css in css_classes)) {\n          css_classes.push(css)\n        }\n      }\n    } else {\n     for (var css of loading_css) {\n        var index = css_classes.indexOf(css)\n        if (index > -1) {\n          css_classes.splice(index, 1)\n        }\n      }\n    }\n    target['css_classes'] = css_classes\n    "}}]]]},"subscribed_events":{"type":"set","entries":["button_click"]},"css_classes":["solid"],"stylesheets":["\n:host(.pn-loading.pn-arc):before, .pn-loading.pn-arc:before {\n  background-image: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHN0eWxlPSJtYXJnaW46IGF1dG87IGJhY2tncm91bmQ6IG5vbmU7IGRpc3BsYXk6IGJsb2NrOyBzaGFwZS1yZW5kZXJpbmc6IGF1dG87IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiPiAgPGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjYzNjM2MzIiBzdHJva2Utd2lkdGg9IjEwIiByPSIzNSIgc3Ryb2tlLWRhc2hhcnJheT0iMTY0LjkzMzYxNDMxMzQ2NDE1IDU2Ljk3Nzg3MTQzNzgyMTM4Ij4gICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjFzIiB2YWx1ZXM9IjAgNTAgNTA7MzYwIDUwIDUwIiBrZXlUaW1lcz0iMDsxIj48L2FuaW1hdGVUcmFuc2Zvcm0+ICA8L2NpcmNsZT48L3N2Zz4=\");\n  background-size: auto calc(min(50%, 400px));\n}",{"id":"f978c45e-750e-41ae-a238-6097dda608d7"},{"type":"object","name":"ImportedStyleSheet","id":"611f42d5-ef5f-4971-b60d-3e233b9aa5ae","attributes":{"url":"https://cdn.holoviz.org/panel/1.3.8/dist/css/button.css"}},{"id":"c69024fd-f7c1-451e-ab6b-6da8124fa167"},{"id":"adbb8dfb-da4d-4bc2-8dd3-1fd793828f73"}],"margin":[5,10],"align":"start","label":"Chat!"}}]}},{"id":"ceaeec37-21c8-45e6-8688-cfe7e2cda3e8"}]}},{"type":"object","name":"panel.models.comm_manager.CommManager","id":"3de5a51a-fbac-4fd4-a7bd-fd3ec90752c2","attributes":{"plot_id":"4634f3b6-25f0-4d47-8508-2bc9622897b7","comm_id":"acb4253c909e4866b7e705de774919d9","client_comm_id":"967b4b2a2ad3497fb1b7b5551705dd97"}}],"defs":[{"type":"model","name":"ReactiveHTML1"},{"type":"model","name":"FlexBox1","properties":[{"name":"align_content","kind":"Any","default":"flex-start"},{"name":"align_items","kind":"Any","default":"flex-start"},{"name":"flex_direction","kind":"Any","default":"row"},{"name":"flex_wrap","kind":"Any","default":"wrap"},{"name":"justify_content","kind":"Any","default":"flex-start"}]},{"type":"model","name":"FloatPanel1","properties":[{"name":"config","kind":"Any","default":{"type":"map"}},{"name":"contained","kind":"Any","default":true},{"name":"position","kind":"Any","default":"right-top"},{"name":"offsetx","kind":"Any","default":null},{"name":"offsety","kind":"Any","default":null},{"name":"theme","kind":"Any","default":"primary"},{"name":"status","kind":"Any","default":"normalized"}]},{"type":"model","name":"GridStack1","properties":[{"name":"mode","kind":"Any","default":"warn"},{"name":"ncols","kind":"Any","default":null},{"name":"nrows","kind":"Any","default":null},{"name":"allow_resize","kind":"Any","default":true},{"name":"allow_drag","kind":"Any","default":true},{"name":"state","kind":"Any","default":[]}]},{"type":"model","name":"drag1","properties":[{"name":"slider_width","kind":"Any","default":5},{"name":"slider_color","kind":"Any","default":"black"},{"name":"value","kind":"Any","default":50}]},{"type":"model","name":"click1","properties":[{"name":"terminal_output","kind":"Any","default":""},{"name":"debug_name","kind":"Any","default":""},{"name":"clears","kind":"Any","default":0}]},{"type":"model","name":"copy_to_clipboard1","properties":[{"name":"fill","kind":"Any","default":"none"},{"name":"value","kind":"Any","default":null}]},{"type":"model","name":"FastWrapper1","properties":[{"name":"object","kind":"Any","default":null},{"name":"style","kind":"Any","default":null}]},{"type":"model","name":"NotificationAreaBase1","properties":[{"name":"js_events","kind":"Any","default":{"type":"map"}},{"name":"position","kind":"Any","default":"bottom-right"},{"name":"_clear","kind":"Any","default":0}]},{"type":"model","name":"NotificationArea1","properties":[{"name":"js_events","kind":"Any","default":{"type":"map"}},{"name":"notifications","kind":"Any","default":[]},{"name":"position","kind":"Any","default":"bottom-right"},{"name":"_clear","kind":"Any","default":0},{"name":"types","kind":"Any","default":[{"type":"map","entries":[["type","warning"],["background","#ffc107"],["icon",{"type":"map","entries":[["className","fas fa-exclamation-triangle"],["tagName","i"],["color","white"]]}]]},{"type":"map","entries":[["type","info"],["background","#007bff"],["icon",{"type":"map","entries":[["className","fas fa-info-circle"],["tagName","i"],["color","white"]]}]]}]}]},{"type":"model","name":"Notification","properties":[{"name":"background","kind":"Any","default":null},{"name":"duration","kind":"Any","default":3000},{"name":"icon","kind":"Any","default":null},{"name":"message","kind":"Any","default":""},{"name":"notification_type","kind":"Any","default":null},{"name":"_destroyed","kind":"Any","default":false}]},{"type":"model","name":"TemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"BootstrapTemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]},{"type":"model","name":"MaterialTemplateActions1","properties":[{"name":"open_modal","kind":"Any","default":0},{"name":"close_modal","kind":"Any","default":0}]}]}};
  var render_items = [{"docid":"43a0692b-5011-4717-a1c4-8e9a9629d983","roots":{"4634f3b6-25f0-4d47-8508-2bc9622897b7":"bc800666-e635-468c-aff5-45ece95faa1f"},"root_ids":["4634f3b6-25f0-4d47-8508-2bc9622897b7"]}];
  var docs = Object.values(docs_json)
  if (!docs) {
    return
  }
  const py_version = docs[0].version.replace('rc', '-rc.').replace('.dev', '-dev.')
  function embed_document(root) {
    var Bokeh = get_bokeh(root)
    Bokeh.embed.embed_items_notebook(docs_json, render_items);
    for (const render_item of render_items) {
      for (const root_id of render_item.root_ids) {
	const id_el = document.getElementById(root_id)
	if (id_el.children.length && (id_el.children[0].className === 'bk-root')) {
	  const root_el = id_el.children[0]
	  root_el.id = root_el.id + '-rendered'
	}
      }
    }
  }
  function get_bokeh(root) {
    if (root.Bokeh === undefined) {
      return null
    } else if (root.Bokeh.version !== py_version) {
      if (root.Bokeh.versions === undefined || !root.Bokeh.versions.has(py_version)) {
	return null
      }
      return root.Bokeh.versions.get(py_version);
    } else if (root.Bokeh.version === py_version) {
      return root.Bokeh
    }
    return null
  }
  function is_loaded(root) {
    var Bokeh = get_bokeh(root)
    return (Bokeh != null && Bokeh.Panel !== undefined)
  }
  if (is_loaded(root)) {
    embed_document(root);
  } else {
    var attempts = 0;
    var timer = setInterval(function(root) {
      if (is_loaded(root)) {
        clearInterval(timer);
        embed_document(root);
      } else if (document.readyState == "complete") {
        attempts++;
        if (attempts > 200) {
          clearInterval(timer);
	  var Bokeh = get_bokeh(root)
	  if (Bokeh == null || Bokeh.Panel == null) {
            console.warn("Panel: ERROR: Unable to run Panel code because Bokeh or Panel library is missing");
	  } else {
	    console.warn("Panel: WARNING: Attempting to render but not all required libraries could be resolved.")
	    embed_document(root)
	  }
        }
      }
    }, 25, root)
  }
})(window);</script>




```python
!apt-get update
!apt-get install texlive-xetex texlive-fonts-recommended texlive-plain-generic
!apt-get install texlive-xetex texlive-fonts-recommended texlive-generic-recommended
!pip install nbconvert

```

    Get:1 https://cloud.r-project.org/bin/linux/ubuntu jammy-cran40/ InRelease [3,626 B]
    Get:2 http://security.ubuntu.com/ubuntu jammy-security InRelease [110 kB]
    Get:3 https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2204/x86_64  InRelease [1,581 B]
    Hit:4 http://archive.ubuntu.com/ubuntu jammy InRelease
    Get:5 http://archive.ubuntu.com/ubuntu jammy-updates InRelease [119 kB]
    Get:6 https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2204/x86_64  Packages [770 kB]
    Hit:7 https://ppa.launchpadcontent.net/c2d4u.team/c2d4u4.0+/ubuntu jammy InRelease
    Hit:8 https://ppa.launchpadcontent.net/deadsnakes/ppa/ubuntu jammy InRelease
    Hit:9 https://ppa.launchpadcontent.net/graphics-drivers/ppa/ubuntu jammy InRelease
    Get:10 http://security.ubuntu.com/ubuntu jammy-security/universe amd64 Packages [1,080 kB]
    Get:11 http://archive.ubuntu.com/ubuntu jammy-backports InRelease [109 kB]
    Hit:12 https://ppa.launchpadcontent.net/ubuntugis/ppa/ubuntu jammy InRelease
    Get:13 http://security.ubuntu.com/ubuntu jammy-security/main amd64 Packages [1,570 kB]
    Get:14 http://archive.ubuntu.com/ubuntu jammy-updates/restricted amd64 Packages [2,056 kB]
    Get:15 http://archive.ubuntu.com/ubuntu jammy-updates/universe amd64 Packages [1,354 kB]
    Get:16 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 Packages [1,883 kB]
    Get:17 http://archive.ubuntu.com/ubuntu jammy-backports/universe amd64 Packages [33.3 kB]
    Fetched 9,090 kB in 3s (3,617 kB/s)
    Reading package lists... Done
    Reading package lists... Done
    Building dependency tree... Done
    Reading state information... Done
    The following additional packages will be installed:
      dvisvgm fonts-droid-fallback fonts-lato fonts-lmodern fonts-noto-mono fonts-texgyre
      fonts-urw-base35 libapache-pom-java libcommons-logging-java libcommons-parent-java
      libfontbox-java libfontenc1 libgs9 libgs9-common libidn12 libijs-0.35 libjbig2dec0 libkpathsea6
      libpdfbox-java libptexenc1 libruby3.0 libsynctex2 libteckit0 libtexlua53 libtexluajit2 libwoff1
      libzzip-0-13 lmodern poppler-data preview-latex-style rake ruby ruby-net-telnet ruby-rubygems
      ruby-webrick ruby-xmlrpc ruby3.0 rubygems-integration t1utils teckit tex-common tex-gyre
      texlive-base texlive-binaries texlive-latex-base texlive-latex-extra texlive-latex-recommended
      texlive-pictures tipa xfonts-encodings xfonts-utils
    Suggested packages:
      fonts-noto fonts-freefont-otf | fonts-freefont-ttf libavalon-framework-java
      libcommons-logging-java-doc libexcalibur-logkit-java liblog4j1.2-java poppler-utils ghostscript
      fonts-japanese-mincho | fonts-ipafont-mincho fonts-japanese-gothic | fonts-ipafont-gothic
      fonts-arphic-ukai fonts-arphic-uming fonts-nanum ri ruby-dev bundler debhelper gv
      | postscript-viewer perl-tk xpdf | pdf-viewer xzdec texlive-fonts-recommended-doc
      texlive-latex-base-doc python3-pygments icc-profiles libfile-which-perl
      libspreadsheet-parseexcel-perl texlive-latex-extra-doc texlive-latex-recommended-doc
      texlive-luatex texlive-pstricks dot2tex prerex texlive-pictures-doc vprerex default-jre-headless
      tipa-doc
    The following NEW packages will be installed:
      dvisvgm fonts-droid-fallback fonts-lato fonts-lmodern fonts-noto-mono fonts-texgyre
      fonts-urw-base35 libapache-pom-java libcommons-logging-java libcommons-parent-java
      libfontbox-java libfontenc1 libgs9 libgs9-common libidn12 libijs-0.35 libjbig2dec0 libkpathsea6
      libpdfbox-java libptexenc1 libruby3.0 libsynctex2 libteckit0 libtexlua53 libtexluajit2 libwoff1
      libzzip-0-13 lmodern poppler-data preview-latex-style rake ruby ruby-net-telnet ruby-rubygems
      ruby-webrick ruby-xmlrpc ruby3.0 rubygems-integration t1utils teckit tex-common tex-gyre
      texlive-base texlive-binaries texlive-fonts-recommended texlive-latex-base texlive-latex-extra
      texlive-latex-recommended texlive-pictures texlive-plain-generic texlive-xetex tipa
      xfonts-encodings xfonts-utils
    0 upgraded, 54 newly installed, 0 to remove and 45 not upgraded.
    Need to get 182 MB of archives.
    After this operation, 571 MB of additional disk space will be used.
    Get:1 http://archive.ubuntu.com/ubuntu jammy/main amd64 fonts-droid-fallback all 1:6.0.1r16-1.1build1 [1,805 kB]
    Get:2 http://archive.ubuntu.com/ubuntu jammy/main amd64 fonts-lato all 2.0-2.1 [2,696 kB]
    Get:3 http://archive.ubuntu.com/ubuntu jammy/main amd64 poppler-data all 0.4.11-1 [2,171 kB]
    Get:4 http://archive.ubuntu.com/ubuntu jammy/universe amd64 tex-common all 6.17 [33.7 kB]
    Get:5 http://archive.ubuntu.com/ubuntu jammy/main amd64 fonts-urw-base35 all 20200910-1 [6,367 kB]
    Get:6 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libgs9-common all 9.55.0~dfsg1-0ubuntu5.6 [751 kB]
    Get:7 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libidn12 amd64 1.38-4ubuntu1 [60.0 kB]
    Get:8 http://archive.ubuntu.com/ubuntu jammy/main amd64 libijs-0.35 amd64 0.35-15build2 [16.5 kB]
    Get:9 http://archive.ubuntu.com/ubuntu jammy/main amd64 libjbig2dec0 amd64 0.19-3build2 [64.7 kB]
    Get:10 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libgs9 amd64 9.55.0~dfsg1-0ubuntu5.6 [5,031 kB]
    Get:11 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libkpathsea6 amd64 2021.20210626.59705-1ubuntu0.2 [60.4 kB]
    Get:12 http://archive.ubuntu.com/ubuntu jammy/main amd64 libwoff1 amd64 1.0.2-1build4 [45.2 kB]
    Get:13 http://archive.ubuntu.com/ubuntu jammy/universe amd64 dvisvgm amd64 2.13.1-1 [1,221 kB]
    Get:14 http://archive.ubuntu.com/ubuntu jammy/universe amd64 fonts-lmodern all 2.004.5-6.1 [4,532 kB]
    Get:15 http://archive.ubuntu.com/ubuntu jammy/main amd64 fonts-noto-mono all 20201225-1build1 [397 kB]
    Get:16 http://archive.ubuntu.com/ubuntu jammy/universe amd64 fonts-texgyre all 20180621-3.1 [10.2 MB]
    Get:17 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libapache-pom-java all 18-1 [4,720 B]
    Get:18 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libcommons-parent-java all 43-1 [10.8 kB]
    Get:19 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libcommons-logging-java all 1.2-2 [60.3 kB]
    Get:20 http://archive.ubuntu.com/ubuntu jammy/main amd64 libfontenc1 amd64 1:1.1.4-1build3 [14.7 kB]
    Get:21 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libptexenc1 amd64 2021.20210626.59705-1ubuntu0.2 [39.1 kB]
    Get:22 http://archive.ubuntu.com/ubuntu jammy/main amd64 rubygems-integration all 1.18 [5,336 B]
    Get:23 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 ruby3.0 amd64 3.0.2-7ubuntu2.4 [50.1 kB]
    Get:24 http://archive.ubuntu.com/ubuntu jammy/main amd64 ruby-rubygems all 3.3.5-2 [228 kB]
    Get:25 http://archive.ubuntu.com/ubuntu jammy/main amd64 ruby amd64 1:3.0~exp1 [5,100 B]
    Get:26 http://archive.ubuntu.com/ubuntu jammy/main amd64 rake all 13.0.6-2 [61.7 kB]
    Get:27 http://archive.ubuntu.com/ubuntu jammy/main amd64 ruby-net-telnet all 0.1.1-2 [12.6 kB]
    Get:28 http://archive.ubuntu.com/ubuntu jammy/universe amd64 ruby-webrick all 1.7.0-3 [51.8 kB]
    Get:29 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 ruby-xmlrpc all 0.3.2-1ubuntu0.1 [24.9 kB]
    Get:30 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libruby3.0 amd64 3.0.2-7ubuntu2.4 [5,113 kB]
    Get:31 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libsynctex2 amd64 2021.20210626.59705-1ubuntu0.2 [55.6 kB]
    Get:32 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libteckit0 amd64 2.5.11+ds1-1 [421 kB]
    Get:33 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libtexlua53 amd64 2021.20210626.59705-1ubuntu0.2 [120 kB]
    Get:34 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libtexluajit2 amd64 2021.20210626.59705-1ubuntu0.2 [267 kB]
    Get:35 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libzzip-0-13 amd64 0.13.72+dfsg.1-1.1 [27.0 kB]
    Get:36 http://archive.ubuntu.com/ubuntu jammy/main amd64 xfonts-encodings all 1:1.0.5-0ubuntu2 [578 kB]
    Get:37 http://archive.ubuntu.com/ubuntu jammy/main amd64 xfonts-utils amd64 1:7.7+6build2 [94.6 kB]
    Get:38 http://archive.ubuntu.com/ubuntu jammy/universe amd64 lmodern all 2.004.5-6.1 [9,471 kB]
    Get:39 http://archive.ubuntu.com/ubuntu jammy/universe amd64 preview-latex-style all 12.2-1ubuntu1 [185 kB]
    Get:40 http://archive.ubuntu.com/ubuntu jammy/main amd64 t1utils amd64 1.41-4build2 [61.3 kB]
    Get:41 http://archive.ubuntu.com/ubuntu jammy/universe amd64 teckit amd64 2.5.11+ds1-1 [699 kB]
    Get:42 http://archive.ubuntu.com/ubuntu jammy/universe amd64 tex-gyre all 20180621-3.1 [6,209 kB]
    Get:43 http://archive.ubuntu.com/ubuntu jammy-updates/universe amd64 texlive-binaries amd64 2021.20210626.59705-1ubuntu0.2 [9,860 kB]
    Get:44 http://archive.ubuntu.com/ubuntu jammy/universe amd64 texlive-base all 2021.20220204-1 [21.0 MB]
    Get:45 http://archive.ubuntu.com/ubuntu jammy/universe amd64 texlive-fonts-recommended all 2021.20220204-1 [4,972 kB]
    Get:46 http://archive.ubuntu.com/ubuntu jammy/universe amd64 texlive-latex-base all 2021.20220204-1 [1,128 kB]
    Get:47 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libfontbox-java all 1:1.8.16-2 [207 kB]
    Get:48 http://archive.ubuntu.com/ubuntu jammy/universe amd64 libpdfbox-java all 1:1.8.16-2 [5,199 kB]
    Get:49 http://archive.ubuntu.com/ubuntu jammy/universe amd64 texlive-latex-recommended all 2021.20220204-1 [14.4 MB]
    Get:50 http://archive.ubuntu.com/ubuntu jammy/universe amd64 texlive-pictures all 2021.20220204-1 [8,720 kB]
    Get:51 http://archive.ubuntu.com/ubuntu jammy/universe amd64 texlive-latex-extra all 2021.20220204-1 [13.9 MB]
    Get:52 http://archive.ubuntu.com/ubuntu jammy/universe amd64 texlive-plain-generic all 2021.20220204-1 [27.5 MB]
    Get:53 http://archive.ubuntu.com/ubuntu jammy/universe amd64 tipa all 2:1.3-21 [2,967 kB]
    Get:54 http://archive.ubuntu.com/ubuntu jammy/universe amd64 texlive-xetex all 2021.20220204-1 [12.4 MB]
    Fetched 182 MB in 17s (10.9 MB/s)
    Extracting templates from packages: 100%
    Preconfiguring packages ...
    Selecting previously unselected package fonts-droid-fallback.
    (Reading database ... 121752 files and directories currently installed.)
    Preparing to unpack .../00-fonts-droid-fallback_1%3a6.0.1r16-1.1build1_all.deb ...
    Unpacking fonts-droid-fallback (1:6.0.1r16-1.1build1) ...
    Selecting previously unselected package fonts-lato.
    Preparing to unpack .../01-fonts-lato_2.0-2.1_all.deb ...
    Unpacking fonts-lato (2.0-2.1) ...
    Selecting previously unselected package poppler-data.
    Preparing to unpack .../02-poppler-data_0.4.11-1_all.deb ...
    Unpacking poppler-data (0.4.11-1) ...
    Selecting previously unselected package tex-common.
    Preparing to unpack .../03-tex-common_6.17_all.deb ...
    Unpacking tex-common (6.17) ...
    Selecting previously unselected package fonts-urw-base35.
    Preparing to unpack .../04-fonts-urw-base35_20200910-1_all.deb ...
    Unpacking fonts-urw-base35 (20200910-1) ...
    Selecting previously unselected package libgs9-common.
    Preparing to unpack .../05-libgs9-common_9.55.0~dfsg1-0ubuntu5.6_all.deb ...
    Unpacking libgs9-common (9.55.0~dfsg1-0ubuntu5.6) ...
    Selecting previously unselected package libidn12:amd64.
    Preparing to unpack .../06-libidn12_1.38-4ubuntu1_amd64.deb ...
    Unpacking libidn12:amd64 (1.38-4ubuntu1) ...
    Selecting previously unselected package libijs-0.35:amd64.
    Preparing to unpack .../07-libijs-0.35_0.35-15build2_amd64.deb ...
    Unpacking libijs-0.35:amd64 (0.35-15build2) ...
    Selecting previously unselected package libjbig2dec0:amd64.
    Preparing to unpack .../08-libjbig2dec0_0.19-3build2_amd64.deb ...
    Unpacking libjbig2dec0:amd64 (0.19-3build2) ...
    Selecting previously unselected package libgs9:amd64.
    Preparing to unpack .../09-libgs9_9.55.0~dfsg1-0ubuntu5.6_amd64.deb ...
    Unpacking libgs9:amd64 (9.55.0~dfsg1-0ubuntu5.6) ...
    Selecting previously unselected package libkpathsea6:amd64.
    Preparing to unpack .../10-libkpathsea6_2021.20210626.59705-1ubuntu0.2_amd64.deb ...
    Unpacking libkpathsea6:amd64 (2021.20210626.59705-1ubuntu0.2) ...
    Selecting previously unselected package libwoff1:amd64.
    Preparing to unpack .../11-libwoff1_1.0.2-1build4_amd64.deb ...
    Unpacking libwoff1:amd64 (1.0.2-1build4) ...
    Selecting previously unselected package dvisvgm.
    Preparing to unpack .../12-dvisvgm_2.13.1-1_amd64.deb ...
    Unpacking dvisvgm (2.13.1-1) ...
    Selecting previously unselected package fonts-lmodern.
    Preparing to unpack .../13-fonts-lmodern_2.004.5-6.1_all.deb ...
    Unpacking fonts-lmodern (2.004.5-6.1) ...
    Selecting previously unselected package fonts-noto-mono.
    Preparing to unpack .../14-fonts-noto-mono_20201225-1build1_all.deb ...
    Unpacking fonts-noto-mono (20201225-1build1) ...
    Selecting previously unselected package fonts-texgyre.
    Preparing to unpack .../15-fonts-texgyre_20180621-3.1_all.deb ...
    Unpacking fonts-texgyre (20180621-3.1) ...
    Selecting previously unselected package libapache-pom-java.
    Preparing to unpack .../16-libapache-pom-java_18-1_all.deb ...
    Unpacking libapache-pom-java (18-1) ...
    Selecting previously unselected package libcommons-parent-java.
    Preparing to unpack .../17-libcommons-parent-java_43-1_all.deb ...
    Unpacking libcommons-parent-java (43-1) ...
    Selecting previously unselected package libcommons-logging-java.
    Preparing to unpack .../18-libcommons-logging-java_1.2-2_all.deb ...
    Unpacking libcommons-logging-java (1.2-2) ...
    Selecting previously unselected package libfontenc1:amd64.
    Preparing to unpack .../19-libfontenc1_1%3a1.1.4-1build3_amd64.deb ...
    Unpacking libfontenc1:amd64 (1:1.1.4-1build3) ...
    Selecting previously unselected package libptexenc1:amd64.
    Preparing to unpack .../20-libptexenc1_2021.20210626.59705-1ubuntu0.2_amd64.deb ...
    Unpacking libptexenc1:amd64 (2021.20210626.59705-1ubuntu0.2) ...
    Selecting previously unselected package rubygems-integration.
    Preparing to unpack .../21-rubygems-integration_1.18_all.deb ...
    Unpacking rubygems-integration (1.18) ...
    Selecting previously unselected package ruby3.0.
    Preparing to unpack .../22-ruby3.0_3.0.2-7ubuntu2.4_amd64.deb ...
    Unpacking ruby3.0 (3.0.2-7ubuntu2.4) ...
    Selecting previously unselected package ruby-rubygems.
    Preparing to unpack .../23-ruby-rubygems_3.3.5-2_all.deb ...
    Unpacking ruby-rubygems (3.3.5-2) ...
    Selecting previously unselected package ruby.
    Preparing to unpack .../24-ruby_1%3a3.0~exp1_amd64.deb ...
    Unpacking ruby (1:3.0~exp1) ...
    Selecting previously unselected package rake.
    Preparing to unpack .../25-rake_13.0.6-2_all.deb ...
    Unpacking rake (13.0.6-2) ...
    Selecting previously unselected package ruby-net-telnet.
    Preparing to unpack .../26-ruby-net-telnet_0.1.1-2_all.deb ...
    Unpacking ruby-net-telnet (0.1.1-2) ...
    Selecting previously unselected package ruby-webrick.
    Preparing to unpack .../27-ruby-webrick_1.7.0-3_all.deb ...
    Unpacking ruby-webrick (1.7.0-3) ...
    Selecting previously unselected package ruby-xmlrpc.
    Preparing to unpack .../28-ruby-xmlrpc_0.3.2-1ubuntu0.1_all.deb ...
    Unpacking ruby-xmlrpc (0.3.2-1ubuntu0.1) ...
    Selecting previously unselected package libruby3.0:amd64.
    Preparing to unpack .../29-libruby3.0_3.0.2-7ubuntu2.4_amd64.deb ...
    Unpacking libruby3.0:amd64 (3.0.2-7ubuntu2.4) ...
    Selecting previously unselected package libsynctex2:amd64.
    Preparing to unpack .../30-libsynctex2_2021.20210626.59705-1ubuntu0.2_amd64.deb ...
    Unpacking libsynctex2:amd64 (2021.20210626.59705-1ubuntu0.2) ...
    Selecting previously unselected package libteckit0:amd64.
    Preparing to unpack .../31-libteckit0_2.5.11+ds1-1_amd64.deb ...
    Unpacking libteckit0:amd64 (2.5.11+ds1-1) ...
    Selecting previously unselected package libtexlua53:amd64.
    Preparing to unpack .../32-libtexlua53_2021.20210626.59705-1ubuntu0.2_amd64.deb ...
    Unpacking libtexlua53:amd64 (2021.20210626.59705-1ubuntu0.2) ...
    Selecting previously unselected package libtexluajit2:amd64.
    Preparing to unpack .../33-libtexluajit2_2021.20210626.59705-1ubuntu0.2_amd64.deb ...
    Unpacking libtexluajit2:amd64 (2021.20210626.59705-1ubuntu0.2) ...
    Selecting previously unselected package libzzip-0-13:amd64.
    Preparing to unpack .../34-libzzip-0-13_0.13.72+dfsg.1-1.1_amd64.deb ...
    Unpacking libzzip-0-13:amd64 (0.13.72+dfsg.1-1.1) ...
    Selecting previously unselected package xfonts-encodings.
    Preparing to unpack .../35-xfonts-encodings_1%3a1.0.5-0ubuntu2_all.deb ...
    Unpacking xfonts-encodings (1:1.0.5-0ubuntu2) ...
    Selecting previously unselected package xfonts-utils.
    Preparing to unpack .../36-xfonts-utils_1%3a7.7+6build2_amd64.deb ...
    Unpacking xfonts-utils (1:7.7+6build2) ...
    Selecting previously unselected package lmodern.
    Preparing to unpack .../37-lmodern_2.004.5-6.1_all.deb ...
    Unpacking lmodern (2.004.5-6.1) ...
    Selecting previously unselected package preview-latex-style.
    Preparing to unpack .../38-preview-latex-style_12.2-1ubuntu1_all.deb ...
    Unpacking preview-latex-style (12.2-1ubuntu1) ...
    Selecting previously unselected package t1utils.
    Preparing to unpack .../39-t1utils_1.41-4build2_amd64.deb ...
    Unpacking t1utils (1.41-4build2) ...
    Selecting previously unselected package teckit.
    Preparing to unpack .../40-teckit_2.5.11+ds1-1_amd64.deb ...
    Unpacking teckit (2.5.11+ds1-1) ...
    Selecting previously unselected package tex-gyre.
    Preparing to unpack .../41-tex-gyre_20180621-3.1_all.deb ...
    Unpacking tex-gyre (20180621-3.1) ...
    Selecting previously unselected package texlive-binaries.
    Preparing to unpack .../42-texlive-binaries_2021.20210626.59705-1ubuntu0.2_amd64.deb ...
    Unpacking texlive-binaries (2021.20210626.59705-1ubuntu0.2) ...
    Selecting previously unselected package texlive-base.
    Preparing to unpack .../43-texlive-base_2021.20220204-1_all.deb ...
    Unpacking texlive-base (2021.20220204-1) ...
    Selecting previously unselected package texlive-fonts-recommended.
    Preparing to unpack .../44-texlive-fonts-recommended_2021.20220204-1_all.deb ...
    Unpacking texlive-fonts-recommended (2021.20220204-1) ...
    Selecting previously unselected package texlive-latex-base.
    Preparing to unpack .../45-texlive-latex-base_2021.20220204-1_all.deb ...
    Unpacking texlive-latex-base (2021.20220204-1) ...
    Selecting previously unselected package libfontbox-java.
    Preparing to unpack .../46-libfontbox-java_1%3a1.8.16-2_all.deb ...
    Unpacking libfontbox-java (1:1.8.16-2) ...
    Selecting previously unselected package libpdfbox-java.
    Preparing to unpack .../47-libpdfbox-java_1%3a1.8.16-2_all.deb ...
    Unpacking libpdfbox-java (1:1.8.16-2) ...
    Selecting previously unselected package texlive-latex-recommended.
    Preparing to unpack .../48-texlive-latex-recommended_2021.20220204-1_all.deb ...
    Unpacking texlive-latex-recommended (2021.20220204-1) ...
    Selecting previously unselected package texlive-pictures.
    Preparing to unpack .../49-texlive-pictures_2021.20220204-1_all.deb ...
    Unpacking texlive-pictures (2021.20220204-1) ...
    Selecting previously unselected package texlive-latex-extra.
    Preparing to unpack .../50-texlive-latex-extra_2021.20220204-1_all.deb ...
    Unpacking texlive-latex-extra (2021.20220204-1) ...
    Selecting previously unselected package texlive-plain-generic.
    Preparing to unpack .../51-texlive-plain-generic_2021.20220204-1_all.deb ...
    Unpacking texlive-plain-generic (2021.20220204-1) ...
    Selecting previously unselected package tipa.
    Preparing to unpack .../52-tipa_2%3a1.3-21_all.deb ...
    Unpacking tipa (2:1.3-21) ...
    Selecting previously unselected package texlive-xetex.
    Preparing to unpack .../53-texlive-xetex_2021.20220204-1_all.deb ...
    Unpacking texlive-xetex (2021.20220204-1) ...
    Setting up fonts-lato (2.0-2.1) ...
    Setting up fonts-noto-mono (20201225-1build1) ...
    Setting up libwoff1:amd64 (1.0.2-1build4) ...
    Setting up libtexlua53:amd64 (2021.20210626.59705-1ubuntu0.2) ...
    Setting up libijs-0.35:amd64 (0.35-15build2) ...
    Setting up libtexluajit2:amd64 (2021.20210626.59705-1ubuntu0.2) ...
    Setting up libfontbox-java (1:1.8.16-2) ...
    Setting up rubygems-integration (1.18) ...
    Setting up libzzip-0-13:amd64 (0.13.72+dfsg.1-1.1) ...
    Setting up fonts-urw-base35 (20200910-1) ...
    Setting up poppler-data (0.4.11-1) ...
    Setting up tex-common (6.17) ...
    update-language: texlive-base not installed and configured, doing nothing!
    Setting up libfontenc1:amd64 (1:1.1.4-1build3) ...
    Setting up libjbig2dec0:amd64 (0.19-3build2) ...
    Setting up libteckit0:amd64 (2.5.11+ds1-1) ...
    Setting up libapache-pom-java (18-1) ...
    Setting up ruby-net-telnet (0.1.1-2) ...
    Setting up xfonts-encodings (1:1.0.5-0ubuntu2) ...
    Setting up t1utils (1.41-4build2) ...
    Setting up libidn12:amd64 (1.38-4ubuntu1) ...
    Setting up fonts-texgyre (20180621-3.1) ...
    Setting up libkpathsea6:amd64 (2021.20210626.59705-1ubuntu0.2) ...
    Setting up ruby-webrick (1.7.0-3) ...
    Setting up fonts-lmodern (2.004.5-6.1) ...
    Setting up fonts-droid-fallback (1:6.0.1r16-1.1build1) ...
    Setting up ruby-xmlrpc (0.3.2-1ubuntu0.1) ...
    Setting up libsynctex2:amd64 (2021.20210626.59705-1ubuntu0.2) ...
    Setting up libgs9-common (9.55.0~dfsg1-0ubuntu5.6) ...
    Setting up teckit (2.5.11+ds1-1) ...
    Setting up libpdfbox-java (1:1.8.16-2) ...
    Setting up libgs9:amd64 (9.55.0~dfsg1-0ubuntu5.6) ...
    Setting up preview-latex-style (12.2-1ubuntu1) ...
    Setting up libcommons-parent-java (43-1) ...
    Setting up dvisvgm (2.13.1-1) ...
    Setting up libcommons-logging-java (1.2-2) ...
    Setting up xfonts-utils (1:7.7+6build2) ...
    Setting up libptexenc1:amd64 (2021.20210626.59705-1ubuntu0.2) ...
    Setting up texlive-binaries (2021.20210626.59705-1ubuntu0.2) ...
    update-alternatives: using /usr/bin/xdvi-xaw to provide /usr/bin/xdvi.bin (xdvi.bin) in auto mode
    update-alternatives: using /usr/bin/bibtex.original to provide /usr/bin/bibtex (bibtex) in auto mode
    Setting up lmodern (2.004.5-6.1) ...
    Setting up texlive-base (2021.20220204-1) ...
    /usr/bin/ucfr
    /usr/bin/ucfr
    /usr/bin/ucfr
    /usr/bin/ucfr
    mktexlsr: Updating /var/lib/texmf/ls-R-TEXLIVEDIST... 
    mktexlsr: Updating /var/lib/texmf/ls-R-TEXMFMAIN... 
    mktexlsr: Updating /var/lib/texmf/ls-R... 
    mktexlsr: Done.
    tl-paper: setting paper size for dvips to a4: /var/lib/texmf/dvips/config/config-paper.ps
    tl-paper: setting paper size for dvipdfmx to a4: /var/lib/texmf/dvipdfmx/dvipdfmx-paper.cfg
    tl-paper: setting paper size for xdvi to a4: /var/lib/texmf/xdvi/XDvi-paper
    tl-paper: setting paper size for pdftex to a4: /var/lib/texmf/tex/generic/tex-ini-files/pdftexconfig.tex
    Setting up tex-gyre (20180621-3.1) ...
    Setting up texlive-plain-generic (2021.20220204-1) ...
    Setting up texlive-latex-base (2021.20220204-1) ...
    Setting up texlive-latex-recommended (2021.20220204-1) ...
    Setting up texlive-pictures (2021.20220204-1) ...
    Setting up texlive-fonts-recommended (2021.20220204-1) ...
    Setting up tipa (2:1.3-21) ...
    Setting up texlive-latex-extra (2021.20220204-1) ...
    Setting up texlive-xetex (2021.20220204-1) ...
    Setting up rake (13.0.6-2) ...
    Setting up libruby3.0:amd64 (3.0.2-7ubuntu2.4) ...
    Setting up ruby3.0 (3.0.2-7ubuntu2.4) ...
    Setting up ruby (1:3.0~exp1) ...
    Setting up ruby-rubygems (3.3.5-2) ...
    Processing triggers for man-db (2.10.2-1) ...
    Processing triggers for fontconfig (2.13.1-4.2ubuntu5) ...
    Processing triggers for libc-bin (2.35-0ubuntu3.4) ...
    /sbin/ldconfig.real: /usr/local/lib/libtbbbind_2_5.so.3 is not a symbolic link
    
    /sbin/ldconfig.real: /usr/local/lib/libtbbbind.so.3 is not a symbolic link
    
    /sbin/ldconfig.real: /usr/local/lib/libtbb.so.12 is not a symbolic link
    
    /sbin/ldconfig.real: /usr/local/lib/libtbbmalloc_proxy.so.2 is not a symbolic link
    
    /sbin/ldconfig.real: /usr/local/lib/libtbbbind_2_0.so.3 is not a symbolic link
    
    /sbin/ldconfig.real: /usr/local/lib/libtbbmalloc.so.2 is not a symbolic link
    
    Processing triggers for tex-common (6.17) ...
    Running updmap-sys. This may take some time... done.
    Running mktexlsr /var/lib/texmf ... done.
    Building format(s) --all.
    	This may take some time... done.
    Reading package lists... Done
    Building dependency tree... Done
    Reading state information... Done
    E: Unable to locate package texlive-generic-recommended
    Requirement already satisfied: nbconvert in /usr/local/lib/python3.10/dist-packages (6.5.4)
    Requirement already satisfied: lxml in /usr/local/lib/python3.10/dist-packages (from nbconvert) (4.9.4)
    Requirement already satisfied: beautifulsoup4 in /usr/local/lib/python3.10/dist-packages (from nbconvert) (4.12.3)
    Requirement already satisfied: bleach in /usr/local/lib/python3.10/dist-packages (from nbconvert) (6.1.0)
    Requirement already satisfied: defusedxml in /usr/local/lib/python3.10/dist-packages (from nbconvert) (0.7.1)
    Requirement already satisfied: entrypoints>=0.2.2 in /usr/local/lib/python3.10/dist-packages (from nbconvert) (0.4)
    Requirement already satisfied: jinja2>=3.0 in /usr/local/lib/python3.10/dist-packages (from nbconvert) (3.1.3)
    Requirement already satisfied: jupyter-core>=4.7 in /usr/local/lib/python3.10/dist-packages (from nbconvert) (5.7.2)
    Requirement already satisfied: jupyterlab-pygments in /usr/local/lib/python3.10/dist-packages (from nbconvert) (0.3.0)
    Requirement already satisfied: MarkupSafe>=2.0 in /usr/local/lib/python3.10/dist-packages (from nbconvert) (2.1.5)
    Requirement already satisfied: mistune<2,>=0.8.1 in /usr/local/lib/python3.10/dist-packages (from nbconvert) (0.8.4)
    Requirement already satisfied: nbclient>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from nbconvert) (0.10.0)
    Requirement already satisfied: nbformat>=5.1 in /usr/local/lib/python3.10/dist-packages (from nbconvert) (5.10.2)
    Requirement already satisfied: packaging in /usr/local/lib/python3.10/dist-packages (from nbconvert) (24.0)
    Requirement already satisfied: pandocfilters>=1.4.1 in /usr/local/lib/python3.10/dist-packages (from nbconvert) (1.5.1)
    Requirement already satisfied: pygments>=2.4.1 in /usr/local/lib/python3.10/dist-packages (from nbconvert) (2.16.1)
    Requirement already satisfied: tinycss2 in /usr/local/lib/python3.10/dist-packages (from nbconvert) (1.2.1)
    Requirement already satisfied: traitlets>=5.0 in /usr/local/lib/python3.10/dist-packages (from nbconvert) (5.7.1)
    Requirement already satisfied: platformdirs>=2.5 in /usr/local/lib/python3.10/dist-packages (from jupyter-core>=4.7->nbconvert) (4.2.0)
    Requirement already satisfied: jupyter-client>=6.1.12 in /usr/local/lib/python3.10/dist-packages (from nbclient>=0.5.0->nbconvert) (6.1.12)
    Requirement already satisfied: fastjsonschema in /usr/local/lib/python3.10/dist-packages (from nbformat>=5.1->nbconvert) (2.19.1)
    Requirement already satisfied: jsonschema>=2.6 in /usr/local/lib/python3.10/dist-packages (from nbformat>=5.1->nbconvert) (4.19.2)
    Requirement already satisfied: soupsieve>1.2 in /usr/local/lib/python3.10/dist-packages (from beautifulsoup4->nbconvert) (2.5)
    Requirement already satisfied: six>=1.9.0 in /usr/local/lib/python3.10/dist-packages (from bleach->nbconvert) (1.16.0)
    Requirement already satisfied: webencodings in /usr/local/lib/python3.10/dist-packages (from bleach->nbconvert) (0.5.1)
    Requirement already satisfied: attrs>=22.2.0 in /usr/local/lib/python3.10/dist-packages (from jsonschema>=2.6->nbformat>=5.1->nbconvert) (23.2.0)
    Requirement already satisfied: jsonschema-specifications>=2023.03.6 in /usr/local/lib/python3.10/dist-packages (from jsonschema>=2.6->nbformat>=5.1->nbconvert) (2023.12.1)
    Requirement already satisfied: referencing>=0.28.4 in /usr/local/lib/python3.10/dist-packages (from jsonschema>=2.6->nbformat>=5.1->nbconvert) (0.33.0)
    Requirement already satisfied: rpds-py>=0.7.1 in /usr/local/lib/python3.10/dist-packages (from jsonschema>=2.6->nbformat>=5.1->nbconvert) (0.18.0)
    Requirement already satisfied: pyzmq>=13 in /usr/local/lib/python3.10/dist-packages (from jupyter-client>=6.1.12->nbclient>=0.5.0->nbconvert) (23.2.1)
    Requirement already satisfied: python-dateutil>=2.1 in /usr/local/lib/python3.10/dist-packages (from jupyter-client>=6.1.12->nbclient>=0.5.0->nbconvert) (2.8.2)
    Requirement already satisfied: tornado>=4.1 in /usr/local/lib/python3.10/dist-packages (from jupyter-client>=6.1.12->nbclient>=0.5.0->nbconvert) (6.3.3)



```python
!jupyter nbconvert --to pdf /content/PromptLii.ipynb
!jupyter nbconvert --to markdown /content/PromptLii.ipynb
!jupyter nbconvert --to html --embed-images /content/PromptLii.ipynb
```

    [NbConvertApp] WARNING | pattern '/content/PromptLii.ipynb' matched no files
    This application is used to convert notebook files (*.ipynb)
            to various other formats.
    
            WARNING: THE COMMANDLINE INTERFACE MAY CHANGE IN FUTURE RELEASES.
    
    Options
    =======
    The options below are convenience aliases to configurable class-options,
    as listed in the "Equivalent to" description-line of the aliases.
    To see all configurable class-options for some <cmd>, use:
        <cmd> --help-all
    
    --debug
        set log level to logging.DEBUG (maximize logging output)
        Equivalent to: [--Application.log_level=10]
    --show-config
        Show the application's configuration (human-readable format)
        Equivalent to: [--Application.show_config=True]
    --show-config-json
        Show the application's configuration (json format)
        Equivalent to: [--Application.show_config_json=True]
    --generate-config
        generate default config file
        Equivalent to: [--JupyterApp.generate_config=True]
    -y
        Answer yes to any questions instead of prompting.
        Equivalent to: [--JupyterApp.answer_yes=True]
    --execute
        Execute the notebook prior to export.
        Equivalent to: [--ExecutePreprocessor.enabled=True]
    --allow-errors
        Continue notebook execution even if one of the cells throws an error and include the error message in the cell output (the default behaviour is to abort conversion). This flag is only relevant if '--execute' was specified, too.
        Equivalent to: [--ExecutePreprocessor.allow_errors=True]
    --stdin
        read a single notebook file from stdin. Write the resulting notebook with default basename 'notebook.*'
        Equivalent to: [--NbConvertApp.from_stdin=True]
    --stdout
        Write notebook output to stdout instead of files.
        Equivalent to: [--NbConvertApp.writer_class=StdoutWriter]
    --inplace
        Run nbconvert in place, overwriting the existing notebook (only
                relevant when converting to notebook format)
        Equivalent to: [--NbConvertApp.use_output_suffix=False --NbConvertApp.export_format=notebook --FilesWriter.build_directory=]
    --clear-output
        Clear output of current file and save in place,
                overwriting the existing notebook.
        Equivalent to: [--NbConvertApp.use_output_suffix=False --NbConvertApp.export_format=notebook --FilesWriter.build_directory= --ClearOutputPreprocessor.enabled=True]
    --no-prompt
        Exclude input and output prompts from converted document.
        Equivalent to: [--TemplateExporter.exclude_input_prompt=True --TemplateExporter.exclude_output_prompt=True]
    --no-input
        Exclude input cells and output prompts from converted document.
                This mode is ideal for generating code-free reports.
        Equivalent to: [--TemplateExporter.exclude_output_prompt=True --TemplateExporter.exclude_input=True --TemplateExporter.exclude_input_prompt=True]
    --allow-chromium-download
        Whether to allow downloading chromium if no suitable version is found on the system.
        Equivalent to: [--WebPDFExporter.allow_chromium_download=True]
    --disable-chromium-sandbox
        Disable chromium security sandbox when converting to PDF..
        Equivalent to: [--WebPDFExporter.disable_sandbox=True]
    --show-input
        Shows code input. This flag is only useful for dejavu users.
        Equivalent to: [--TemplateExporter.exclude_input=False]
    --embed-images
        Embed the images as base64 dataurls in the output. This flag is only useful for the HTML/WebPDF/Slides exports.
        Equivalent to: [--HTMLExporter.embed_images=True]
    --sanitize-html
        Whether the HTML in Markdown cells and cell outputs should be sanitized..
        Equivalent to: [--HTMLExporter.sanitize_html=True]
    --log-level=<Enum>
        Set the log level by value or name.
        Choices: any of [0, 10, 20, 30, 40, 50, 'DEBUG', 'INFO', 'WARN', 'ERROR', 'CRITICAL']
        Default: 30
        Equivalent to: [--Application.log_level]
    --config=<Unicode>
        Full path of a config file.
        Default: ''
        Equivalent to: [--JupyterApp.config_file]
    --to=<Unicode>
        The export format to be used, either one of the built-in formats
                ['asciidoc', 'custom', 'html', 'latex', 'markdown', 'notebook', 'pdf', 'python', 'rst', 'script', 'slides', 'webpdf']
                or a dotted object name that represents the import path for an
                ``Exporter`` class
        Default: ''
        Equivalent to: [--NbConvertApp.export_format]
    --template=<Unicode>
        Name of the template to use
        Default: ''
        Equivalent to: [--TemplateExporter.template_name]
    --template-file=<Unicode>
        Name of the template file to use
        Default: None
        Equivalent to: [--TemplateExporter.template_file]
    --theme=<Unicode>
        Template specific theme(e.g. the name of a JupyterLab CSS theme distributed
        as prebuilt extension for the lab template)
        Default: 'light'
        Equivalent to: [--HTMLExporter.theme]
    --sanitize_html=<Bool>
        Whether the HTML in Markdown cells and cell outputs should be sanitized.This
        should be set to True by nbviewer or similar tools.
        Default: False
        Equivalent to: [--HTMLExporter.sanitize_html]
    --writer=<DottedObjectName>
        Writer class used to write the
                                            results of the conversion
        Default: 'FilesWriter'
        Equivalent to: [--NbConvertApp.writer_class]
    --post=<DottedOrNone>
        PostProcessor class used to write the
                                            results of the conversion
        Default: ''
        Equivalent to: [--NbConvertApp.postprocessor_class]
    --output=<Unicode>
        overwrite base name use for output files.
                    can only be used when converting one notebook at a time.
        Default: ''
        Equivalent to: [--NbConvertApp.output_base]
    --output-dir=<Unicode>
        Directory to write output(s) to. Defaults
                                      to output to the directory of each notebook. To recover
                                      previous default behaviour (outputting to the current
                                      working directory) use . as the flag value.
        Default: ''
        Equivalent to: [--FilesWriter.build_directory]
    --reveal-prefix=<Unicode>
        The URL prefix for reveal.js (version 3.x).
                This defaults to the reveal CDN, but can be any url pointing to a copy
                of reveal.js.
                For speaker notes to work, this must be a relative path to a local
                copy of reveal.js: e.g., "reveal.js".
                If a relative path is given, it must be a subdirectory of the
                current directory (from which the server is run).
                See the usage documentation
                (https://nbconvert.readthedocs.io/en/latest/usage.html#reveal-js-html-slideshow)
                for more details.
        Default: ''
        Equivalent to: [--SlidesExporter.reveal_url_prefix]
    --nbformat=<Enum>
        The nbformat version to write.
                Use this to downgrade notebooks.
        Choices: any of [1, 2, 3, 4]
        Default: 4
        Equivalent to: [--NotebookExporter.nbformat_version]
    
    Examples
    --------
    
        The simplest way to use nbconvert is
    
                > jupyter nbconvert mynotebook.ipynb --to html
    
                Options include ['asciidoc', 'custom', 'html', 'latex', 'markdown', 'notebook', 'pdf', 'python', 'rst', 'script', 'slides', 'webpdf'].
    
                > jupyter nbconvert --to latex mynotebook.ipynb
    
                Both HTML and LaTeX support multiple output templates. LaTeX includes
                'base', 'article' and 'report'.  HTML includes 'basic', 'lab' and
                'classic'. You can specify the flavor of the format used.
    
                > jupyter nbconvert --to html --template lab mynotebook.ipynb
    
                You can also pipe the output to stdout, rather than a file
    
                > jupyter nbconvert mynotebook.ipynb --stdout
    
                PDF is generated via latex
    
                > jupyter nbconvert mynotebook.ipynb --to pdf
    
                You can get (and serve) a Reveal.js-powered slideshow
    
                > jupyter nbconvert myslides.ipynb --to slides --post serve
    
                Multiple notebooks can be given at the command line in a couple of
                different ways:
    
                > jupyter nbconvert notebook*.ipynb
                > jupyter nbconvert notebook1.ipynb notebook2.ipynb
    
                or you can specify the notebooks list in a config file, containing::
    
                    c.NbConvertApp.notebooks = ["my_notebook.ipynb"]
    
                > jupyter nbconvert --config mycfg.py
    
    To see all available configurables, use `--help-all`.
    
    [NbConvertApp] WARNING | pattern '/content/PromptLii.md' matched no files
    This application is used to convert notebook files (*.ipynb)
            to various other formats.
    
            WARNING: THE COMMANDLINE INTERFACE MAY CHANGE IN FUTURE RELEASES.
    
    Options
    =======
    The options below are convenience aliases to configurable class-options,
    as listed in the "Equivalent to" description-line of the aliases.
    To see all configurable class-options for some <cmd>, use:
        <cmd> --help-all
    
    --debug
        set log level to logging.DEBUG (maximize logging output)
        Equivalent to: [--Application.log_level=10]
    --show-config
        Show the application's configuration (human-readable format)
        Equivalent to: [--Application.show_config=True]
    --show-config-json
        Show the application's configuration (json format)
        Equivalent to: [--Application.show_config_json=True]
    --generate-config
        generate default config file
        Equivalent to: [--JupyterApp.generate_config=True]
    -y
        Answer yes to any questions instead of prompting.
        Equivalent to: [--JupyterApp.answer_yes=True]
    --execute
        Execute the notebook prior to export.
        Equivalent to: [--ExecutePreprocessor.enabled=True]
    --allow-errors
        Continue notebook execution even if one of the cells throws an error and include the error message in the cell output (the default behaviour is to abort conversion). This flag is only relevant if '--execute' was specified, too.
        Equivalent to: [--ExecutePreprocessor.allow_errors=True]
    --stdin
        read a single notebook file from stdin. Write the resulting notebook with default basename 'notebook.*'
        Equivalent to: [--NbConvertApp.from_stdin=True]
    --stdout
        Write notebook output to stdout instead of files.
        Equivalent to: [--NbConvertApp.writer_class=StdoutWriter]
    --inplace
        Run nbconvert in place, overwriting the existing notebook (only
                relevant when converting to notebook format)
        Equivalent to: [--NbConvertApp.use_output_suffix=False --NbConvertApp.export_format=notebook --FilesWriter.build_directory=]
    --clear-output
        Clear output of current file and save in place,
                overwriting the existing notebook.
        Equivalent to: [--NbConvertApp.use_output_suffix=False --NbConvertApp.export_format=notebook --FilesWriter.build_directory= --ClearOutputPreprocessor.enabled=True]
    --no-prompt
        Exclude input and output prompts from converted document.
        Equivalent to: [--TemplateExporter.exclude_input_prompt=True --TemplateExporter.exclude_output_prompt=True]
    --no-input
        Exclude input cells and output prompts from converted document.
                This mode is ideal for generating code-free reports.
        Equivalent to: [--TemplateExporter.exclude_output_prompt=True --TemplateExporter.exclude_input=True --TemplateExporter.exclude_input_prompt=True]
    --allow-chromium-download
        Whether to allow downloading chromium if no suitable version is found on the system.
        Equivalent to: [--WebPDFExporter.allow_chromium_download=True]
    --disable-chromium-sandbox
        Disable chromium security sandbox when converting to PDF..
        Equivalent to: [--WebPDFExporter.disable_sandbox=True]
    --show-input
        Shows code input. This flag is only useful for dejavu users.
        Equivalent to: [--TemplateExporter.exclude_input=False]
    --embed-images
        Embed the images as base64 dataurls in the output. This flag is only useful for the HTML/WebPDF/Slides exports.
        Equivalent to: [--HTMLExporter.embed_images=True]
    --sanitize-html
        Whether the HTML in Markdown cells and cell outputs should be sanitized..
        Equivalent to: [--HTMLExporter.sanitize_html=True]
    --log-level=<Enum>
        Set the log level by value or name.
        Choices: any of [0, 10, 20, 30, 40, 50, 'DEBUG', 'INFO', 'WARN', 'ERROR', 'CRITICAL']
        Default: 30
        Equivalent to: [--Application.log_level]
    --config=<Unicode>
        Full path of a config file.
        Default: ''
        Equivalent to: [--JupyterApp.config_file]
    --to=<Unicode>
        The export format to be used, either one of the built-in formats
                ['asciidoc', 'custom', 'html', 'latex', 'markdown', 'notebook', 'pdf', 'python', 'rst', 'script', 'slides', 'webpdf']
                or a dotted object name that represents the import path for an
                ``Exporter`` class
        Default: ''
        Equivalent to: [--NbConvertApp.export_format]
    --template=<Unicode>
        Name of the template to use
        Default: ''
        Equivalent to: [--TemplateExporter.template_name]
    --template-file=<Unicode>
        Name of the template file to use
        Default: None
        Equivalent to: [--TemplateExporter.template_file]
    --theme=<Unicode>
        Template specific theme(e.g. the name of a JupyterLab CSS theme distributed
        as prebuilt extension for the lab template)
        Default: 'light'
        Equivalent to: [--HTMLExporter.theme]
    --sanitize_html=<Bool>
        Whether the HTML in Markdown cells and cell outputs should be sanitized.This
        should be set to True by nbviewer or similar tools.
        Default: False
        Equivalent to: [--HTMLExporter.sanitize_html]
    --writer=<DottedObjectName>
        Writer class used to write the
                                            results of the conversion
        Default: 'FilesWriter'
        Equivalent to: [--NbConvertApp.writer_class]
    --post=<DottedOrNone>
        PostProcessor class used to write the
                                            results of the conversion
        Default: ''
        Equivalent to: [--NbConvertApp.postprocessor_class]
    --output=<Unicode>
        overwrite base name use for output files.
                    can only be used when converting one notebook at a time.
        Default: ''
        Equivalent to: [--NbConvertApp.output_base]
    --output-dir=<Unicode>
        Directory to write output(s) to. Defaults
                                      to output to the directory of each notebook. To recover
                                      previous default behaviour (outputting to the current
                                      working directory) use . as the flag value.
        Default: ''
        Equivalent to: [--FilesWriter.build_directory]
    --reveal-prefix=<Unicode>
        The URL prefix for reveal.js (version 3.x).
                This defaults to the reveal CDN, but can be any url pointing to a copy
                of reveal.js.
                For speaker notes to work, this must be a relative path to a local
                copy of reveal.js: e.g., "reveal.js".
                If a relative path is given, it must be a subdirectory of the
                current directory (from which the server is run).
                See the usage documentation
                (https://nbconvert.readthedocs.io/en/latest/usage.html#reveal-js-html-slideshow)
                for more details.
        Default: ''
        Equivalent to: [--SlidesExporter.reveal_url_prefix]
    --nbformat=<Enum>
        The nbformat version to write.
                Use this to downgrade notebooks.
        Choices: any of [1, 2, 3, 4]
        Default: 4
        Equivalent to: [--NotebookExporter.nbformat_version]
    
    Examples
    --------
    
        The simplest way to use nbconvert is
    
                > jupyter nbconvert mynotebook.ipynb --to html
    
                Options include ['asciidoc', 'custom', 'html', 'latex', 'markdown', 'notebook', 'pdf', 'python', 'rst', 'script', 'slides', 'webpdf'].
    
                > jupyter nbconvert --to latex mynotebook.ipynb
    
                Both HTML and LaTeX support multiple output templates. LaTeX includes
                'base', 'article' and 'report'.  HTML includes 'basic', 'lab' and
                'classic'. You can specify the flavor of the format used.
    
                > jupyter nbconvert --to html --template lab mynotebook.ipynb
    
                You can also pipe the output to stdout, rather than a file
    
                > jupyter nbconvert mynotebook.ipynb --stdout
    
                PDF is generated via latex
    
                > jupyter nbconvert mynotebook.ipynb --to pdf
    
                You can get (and serve) a Reveal.js-powered slideshow
    
                > jupyter nbconvert myslides.ipynb --to slides --post serve
    
                Multiple notebooks can be given at the command line in a couple of
                different ways:
    
                > jupyter nbconvert notebook*.ipynb
                > jupyter nbconvert notebook1.ipynb notebook2.ipynb
    
                or you can specify the notebooks list in a config file, containing::
    
                    c.NbConvertApp.notebooks = ["my_notebook.ipynb"]
    
                > jupyter nbconvert --config mycfg.py
    
    To see all available configurables, use `--help-all`.
    
    [NbConvertApp] WARNING | pattern '/content/PromptLii.html' matched no files
    This application is used to convert notebook files (*.ipynb)
            to various other formats.
    
            WARNING: THE COMMANDLINE INTERFACE MAY CHANGE IN FUTURE RELEASES.
    
    Options
    =======
    The options below are convenience aliases to configurable class-options,
    as listed in the "Equivalent to" description-line of the aliases.
    To see all configurable class-options for some <cmd>, use:
        <cmd> --help-all
    
    --debug
        set log level to logging.DEBUG (maximize logging output)
        Equivalent to: [--Application.log_level=10]
    --show-config
        Show the application's configuration (human-readable format)
        Equivalent to: [--Application.show_config=True]
    --show-config-json
        Show the application's configuration (json format)
        Equivalent to: [--Application.show_config_json=True]
    --generate-config
        generate default config file
        Equivalent to: [--JupyterApp.generate_config=True]
    -y
        Answer yes to any questions instead of prompting.
        Equivalent to: [--JupyterApp.answer_yes=True]
    --execute
        Execute the notebook prior to export.
        Equivalent to: [--ExecutePreprocessor.enabled=True]
    --allow-errors
        Continue notebook execution even if one of the cells throws an error and include the error message in the cell output (the default behaviour is to abort conversion). This flag is only relevant if '--execute' was specified, too.
        Equivalent to: [--ExecutePreprocessor.allow_errors=True]
    --stdin
        read a single notebook file from stdin. Write the resulting notebook with default basename 'notebook.*'
        Equivalent to: [--NbConvertApp.from_stdin=True]
    --stdout
        Write notebook output to stdout instead of files.
        Equivalent to: [--NbConvertApp.writer_class=StdoutWriter]
    --inplace
        Run nbconvert in place, overwriting the existing notebook (only
                relevant when converting to notebook format)
        Equivalent to: [--NbConvertApp.use_output_suffix=False --NbConvertApp.export_format=notebook --FilesWriter.build_directory=]
    --clear-output
        Clear output of current file and save in place,
                overwriting the existing notebook.
        Equivalent to: [--NbConvertApp.use_output_suffix=False --NbConvertApp.export_format=notebook --FilesWriter.build_directory= --ClearOutputPreprocessor.enabled=True]
    --no-prompt
        Exclude input and output prompts from converted document.
        Equivalent to: [--TemplateExporter.exclude_input_prompt=True --TemplateExporter.exclude_output_prompt=True]
    --no-input
        Exclude input cells and output prompts from converted document.
                This mode is ideal for generating code-free reports.
        Equivalent to: [--TemplateExporter.exclude_output_prompt=True --TemplateExporter.exclude_input=True --TemplateExporter.exclude_input_prompt=True]
    --allow-chromium-download
        Whether to allow downloading chromium if no suitable version is found on the system.
        Equivalent to: [--WebPDFExporter.allow_chromium_download=True]
    --disable-chromium-sandbox
        Disable chromium security sandbox when converting to PDF..
        Equivalent to: [--WebPDFExporter.disable_sandbox=True]
    --show-input
        Shows code input. This flag is only useful for dejavu users.
        Equivalent to: [--TemplateExporter.exclude_input=False]
    --embed-images
        Embed the images as base64 dataurls in the output. This flag is only useful for the HTML/WebPDF/Slides exports.
        Equivalent to: [--HTMLExporter.embed_images=True]
    --sanitize-html
        Whether the HTML in Markdown cells and cell outputs should be sanitized..
        Equivalent to: [--HTMLExporter.sanitize_html=True]
    --log-level=<Enum>
        Set the log level by value or name.
        Choices: any of [0, 10, 20, 30, 40, 50, 'DEBUG', 'INFO', 'WARN', 'ERROR', 'CRITICAL']
        Default: 30
        Equivalent to: [--Application.log_level]
    --config=<Unicode>
        Full path of a config file.
        Default: ''
        Equivalent to: [--JupyterApp.config_file]
    --to=<Unicode>
        The export format to be used, either one of the built-in formats
                ['asciidoc', 'custom', 'html', 'latex', 'markdown', 'notebook', 'pdf', 'python', 'rst', 'script', 'slides', 'webpdf']
                or a dotted object name that represents the import path for an
                ``Exporter`` class
        Default: ''
        Equivalent to: [--NbConvertApp.export_format]
    --template=<Unicode>
        Name of the template to use
        Default: ''
        Equivalent to: [--TemplateExporter.template_name]
    --template-file=<Unicode>
        Name of the template file to use
        Default: None
        Equivalent to: [--TemplateExporter.template_file]
    --theme=<Unicode>
        Template specific theme(e.g. the name of a JupyterLab CSS theme distributed
        as prebuilt extension for the lab template)
        Default: 'light'
        Equivalent to: [--HTMLExporter.theme]
    --sanitize_html=<Bool>
        Whether the HTML in Markdown cells and cell outputs should be sanitized.This
        should be set to True by nbviewer or similar tools.
        Default: False
        Equivalent to: [--HTMLExporter.sanitize_html]
    --writer=<DottedObjectName>
        Writer class used to write the
                                            results of the conversion
        Default: 'FilesWriter'
        Equivalent to: [--NbConvertApp.writer_class]
    --post=<DottedOrNone>
        PostProcessor class used to write the
                                            results of the conversion
        Default: ''
        Equivalent to: [--NbConvertApp.postprocessor_class]
    --output=<Unicode>
        overwrite base name use for output files.
                    can only be used when converting one notebook at a time.
        Default: ''
        Equivalent to: [--NbConvertApp.output_base]
    --output-dir=<Unicode>
        Directory to write output(s) to. Defaults
                                      to output to the directory of each notebook. To recover
                                      previous default behaviour (outputting to the current
                                      working directory) use . as the flag value.
        Default: ''
        Equivalent to: [--FilesWriter.build_directory]
    --reveal-prefix=<Unicode>
        The URL prefix for reveal.js (version 3.x).
                This defaults to the reveal CDN, but can be any url pointing to a copy
                of reveal.js.
                For speaker notes to work, this must be a relative path to a local
                copy of reveal.js: e.g., "reveal.js".
                If a relative path is given, it must be a subdirectory of the
                current directory (from which the server is run).
                See the usage documentation
                (https://nbconvert.readthedocs.io/en/latest/usage.html#reveal-js-html-slideshow)
                for more details.
        Default: ''
        Equivalent to: [--SlidesExporter.reveal_url_prefix]
    --nbformat=<Enum>
        The nbformat version to write.
                Use this to downgrade notebooks.
        Choices: any of [1, 2, 3, 4]
        Default: 4
        Equivalent to: [--NotebookExporter.nbformat_version]
    
    Examples
    --------
    
        The simplest way to use nbconvert is
    
                > jupyter nbconvert mynotebook.ipynb --to html
    
                Options include ['asciidoc', 'custom', 'html', 'latex', 'markdown', 'notebook', 'pdf', 'python', 'rst', 'script', 'slides', 'webpdf'].
    
                > jupyter nbconvert --to latex mynotebook.ipynb
    
                Both HTML and LaTeX support multiple output templates. LaTeX includes
                'base', 'article' and 'report'.  HTML includes 'basic', 'lab' and
                'classic'. You can specify the flavor of the format used.
    
                > jupyter nbconvert --to html --template lab mynotebook.ipynb
    
                You can also pipe the output to stdout, rather than a file
    
                > jupyter nbconvert mynotebook.ipynb --stdout
    
                PDF is generated via latex
    
                > jupyter nbconvert mynotebook.ipynb --to pdf
    
                You can get (and serve) a Reveal.js-powered slideshow
    
                > jupyter nbconvert myslides.ipynb --to slides --post serve
    
                Multiple notebooks can be given at the command line in a couple of
                different ways:
    
                > jupyter nbconvert notebook*.ipynb
                > jupyter nbconvert notebook1.ipynb notebook2.ipynb
    
                or you can specify the notebooks list in a config file, containing::
    
                    c.NbConvertApp.notebooks = ["my_notebook.ipynb"]
    
                > jupyter nbconvert --config mycfg.py
    
    To see all available configurables, use `--help-all`.
    

